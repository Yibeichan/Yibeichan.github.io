<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>写了几个字</title>
  <subtitle>逃避可耻</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yibeichen.me/"/>
  <updated>2018-08-25T09:31:36.236Z</updated>
  <id>http://yibeichen.me/</id>
  
  <author>
    <name>Yibei Chen</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>淘宝（天猫）商品相关的爬虫</title>
    <link href="http://yibeichen.me/2018/08/25/Taobao-Crawler/"/>
    <id>http://yibeichen.me/2018/08/25/Taobao-Crawler/</id>
    <published>2018-08-25T08:31:30.000Z</published>
    <updated>2018-08-25T09:31:36.236Z</updated>
    
    <content type="html"><![CDATA[<p>最近在做一个关于“电子烟”的研究，需要爬取淘宝数据，探索了一下，还有点小收获。</p>
<p>话说真是三天不写就手生，每次都要google一下hexo如何增加新文章……<br><a id="more"></a></p>
<p>爬虫主要包括：商品搜索结果、用户评论、店铺信息（动态评分）。还有一些其他小代码。都是网页端的。获得的数据，除评论外，其他都存在了MongoDB。<br>我的代码也借鉴了网上很多优秀大神们的，有借鉴的部分会尽量说明，如果有遗漏的，还请原谅，过去了一个多月，我记性真的不好。<br>我的研究对象是天猫上的电子烟产品，但是爬虫的时候发现，淘宝的前端要比天猫前端更友好，写得更规范，便于定位，所以基本上都转换成了淘宝的链接。</p>
<h1 id="商品搜索结果"><a href="#商品搜索结果" class="headerlink" title="商品搜索结果"></a>商品搜索结果</h1><p>这部分主要是借鉴了<a href="https://zhuanlan.zhihu.com/p/29436212" target="_blank" rel="external">知乎上的这篇</a>，这篇文章说得很详细了。</p>
<p>不过我当时遇到了一个问题，就是登录。本来一开始爬的时候，没有要求登录，可能爬取得太频繁了，不仅需要登录，还要客户端二维码扫描。大概是一开始不懂事，不知道会有登录限制，所以不停地测试，结果就…… 后来发现，歇一天再爬的话，就不会要求登录，当然那天如果你还是爬很多遍，就又有限制了。我当时不知道第二天可以清零，想了个笨办法，模拟登录打开页面，让它停留20-30s，手动扫描二维码，再跳转。这么不优秀的方法，也只有我这种行外人才能想得出来了，毕竟我只想跳过登录，开始抓取。</p>
<p>不过，我刚刚发现，前几天清理文件夹的时候，好像把login的代码删掉了…… 只能，祝大家好运了……</p>
<h1 id="用户评论"><a href="#用户评论" class="headerlink" title="用户评论"></a>用户评论</h1><p>好像是参考的<a href="https://www.cnblogs.com/dearvee/p/6565688.html" target="_blank" rel="external">这篇</a>，我已经不记得了……</p>
<p>我稍稍修改了一下代码，基本信息存到了mongodb，最后注释部分是每个商品的评论单独存成csv：<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div></pre></td><td class="code"><pre><div class="line">import pymongo</div><div class="line">from pyquery import PyQuery <span class="keyword">as</span> pq</div><div class="line">import requests</div><div class="line">import json</div><div class="line">import pandas <span class="keyword">as</span> pd</div><div class="line">import csv</div><div class="line">import re</div><div class="line"></div><div class="line"></div><div class="line">MONGO_URL = <span class="string">'mongodb://localhost:27017/'</span></div><div class="line">MONGO_DB = <span class="string">'taobao'</span></div><div class="line">MONGO_COLLECTION = <span class="string">'comm_num0727'</span></div><div class="line"># MONGO_COLLECTION = <span class="string">'shop_high0727'</span></div><div class="line">client = pymongo.MongoClient(MONGO_URL)</div><div class="line">db = client[MONGO_DB]</div><div class="line"></div><div class="line">def save_to_mongo(result):</div><div class="line">    <span class="string">""</span><span class="comment">"</span></div><div class="line">    保存至MongoDB</div><div class="line">    :param resul<span class="variable">t:</span> 结果</div><div class="line">    <span class="string">""</span><span class="comment">"</span></div><div class="line">    <span class="keyword">try</span>:</div><div class="line">        <span class="keyword">if</span> db[MONGO_COLLECTION].<span class="keyword">insert</span>(result):</div><div class="line">            <span class="keyword">print</span>(<span class="string">'存储到MongoDB成功'</span>)</div><div class="line">    except Exception:</div><div class="line">        <span class="keyword">print</span>(<span class="string">'存储到MongoDB失败'</span>)</div><div class="line"></div><div class="line"># df = pd.read_csv(<span class="string">'0516.csv'</span>)</div><div class="line">df1 = pd.read_json(<span class="string">'e-cigar-high.json'</span>)</div><div class="line">df2 = pd.read_json(<span class="string">'e-cigar-low.json'</span>)</div><div class="line">df = df1.<span class="keyword">append</span>(df2)</div><div class="line"><span class="keyword">for</span> link in df[<span class="string">'p_link'</span>]:</div><div class="line">    start = link.<span class="keyword">find</span>(<span class="string">'id='</span>)+<span class="number">3</span></div><div class="line">    end = link.<span class="keyword">find</span>(<span class="string">'&amp;ns='</span>)</div><div class="line">    goods_id = link[<span class="keyword">star</span><span class="variable">t:end</span>]</div><div class="line">    url = <span class="string">'https://rate.taobao.com/feedRateList.htm?auctionNumId='</span>+goods_id+<span class="string">'&amp;currentPageNum=1'</span></div><div class="line">    <span class="keyword">res</span> = requests.<span class="built_in">get</span>(url)</div><div class="line">    jc = json.loads(<span class="keyword">res</span>.text.strip().strip(<span class="string">'()'</span>))</div><div class="line">    <span class="built_in">max</span> = jc[<span class="string">'total'</span>]</div><div class="line">    users = []</div><div class="line">    comments = []</div><div class="line">    comments_date = []</div><div class="line">    <span class="built_in">count</span> = <span class="number">0</span></div><div class="line">    page = <span class="number">1</span></div><div class="line">    <span class="keyword">print</span>(<span class="string">'Total comments number is '</span>+ str(<span class="built_in">max</span>))</div><div class="line">    <span class="keyword">if</span> <span class="built_in">max</span> &gt; <span class="number">5020</span>:</div><div class="line">        get_comments = <span class="number">5020</span></div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        get_comments = <span class="built_in">max</span></div><div class="line">    </div><div class="line">    comments = &#123;</div><div class="line">    <span class="string">'goods_id'</span>: goods_id,</div><div class="line">    <span class="string">'p_link'</span>: link,</div><div class="line">    <span class="string">'显示评论数'</span>: <span class="built_in">max</span>,</div><div class="line">    <span class="string">'实际获得评论'</span>: get_comments</div><div class="line">    &#125;</div><div class="line">    save_to_mongo(comments)</div><div class="line">    </div><div class="line">    # <span class="keyword">while</span> <span class="built_in">count</span> &lt; <span class="built_in">max</span>:</div><div class="line">    #     <span class="keyword">try</span>:</div><div class="line">    #             <span class="keyword">res</span> = requests.<span class="built_in">get</span>(url[:-<span class="number">1</span>]+str(page))</div><div class="line">    #             page = page + <span class="number">1</span></div><div class="line">    #             jc = json.loads(<span class="keyword">res</span>.text.strip().strip(<span class="string">'()'</span>))</div><div class="line">    #             jc = jc[<span class="string">'comments'</span>]</div><div class="line">    #             <span class="keyword">for</span> <span class="keyword">j</span> in jc:</div><div class="line">    #                     users.<span class="keyword">append</span>(<span class="keyword">j</span>[<span class="string">'user'</span>][<span class="string">'nick'</span>])</div><div class="line">    #                     comments.<span class="keyword">append</span>(<span class="keyword">j</span>[<span class="string">'content'</span>])</div><div class="line">    #                     comments_date.<span class="keyword">append</span>(<span class="keyword">j</span>[<span class="string">'date'</span>])</div><div class="line">    #                     # <span class="keyword">print</span>(<span class="built_in">count</span>+<span class="number">1</span>,<span class="string">'&gt;&gt;'</span>,users[<span class="built_in">count</span>],<span class="string">'\n        '</span>,comments[<span class="built_in">count</span>])</div><div class="line">    #                     <span class="built_in">count</span> = <span class="built_in">count</span> + <span class="number">1</span></div><div class="line">    #             <span class="keyword">print</span>(<span class="built_in">count</span>)</div><div class="line">    #     except Exception <span class="keyword">as</span> <span class="keyword">e</span>:</div><div class="line">    #             <span class="keyword">break</span></div><div class="line">    # <span class="keyword">print</span>(<span class="string">'Get '</span> + str(<span class="built_in">len</span>(comments)) + <span class="string">' comments'</span>)</div><div class="line">    # rows = zip(users, comments, comments_date)</div><div class="line">    # <span class="keyword">f</span> = <span class="keyword">open</span>(<span class="string">'comments/e-cigar-&#123;0&#125;.csv'</span>.format(goods_id),<span class="string">'w'</span>)</div><div class="line">    # writer = csv.writer(<span class="keyword">f</span>)</div><div class="line">    # <span class="keyword">for</span> row in row<span class="variable">s:</span></div><div class="line">    #     writer.writerow(row)</div><div class="line">    # <span class="keyword">f</span>.<span class="keyword">close</span>()</div></pre></td></tr></table></figure></p>
<h1 id="店铺信息（动态评分）"><a href="#店铺信息（动态评分）" class="headerlink" title="店铺信息（动态评分）"></a>店铺信息（动态评分）</h1><p>这部分完全是自己探索出来的了，但是受到了“评论”部分ajax的启发，找到了存储店铺动态评分的链接，也是通过打开Developer Tools，点击Network，再刷新，找到了存储地址。</p>
<p>代码：<br><figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div></pre></td><td class="code"><pre><div class="line">import pymongo</div><div class="line">from pyquery import PyQuery as pq</div><div class="line">import requests</div><div class="line">import json</div><div class="line">import pandas as pd</div><div class="line">import csv</div><div class="line">import re</div><div class="line"></div><div class="line"></div><div class="line">MONGO_URL = <span class="string">'mongodb://localhost:27017/'</span></div><div class="line">MONGO_DB = <span class="string">'taobao'</span></div><div class="line">MONGO_COLLECTION = <span class="string">'shop-data0727'</span></div><div class="line"><span class="comment"># MONGO_COLLECTION = 'shop_high0727'</span></div><div class="line">client = pymongo.MongoClient(MONGO_URL)</div><div class="line">db = client[MONGO_DB]</div><div class="line"></div><div class="line">def save_to_mongo(result):</div><div class="line">    <span class="string">""</span><span class="string">"</span></div><div class="line">    保存至MongoDB</div><div class="line">    :param result: 结果</div><div class="line">    "<span class="string">""</span></div><div class="line">    try:</div><div class="line">        <span class="keyword">if</span> db[MONGO_COLLECTION].insert(result):</div><div class="line">            <span class="keyword">print</span>(<span class="string">'存储到MongoDB成功'</span>)</div><div class="line">    except Exception:</div><div class="line">        <span class="keyword">print</span>(<span class="string">'存储到MongoDB失败'</span>)</div><div class="line">        </div><div class="line">df1 = pd.read_json(<span class="string">'e-cigar-high.json'</span>)</div><div class="line">df2 = pd.read_json(<span class="string">'e-cigar-low.json'</span>)</div><div class="line">df = df1.append(df2)</div><div class="line">shop_link = df[<span class="string">'s_link'</span>].value_counts().index.tolist()</div><div class="line"><span class="keyword">print</span>(<span class="string">'共有&#123;&#125;家店'</span>.format(len(shop_link)))</div><div class="line">c = <span class="number">0</span></div><div class="line"><span class="keyword">for</span> <span class="keyword">link</span> in shop_link:</div><div class="line">	c += <span class="number">1</span></div><div class="line">	shop_id = <span class="keyword">link</span>[link.find(<span class="string">'id='</span>)+<span class="number">3</span>:]</div><div class="line">	<span class="keyword">print</span>(<span class="string">'查找第&#123;&#125;号店铺'</span>.format(c))</div><div class="line">	url = <span class="string">'https://hdc1.alicdn.com/asyn.htm?userId='</span>+shop_id</div><div class="line">	res = requests.get(url).text</div><div class="line">	ch2del = (<span class="string">'\\r\\n'</span>,<span class="string">'\r\n'</span>,<span class="string">'\\'</span>,<span class="string">'\t'</span>,<span class="string">'\n'</span>)</div><div class="line">	<span class="keyword">for</span> ch in ch2del:</div><div class="line">		res = res.replace(ch,<span class="string">''</span>)</div><div class="line">	doc = p<span class="string">q(res)</span></div><div class="line">	item2 = doc(<span class="string">'.locus'</span>).text().<span class="keyword">split</span>(<span class="string">'：'</span>)[<span class="number">1</span>].strip()</div><div class="line">	item3 = doc(<span class="string">'.shop-rate li em'</span>).e<span class="string">q(0)</span>.text()</div><div class="line">	item4 = doc(<span class="string">'.shop-rate li em'</span>).e<span class="string">q(1)</span>.text()</div><div class="line">	<span class="keyword">if</span> doc(<span class="string">'.shop-rate li'</span>).e<span class="string">q(0)</span>.find(<span class="string">'.lower'</span>) != []:</div><div class="line">		item4 = <span class="string">'-'</span>+item4</div><div class="line">	elif doc(<span class="string">'.shop-rate li'</span>).e<span class="string">q(0)</span>.find(<span class="string">'.fair'</span>) != []:</div><div class="line">		item4 = <span class="number">0</span></div><div class="line">	<span class="keyword">else</span>:</div><div class="line">		item4 = <span class="string">'+'</span>+item4</div><div class="line">	item5 = doc(<span class="string">'.shop-rate li em'</span>).e<span class="string">q(2)</span>.text()</div><div class="line">	item6 = doc(<span class="string">'.shop-rate li em'</span>).e<span class="string">q(3)</span>.text()</div><div class="line">	<span class="keyword">if</span> doc(<span class="string">'.shop-rate li'</span>).e<span class="string">q(1)</span>.find(<span class="string">'.lower'</span>) != []:</div><div class="line">		item6 = <span class="string">'-'</span>+item6</div><div class="line">	elif doc(<span class="string">'.shop-rate li'</span>).e<span class="string">q(1)</span>.find(<span class="string">'.fair'</span>) != []:</div><div class="line">		item6 = <span class="number">0</span></div><div class="line">	<span class="keyword">else</span>:</div><div class="line">		item6 = <span class="string">'+'</span>+item6</div><div class="line">	item7 = doc(<span class="string">'.shop-rate li em'</span>).e<span class="string">q(4)</span>.text()</div><div class="line">	item8 = doc(<span class="string">'.shop-rate li em'</span>).e<span class="string">q(5)</span>.text()</div><div class="line">	<span class="keyword">if</span> doc(<span class="string">'.shop-rate li'</span>).e<span class="string">q(2)</span>.find(<span class="string">'.lower'</span>) != []:</div><div class="line">		item8 = <span class="string">'-'</span>+item8</div><div class="line">	elif doc(<span class="string">'.shop-rate li'</span>).e<span class="string">q(2)</span>.find(<span class="string">'.fair'</span>) != []:</div><div class="line">		item8 = <span class="number">0</span></div><div class="line">	<span class="keyword">else</span>:</div><div class="line">		item8 = <span class="string">'+'</span>+item8</div><div class="line">	shop = &#123;</div><div class="line">	<span class="string">'shop_id'</span>: shop_id,</div><div class="line">	<span class="string">'s_link'</span>: <span class="keyword">link</span>,</div><div class="line">	<span class="string">'店铺位置'</span>:item2,</div><div class="line">	<span class="string">'描述评分'</span>:item3,</div><div class="line">	<span class="string">'描述百分比'</span>:item4,</div><div class="line">	<span class="string">'服务评分'</span>:item5,</div><div class="line">	<span class="string">'服务百分比'</span>:item6,</div><div class="line">	<span class="string">'物流评分'</span>:item7,</div><div class="line">	<span class="string">'物流百分比'</span>:item8</div><div class="line">	&#125;</div><div class="line">	save_to_mongo(shop)</div></pre></td></tr></table></figure></p>
<p>有点遗憾的是，本来还想抓取开店时间，“天猫X年店铺”这种，但是一直没找到数据接口，只能放弃……</p>
<h1 id="商品评论词云"><a href="#商品评论词云" class="headerlink" title="商品评论词云"></a>商品评论词云</h1><p>这部分说的是天猫提供的词云，不是我对抓取评论进行分析的，在页面上大概长这样：<br><img src="https://ws2.sinaimg.cn/large/006tNbRwgy1fum2bn84xrj30mh05y755.jpg" alt=""><br>也是找到了一个数据接口，然后爬起来就很容易了……</p>
<p>代码：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> pymongo</div><div class="line"><span class="keyword">from</span> pyquery <span class="keyword">import</span> PyQuery <span class="keyword">as</span> pq</div><div class="line"><span class="keyword">import</span> requests</div><div class="line"><span class="keyword">import</span> json</div><div class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div><div class="line"><span class="keyword">import</span> csv</div><div class="line"><span class="keyword">import</span> re</div><div class="line"></div><div class="line"></div><div class="line">MONGO_URL = <span class="string">'mongodb://localhost:27017/'</span></div><div class="line">MONGO_DB = <span class="string">'taobao'</span></div><div class="line">MONGO_COLLECTION = <span class="string">'comm_cloud0727'</span></div><div class="line">client = pymongo.MongoClient(MONGO_URL)</div><div class="line">db = client[MONGO_DB]</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">save_to_mongo</span><span class="params">(result)</span>:</span></div><div class="line">    <span class="string">"""</span></div><div class="line">    保存至MongoDB</div><div class="line">    :param result: 结果</div><div class="line">    """</div><div class="line">    <span class="keyword">try</span>:</div><div class="line">        <span class="keyword">if</span> db[MONGO_COLLECTION].insert(result):</div><div class="line">            print(<span class="string">'存储到MongoDB成功'</span>)</div><div class="line">    <span class="keyword">except</span> Exception:</div><div class="line">        print(<span class="string">'存储到MongoDB失败'</span>)</div><div class="line">        </div><div class="line">df1 = pd.read_json(<span class="string">'e-cigar-high.json'</span>)</div><div class="line">df2 = pd.read_json(<span class="string">'e-cigar-low.json'</span>)</div><div class="line">df = df1.append(df2)</div><div class="line">c = <span class="number">0</span></div><div class="line"><span class="keyword">for</span> link <span class="keyword">in</span> df[<span class="string">'p_link'</span>]:</div><div class="line">	c += <span class="number">1</span></div><div class="line">	print(<span class="string">'开始查找第&#123;&#125;件商品'</span>.format(c))</div><div class="line">	start = link.find(<span class="string">'id='</span>)+<span class="number">3</span></div><div class="line">	end = link.find(<span class="string">'&amp;ns='</span>)</div><div class="line">	goods_id = link[start:end]</div><div class="line">	url1 = <span class="string">'https://rate.tmall.com/listTagClouds.htm?itemId='</span>+goods_id</div><div class="line">	res1 = requests.get(url1).text</div><div class="line">	wcloud = re.findall(<span class="string">'&#123;"count":(.*?),"id":".*?","posi":.*?,"tag":"(.*?)","weight":.*?'</span>,res1)</div><div class="line"></div><div class="line">	wordcloud = &#123;</div><div class="line">	<span class="string">'goods_id'</span>: goods_id,</div><div class="line">	<span class="string">'p_link'</span>: link,</div><div class="line">	<span class="string">'评论词云'</span>:wcloud,</div><div class="line">	&#125;</div><div class="line">	save_to_mongo(wordcloud)</div></pre></td></tr></table></figure></p>
<h1 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h1><p>最后，所有代码传到了<a href="https://github.com/Yibeichan/TaobaoDataMing" target="_blank" rel="external">我的GitHub</a>上。目前我还要对抓取的评论进行分词分析，以及还想探索一下手机客户端的淘宝内容抓取，尤其是“大家在问什么”，这部分数据感觉很有价值。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;最近在做一个关于“电子烟”的研究，需要爬取淘宝数据，探索了一下，还有点小收获。&lt;/p&gt;
&lt;p&gt;话说真是三天不写就手生，每次都要google一下hexo如何增加新文章……&lt;br&gt;
    
    </summary>
    
    
      <category term="Python" scheme="http://yibeichen.me/tags/Python/"/>
    
      <category term="Taobao" scheme="http://yibeichen.me/tags/Taobao/"/>
    
  </entry>
  
  <entry>
    <title>Natural Language Processing 101</title>
    <link href="http://yibeichen.me/2018/04/07/Natural-Language-Processing-101/"/>
    <id>http://yibeichen.me/2018/04/07/Natural-Language-Processing-101/</id>
    <published>2018-04-07T13:46:26.000Z</published>
    <updated>2018-04-08T03:02:19.639Z</updated>
    
    <content type="html"><![CDATA[<p>学完了，入门了吗？不知道。<br><a id="more"></a><br><em>2018-03-17</em></p>
<h1 id="Natural-Language-Processing-Fundamentals-in-Python"><a href="#Natural-Language-Processing-Fundamentals-in-Python" class="headerlink" title="Natural Language Processing Fundamentals in Python"></a>Natural Language Processing Fundamentals in Python</h1><h2 id="Regular-expressions-amp-word-tokenization"><a href="#Regular-expressions-amp-word-tokenization" class="headerlink" title="Regular expressions &amp; word tokenization"></a>Regular expressions &amp; word tokenization</h2><h3 id="Regular-expression"><a href="#Regular-expression" class="headerlink" title="Regular expression"></a>Regular expression</h3><p>re 模块</p>
<ul>
<li>split</li>
<li>findall</li>
<li>search</li>
<li>match<br>pattern first, and the string second 这句话啥意思？<br>may return an iterator, strig, or match object<br>说那么多有什么用？来写一句啊。根据结尾标点符号来分的，真是没想到要这么写，我写成了<code>r&quot;[.?!]\s*&quot;</code>其实也运行出结果了呀。<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Import the regex module</span></div><div class="line"><span class="keyword">import</span> re</div><div class="line"></div><div class="line"><span class="comment"># Write a pattern to match sentence endings: sentence_endings</span></div><div class="line">sentence_endings = <span class="string">r"[.?!]"</span></div><div class="line"></div><div class="line"><span class="comment"># Split my_string on sentence endings and print the result</span></div><div class="line">print(re.split(sentence_endings, my_string))</div><div class="line"></div><div class="line"><span class="comment"># Find all capitalized words in my_string and print the result</span></div><div class="line">capitalized_words = <span class="string">r"[A-Z]\w+"</span></div><div class="line">print(re.findall(capitalized_words, my_string))</div><div class="line"></div><div class="line"><span class="comment"># Split my_string on spaces and print the result</span></div><div class="line">spaces = <span class="string">r"\s+"</span></div><div class="line">print(re.split(spaces, my_string))</div><div class="line"></div><div class="line"><span class="comment"># Find all digits in my_string and print the result</span></div><div class="line">digits = <span class="string">r"\d+"</span></div><div class="line">print(re.findall(digits, my_string))</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="Tokenization"><a href="#Tokenization" class="headerlink" title="Tokenization"></a>Tokenization</h3><p>turning a string or document into tokens(smaller chunks)，也是通过正则表达式来完成的。<br>nltk里的一些常用tokenizers：</p>
<ul>
<li>sent_tokenize</li>
<li>regexp_tokenize</li>
<li>TweetTokenizer —— 专为tweet定做的，可以separate hashtags，mentions and lots of exclamation points<br><code>re.match()</code>和<code>re.search()</code>的区别，match只找开头，search找整个句子<br>来试一下word tokenization<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Import necessary modules</span></div><div class="line"><span class="built_in">from</span> nltk.tokenize import sent_tokenize</div><div class="line"><span class="built_in">from</span> nltk.tokenize import word_tokenize</div><div class="line"></div><div class="line"><span class="comment"># Split scene_one into sentences: sentences</span></div><div class="line"><span class="keyword">sentences</span> = sent_tokenize(scene_one)</div><div class="line"></div><div class="line"><span class="comment"># Use word_tokenize to tokenize the fourth sentence: tokenized_sent</span></div><div class="line">tokenized_sent = word_tokenize(<span class="keyword">sentences</span>[<span class="number">3</span>])</div><div class="line"></div><div class="line"><span class="comment"># Make a set of unique tokens in the entire scene: unique_tokens</span></div><div class="line">unique_tokens = <span class="built_in">set</span>(word_tokenize(scene_one))</div><div class="line"></div><div class="line"><span class="comment"># Print the unique tokens result</span></div><div class="line">print(unique_tokens)</div></pre></td></tr></table></figure>
</li>
</ul>
<p>正则这种东西真是要多练啊，最后那个找notation的，标准答案是<code>r&quot;[\w\s]+:&quot;</code> 我写的是<code>r&quot;[A-Z]*:&quot;</code>，可是这两个结果是一样的啊。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Search for the first occurrence of "coconuts" in scene_one: match</span></div><div class="line">match = re.search(<span class="string">"coconuts"</span>, scene_one)</div><div class="line"></div><div class="line"><span class="comment"># Print the start and end indexes of match</span></div><div class="line">print(match.start(), match.end())</div><div class="line"></div><div class="line"><span class="comment"># Write a regular expression to search for anything in square brackets: pattern1</span></div><div class="line">pattern1 = <span class="string">r"\[.*\]"</span></div><div class="line"></div><div class="line"><span class="comment"># Use re.search to find the first text in square brackets</span></div><div class="line">print(re.search(pattern1, scene_one))</div><div class="line"></div><div class="line"><span class="comment"># Find the script notation at the beginning of the fourth sentence and print it</span></div><div class="line">pattern2 = <span class="string">r"[\w\s]+:"</span></div><div class="line">print(re.match(pattern2, sentences[<span class="number">3</span>]))</div></pre></td></tr></table></figure></p>
<h3 id="Advanced-tokenization-with-NLTK-and-regex"><a href="#Advanced-tokenization-with-NLTK-and-regex" class="headerlink" title="Advanced tokenization with NLTK and regex"></a>Advanced tokenization with NLTK and regex</h3><p>所以这一次是练习<code>()</code>的使用吗？加和不加有什么区别我在<a href="https://regex101.com/" target="_blank" rel="external">regex101</a>测试的时候发现，加了括号就会变成绿色的group，话说加不加转义符都无所谓吗？<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Import the necessary modules</span></div><div class="line"><span class="keyword">from</span> nltk.tokenize <span class="keyword">import</span> regexp_tokenize</div><div class="line"><span class="keyword">from</span> nltk.tokenize <span class="keyword">import</span> TweetTokenizer</div><div class="line"></div><div class="line"><span class="comment"># Define a regex pattern to find hashtags: pattern1</span></div><div class="line">pattern1 = <span class="string">r"#\w+"</span></div><div class="line"></div><div class="line"><span class="comment"># Use the pattern on the first tweet in the tweets list</span></div><div class="line">regexp_tokenize(tweets[<span class="number">0</span>], pattern1)</div><div class="line"></div><div class="line"><span class="comment"># Write a pattern that matches both mentions and hashtags</span></div><div class="line">pattern2 = <span class="string">r"([#|@]\w+)"</span></div><div class="line"></div><div class="line"><span class="comment"># Use the pattern on the last tweet in the tweets list</span></div><div class="line">regexp_tokenize(tweets[<span class="number">-1</span>], pattern2)</div><div class="line"></div><div class="line"><span class="comment"># Use the TweetTokenizer to tokenize all tweets into one list</span></div><div class="line">tknzr = TweetTokenizer()</div><div class="line">all_tokens = [tknzr.tokenize(t) <span class="keyword">for</span> t <span class="keyword">in</span> tweets]</div><div class="line">print(all_tokens)</div></pre></td></tr></table></figure></p>
<h4 id="Non-ascii-tokenization"><a href="#Non-ascii-tokenization" class="headerlink" title="Non-ascii tokenization"></a>Non-ascii tokenization</h4><p>这里面唯一要注意的就是大写的德语单词怎么把它找出来<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Tokenize and print all words in german_text</span></div><div class="line">all_words = word_tokenize(german_text)</div><div class="line">print(all_words)</div><div class="line"></div><div class="line"><span class="comment"># Tokenize and print only capital words</span></div><div class="line">capital_words = <span class="string">r"[A-ZÜ]\w+"</span></div><div class="line">print(regexp_tokenize(german_text, capital_words))</div><div class="line"></div><div class="line"><span class="comment"># Tokenize and print only emoji</span></div><div class="line">emoji = <span class="string">"['\U0001F300-\U0001F5FF'|'\U0001F600-\U0001F64F'|'\U0001F680-\U0001F6FF'|'\u2600-\u26FF\u2700-\u27BF']"</span></div><div class="line">print(regexp_tokenize(german_text, emoji))</div></pre></td></tr></table></figure></p>
<h3 id="Charting-word-length-with-NLTK"><a href="#Charting-word-length-with-NLTK" class="headerlink" title="Charting word length with NLTK"></a>Charting word length with NLTK</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Split the script into lines: lines</span></div><div class="line">lines = holy_grail.split(<span class="string">'\n'</span>)</div><div class="line"></div><div class="line"><span class="comment"># Replace all script lines for speaker</span></div><div class="line">pattern = <span class="string">"[A-Z]&#123;2,&#125;(\s)?(#\d)?([A-Z]&#123;2,&#125;)?:"</span></div><div class="line">lines = [re.sub(pattern, <span class="string">''</span>, l) <span class="keyword">for</span> l <span class="keyword">in</span> lines]</div><div class="line"></div><div class="line"><span class="comment"># Tokenize each line: tokenized_lines</span></div><div class="line">tokenized_lines = [regexp_tokenize(s,<span class="string">r"\w+"</span>) <span class="keyword">for</span> s <span class="keyword">in</span> lines]</div><div class="line"></div><div class="line"><span class="comment"># Make a frequency list of lengths: line_num_words</span></div><div class="line">line_num_words = [len(t_line) <span class="keyword">for</span> t_line <span class="keyword">in</span> tokenized_lines]</div><div class="line"></div><div class="line"><span class="comment"># Plot a histogram of the line lengths</span></div><div class="line">plt.hist(line_num_words)</div><div class="line"></div><div class="line"><span class="comment"># Show the plot</span></div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<p><em>2018-03-23</em></p>
<h2 id="Simple-topic-identification"><a href="#Simple-topic-identification" class="headerlink" title="Simple topic identification"></a>Simple topic identification</h2><p>第一个视频坏掉了……给网站保修了好几天也没修好，哼</p>
<h3 id="Building-a-Counter-with-bag-of-words"><a href="#Building-a-Counter-with-bag-of-words" class="headerlink" title="Building a Counter with bag-of-words"></a>Building a Counter with bag-of-words</h3><figure class="highlight livescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Import Counter</span></div><div class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</div><div class="line"></div><div class="line"><span class="comment"># Tokenize the article: tokens</span></div><div class="line">tokens = word_tokenize(article)</div><div class="line"></div><div class="line"><span class="comment"># Convert the tokens into lowercase: lower_tokens</span></div><div class="line">lower_tokens = [t.lower() <span class="keyword">for</span> t <span class="keyword">in</span> tokens]</div><div class="line"></div><div class="line"><span class="comment"># Create a Counter with the lowercase tokens: bow_simple</span></div><div class="line">bow_simple = Counter(lower_tokens)</div><div class="line"></div><div class="line"><span class="comment"># Print the 10 most common tokens</span></div><div class="line"><span class="built_in">print</span>(bow_simple.most_common(<span class="number">10</span>))</div></pre></td></tr></table></figure>
<h2 id="Simple-text-preprocessing"><a href="#Simple-text-preprocessing" class="headerlink" title="Simple text preprocessing"></a>Simple text preprocessing</h2><p>什么鬼……第二个视频也坏了！只能看ppt了……<br>预处理几步走：</p>
<ul>
<li>lemmatization/stemming</li>
<li>removing stop words, punctuation, or unwanted tokens</li>
<li>good to experiment with different approaches</li>
</ul>
<p>在<code>Instantiate</code>这里被卡了个半死，什么叫Instantiate啊……<br>然后是<code>Create the bag-of-words</code>，这里不用token words了吗？<br><figure class="highlight livescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Import WordNetLemmatizer</span></div><div class="line"><span class="keyword">from</span> nltk.stem <span class="keyword">import</span> WordNetLemmatizer</div><div class="line"></div><div class="line"><span class="comment"># Retain alphabetic words: alpha_only</span></div><div class="line">alpha_only = [t <span class="keyword">for</span> t <span class="keyword">in</span> lower_tokens <span class="keyword">if</span> t.isalpha()]</div><div class="line"></div><div class="line"><span class="comment"># Remove all stop words: no_stops</span></div><div class="line">no_stops = [t <span class="keyword">for</span> t <span class="keyword">in</span> alpha_only <span class="keyword">if</span> t <span class="keyword">not</span> <span class="keyword">in</span> english_stops]</div><div class="line"></div><div class="line"><span class="comment"># Instantiate the WordNetLemmatizer</span></div><div class="line">wordnet_lemmatizer = WordNetLemmatizer()</div><div class="line"></div><div class="line"><span class="comment"># Lemmatize all tokens into a new list: lemmatized</span></div><div class="line">lemmatized = [wordnet_lemmatizer.lemmatize(t) <span class="keyword">for</span> t <span class="keyword">in</span> no_stops]</div><div class="line"></div><div class="line"><span class="comment"># Create the bag-of-words: bow</span></div><div class="line">bow = Counter(lemmatized)</div><div class="line"></div><div class="line"><span class="comment"># Print the 10 most common tokens</span></div><div class="line"><span class="built_in">print</span>(bow.most_common(<span class="number">10</span>))</div></pre></td></tr></table></figure></p>
<h2 id="Gensim"><a href="#Gensim" class="headerlink" title="Gensim"></a>Gensim</h2><p>我看出来了，这节课所有的视频都不行……<br>word vector是什么？听名字就感觉是multi-dimensional</p>
<h3 id="Creating-and-querying-a-corpus-with-gensim"><a href="#Creating-and-querying-a-corpus-with-gensim" class="headerlink" title="Creating and querying a corpus with gensim"></a>Creating and querying a corpus with gensim</h3><p>不知道这段是怎么误打误撞写完的……<br><figure class="highlight livescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Import Dictionary</span></div><div class="line"><span class="keyword">from</span> gensim.corpora.dictionary <span class="keyword">import</span> Dictionary</div><div class="line"></div><div class="line"><span class="comment"># Create a Dictionary from the articles: dictionary</span></div><div class="line">dictionary = Dictionary(articles)</div><div class="line"></div><div class="line"><span class="comment"># Select the id for "computer": computer_id</span></div><div class="line">computer_id = dictionary.token2id.get(<span class="string">"computer"</span>)</div><div class="line"></div><div class="line"><span class="comment"># Use computer_id with the dictionary to print the word</span></div><div class="line"><span class="built_in">print</span>(dictionary.get(computer_id))</div><div class="line"></div><div class="line"><span class="comment"># Create a MmCorpus: corpus</span></div><div class="line">corpus = [dictionary.doc2bow(article) <span class="keyword">for</span> article <span class="keyword">in</span> articles]</div><div class="line"></div><div class="line"><span class="comment"># Print the first 10 word ids with their frequency counts from the fifth document</span></div><div class="line"><span class="built_in">print</span>(corpus[<span class="number">4</span>][:<span class="number">10</span>])</div></pre></td></tr></table></figure></p>
<h3 id="Gensim-bag-of-words"><a href="#Gensim-bag-of-words" class="headerlink" title="Gensim bag-of-words"></a>Gensim bag-of-words</h3><p><code>total_word_count = defaultdict(int)</code>终于看到了这个，<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Save the fifth document: doc</span></div><div class="line">doc = corpus[<span class="number">4</span>]</div><div class="line"></div><div class="line"><span class="comment"># Sort the doc for frequency: bow_doc</span></div><div class="line">bow_doc = sorted(doc, key=<span class="keyword">lambda</span> w: w[<span class="number">1</span>], reverse=<span class="keyword">True</span>)</div><div class="line"></div><div class="line"><span class="comment"># Print the top 5 words of the document alongside the count</span></div><div class="line"><span class="keyword">for</span> word_id, word_count <span class="keyword">in</span> bow_doc[:<span class="number">5</span>]:</div><div class="line">    print(dictionary.get(word_id), word_count)</div><div class="line">    </div><div class="line"><span class="comment"># Create the defaultdict: total_word_count</span></div><div class="line">total_word_count = defaultdict(int)</div><div class="line"><span class="keyword">for</span> word_id, word_count <span class="keyword">in</span> itertools.chain.from_iterable(corpus):</div><div class="line">    total_word_count[word_id] += word_count</div><div class="line"></div><div class="line"><span class="comment"># Create a sorted list from the defaultdict: sorted_word_count</span></div><div class="line">sorted_word_count = sorted(total_word_count.items(), key=<span class="keyword">lambda</span> w: w[<span class="number">1</span>], reverse=<span class="keyword">True</span>) </div><div class="line"></div><div class="line"><span class="comment"># Print the top 5 words across all documents alongside the count</span></div><div class="line"><span class="keyword">for</span> word_id, word_count <span class="keyword">in</span> sorted_word_count[:<span class="number">5</span>]:</div><div class="line">    print(dictionary.get(word_count), word_count)</div></pre></td></tr></table></figure></p>
<h3 id="Tf-idf-with-gensim"><a href="#Tf-idf-with-gensim" class="headerlink" title="Tf-idf with gensim"></a>Tf-idf with gensim</h3><p>Tf-idf是什么<br>简单说就是找到最重要的词吧<br>最重要的词不是出现次数最多的<br>计算公式长这样<br><img src="http://oapfne1kf.bkt.clouddn.com/2018-03-23-105851.png" alt=""><br>讲真我算了半天……</p>
<h4 id="Tf-idf-with-Wikipedia"><a href="#Tf-idf-with-Wikipedia" class="headerlink" title="Tf-idf with Wikipedia"></a>Tf-idf with Wikipedia</h4><p>其实我不知道这个在算什么……<br>应该是先用corpus建立一个模型tfidf，这个模型就可以用来计算Tf-idf weights了<br>每次都很喜欢这个网站写的<code>lambda</code>和list comprehension了<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Import TfidfModel</span></div><div class="line"><span class="keyword">from</span> gensim.models.tfidfmodel <span class="keyword">import</span> TfidfModel</div><div class="line"></div><div class="line"><span class="comment"># Create a new TfidfModel using the corpus: tfidf</span></div><div class="line">tfidf = TfidfModel(corpus)</div><div class="line"></div><div class="line"><span class="comment"># Calculate the tfidf weights of doc: tfidf_weights</span></div><div class="line">tfidf_weights = tfidf[doc]</div><div class="line"></div><div class="line"><span class="comment"># Print the first five weights</span></div><div class="line">print(tfidf_weights[:<span class="number">5</span>])</div><div class="line"></div><div class="line"><span class="comment"># Sort the weights from highest to lowest: sorted_tfidf_weights</span></div><div class="line">sorted_tfidf_weights = sorted(tfidf_weights, key=<span class="keyword">lambda</span> w: w[<span class="number">1</span>], reverse=<span class="keyword">True</span>)</div><div class="line"></div><div class="line"><span class="comment"># Print the top 5 weighted words</span></div><div class="line"><span class="keyword">for</span> term_id, weight <span class="keyword">in</span> sorted_tfidf_weights[:<span class="number">5</span>]:</div><div class="line">    print(dictionary.get(term_id), weight)</div></pre></td></tr></table></figure></p>
<p><em>2018-04-03</em></p>
<h2 id="Named-entity-recognition"><a href="#Named-entity-recognition" class="headerlink" title="Named-entity recognition"></a>Named-entity recognition</h2><p>我的理解就是，在一段话中，把人名、地名、组织名等标记出来，可以迅速了解这段话讲了什么内容。当然你标记的东西取决于你用什么library。<br>nltk用的是Stanford CoreNLP Library</p>
<h3 id="NER-with-NLTK"><a href="#NER-with-NLTK" class="headerlink" title="NER with NLTK"></a>NER with NLTK</h3><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Tokenize the article into sentences: sentences</span></div><div class="line"><span class="keyword">sentences</span> = nltk.sent_tokenize(article)</div><div class="line"></div><div class="line"><span class="comment"># Tokenize each sentence into words: token_sentences</span></div><div class="line">token_sentences = [nltk.word_tokenize(sent) <span class="keyword">for</span> sent <span class="keyword">in</span> <span class="keyword">sentences</span>]</div><div class="line"></div><div class="line"><span class="comment"># Tag each tokenized sentence into parts of speech: pos_sentences</span></div><div class="line">pos_sentences = [nltk.pos_tag(sent) <span class="keyword">for</span> sent <span class="keyword">in</span> token_sentences] </div><div class="line"></div><div class="line"><span class="comment"># Create the named entity chunks: chunked_sentences</span></div><div class="line">chunked_sentences = nltk.ne_chunk_sents(pos_sentences, binary = True)</div><div class="line"></div><div class="line"><span class="comment"># Test for stems of the tree with 'NE' tags</span></div><div class="line"><span class="keyword">for</span> sent <span class="keyword">in</span> chunked_sentences:</div><div class="line">    <span class="keyword">for</span> chunk <span class="keyword">in</span> sent:</div><div class="line">        <span class="keyword">if</span> hasattr(chunk, <span class="string">"label"</span>) <span class="keyword">and</span> chunk.label() == <span class="string">"NE"</span>:</div><div class="line">            print(chunk)</div></pre></td></tr></table></figure>
<p>不知道是不是错觉，经过最近的训练，感觉顺手多了。</p>
<h4 id="Charting-Practice"><a href="#Charting-Practice" class="headerlink" title="Charting Practice"></a>Charting Practice</h4><p>刚说完就打脸……这段简直不知在说什么<br>话说<code>defaultdict()</code>看上去好好用啊！比我的<code>Counter</code>要好用多了……难怪当时搜索的时候，似乎看到有人用这个了<br><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Create the defaultdict: ner_categories</span></div><div class="line">ner_categories = defaultdict(int)</div><div class="line"></div><div class="line"><span class="comment"># Create the nested for loop</span></div><div class="line"><span class="keyword">for</span> sent <span class="keyword">in</span> chunked_sentences:</div><div class="line">    <span class="keyword">for</span> chunk <span class="keyword">in</span> sent:</div><div class="line">        <span class="keyword">if</span> hasattr(chunk, <span class="string">'label'</span>):</div><div class="line">            ner_categories[chunk.label()] += <span class="number">1</span></div><div class="line">            </div><div class="line"><span class="comment"># Create a list from the dictionary keys for the chart labels: labels</span></div><div class="line">labels = list(ner_categories.<span class="built_in">keys</span>())</div><div class="line"></div><div class="line"><span class="comment"># Create a list of the values: values</span></div><div class="line">values = [ner_categories.<span class="built_in">get</span>(l) <span class="keyword">for</span> l <span class="keyword">in</span> labels]</div><div class="line"></div><div class="line"><span class="comment"># Create the pie chart</span></div><div class="line">plt.pie(values, labels=labels, autopct=<span class="string">'%1.1f%%'</span>, startangle=<span class="number">140</span>)</div><div class="line"></div><div class="line"><span class="comment"># Display the chart</span></div><div class="line">plt.show()</div></pre></td></tr></table></figure></p>
<h3 id="SpaCy"><a href="#SpaCy" class="headerlink" title="SpaCy"></a>SpaCy</h3><p>另一个library，擅长于creating NLP pipelines to generate models and corpora<br>它比较适合处理非正式的预料库，所以tweets和聊天记录适合用它<br>它跟nltk的区别在于entity的种类有差别</p>
<h4 id="Comparing-NLTK-with-spaCy-NER"><a href="#Comparing-NLTK-with-spaCy-NER" class="headerlink" title="Comparing NLTK with spaCy NER"></a>Comparing NLTK with spaCy NER</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Import spacy</span></div><div class="line"><span class="keyword">import</span> spacy</div><div class="line"></div><div class="line"><span class="comment"># Instantiate the English model: nlp</span></div><div class="line">nlp = spacy.load(<span class="string">'en'</span>, tagger = <span class="keyword">False</span>, parser = <span class="keyword">False</span>, matcher = <span class="keyword">False</span>)</div><div class="line"></div><div class="line"><span class="comment"># Create a new document: doc</span></div><div class="line">doc = nlp(article)</div><div class="line"></div><div class="line"><span class="comment"># Print all of the found entities and their labels</span></div><div class="line"><span class="keyword">for</span> ent <span class="keyword">in</span> doc.ents:</div><div class="line">    print(ent.label_, ent.text)</div></pre></td></tr></table></figure>
<h3 id="Multilingual-NER-with-polyglot"><a href="#Multilingual-NER-with-polyglot" class="headerlink" title="Multilingual NER with polyglot"></a>Multilingual NER with polyglot</h3><p>另一个library，主要用word vectors，它的优势在于，支持超级多的语言！可以用来做translation</p>
<h4 id="French-NER-with-polyglot-I"><a href="#French-NER-with-polyglot-I" class="headerlink" title="French NER with polyglot I"></a>French NER with polyglot I</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Create a new text object using Polyglot's Text class: txt</span></div><div class="line">txt = Text(article)</div><div class="line"></div><div class="line"><span class="comment"># Print each of the entities found</span></div><div class="line"><span class="keyword">for</span> ent <span class="keyword">in</span> txt.entities:</div><div class="line">    <span class="built_in">print</span>(ent)</div><div class="line">    </div><div class="line"><span class="comment"># Print the type of each entity</span></div><div class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(ent))</div></pre></td></tr></table></figure>
<h4 id="French-NER-with-polyglot-II"><a href="#French-NER-with-polyglot-II" class="headerlink" title="French NER with polyglot II"></a>French NER with polyglot II</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Create the list of tuples: entities</span></div><div class="line">entities = [(ent.tag, <span class="string">' '</span>.join(ent)) <span class="keyword">for</span> ent <span class="keyword">in</span> txt.entities]</div><div class="line"></div><div class="line"><span class="comment"># Print the entities</span></div><div class="line"><span class="built_in">print</span>(entities)</div></pre></td></tr></table></figure>
<h4 id="Spanish-NER-with-polyglot"><a href="#Spanish-NER-with-polyglot" class="headerlink" title="Spanish NER with polyglot"></a>Spanish NER with polyglot</h4><p>我一定是脑子进水了，中间那个if判断句我竟然写了个or！！！<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"># Initialize the <span class="built_in">count</span> variable: <span class="built_in">count</span></div><div class="line"><span class="built_in">count</span> = <span class="number">0</span></div><div class="line"></div><div class="line"># Iterate over <span class="keyword">all</span> the entities</div><div class="line"><span class="keyword">for</span> ent in txt.entitie<span class="variable">s:</span></div><div class="line">    # Check whether the entity contains <span class="string">'Márquez'</span> <span class="built_in">or</span> <span class="string">'Gabo'</span></div><div class="line">    <span class="keyword">if</span> <span class="string">"Márquez"</span> in ent <span class="built_in">or</span> <span class="string">"Gabo"</span> in <span class="keyword">en</span><span class="variable">t:</span></div><div class="line">        # Increment <span class="built_in">count</span></div><div class="line">        <span class="built_in">count</span> += <span class="number">1</span></div><div class="line"></div><div class="line"># <span class="keyword">Print</span> <span class="built_in">count</span></div><div class="line"><span class="keyword">print</span>(<span class="built_in">count</span>)</div><div class="line"></div><div class="line"># Calculate the percentage of entities that refer <span class="keyword">to</span> <span class="string">"Gabo"</span>: percentage</div><div class="line">percentage = <span class="built_in">count</span> * <span class="number">1.0</span> / <span class="built_in">len</span>(txt.entities)</div><div class="line"><span class="keyword">print</span>(percentage)</div></pre></td></tr></table></figure></p>
<p><em>2018-04-07</em></p>
<h2 id="Building-a-“fake-news”-classifier"><a href="#Building-a-“fake-news”-classifier" class="headerlink" title="Building a “fake news” classifier"></a>Building a “fake news” classifier</h2><h3 id="Classifying-fake-news-using-supervised-learning-with-NLP"><a href="#Classifying-fake-news-using-supervised-learning-with-NLP" class="headerlink" title="Classifying fake news using supervised learning with NLP"></a>Classifying fake news using supervised learning with NLP</h3><p>监督学习 scikit-learn是个很不错的开源library<br>如何利用文本进行监督学习</p>
<ul>
<li>bag-of-words models</li>
<li>tf-idf as features</li>
</ul>
<p>拿IMDb作为例子</p>
<ul>
<li>手机数据</li>
<li>确定以label，比如电影类型</li>
<li>将数据分为training和test两个集合，分开（最核心的部分）</li>
<li>从文本中获取特征来预测这个label——比如说scikit-learn里面的bag-of-words vector</li>
<li>确定来训练模型后就可以使用test set<h3 id="Building-word-count-vectors-with-scikit-learn"><a href="#Building-word-count-vectors-with-scikit-learn" class="headerlink" title="Building word count vectors with scikit-learn"></a>Building word count vectors with scikit-learn</h3><h4 id="CountVectorizer-for-text-classification"><a href="#CountVectorizer-for-text-classification" class="headerlink" title="CountVectorizer for text classification"></a>CountVectorizer for text classification</h4>最后一行真的是死活都想不出要怎么写…… 好困好困（默默吐槽一下，有好多杂事要做，一分钟都不想做）<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Import the necessary modules</span></div><div class="line">from sklearn.feature_extraction.text import CountVectorizer</div><div class="line">from sklearn.model_selection import train_<span class="built_in">test</span>_split</div><div class="line"></div><div class="line"><span class="comment"># Print the head of df</span></div><div class="line"><span class="built_in">print</span>(df.head())</div><div class="line"></div><div class="line"><span class="comment"># Create a series to store the labels: y</span></div><div class="line">y = df.label</div><div class="line"></div><div class="line"><span class="comment"># Create training and test sets</span></div><div class="line">X_train, X_<span class="built_in">test</span>, y_train, y_<span class="built_in">test</span> = train_<span class="built_in">test</span>_split(df[<span class="string">'text'</span>], y, <span class="built_in">test</span>_size=0.33, random_state=53)</div><div class="line"></div><div class="line"><span class="comment"># Initialize a CountVectorizer object: count_vectorizer</span></div><div class="line">count_vectorizer = CountVectorizer(stop_words=<span class="string">'english'</span>)</div><div class="line"></div><div class="line"><span class="comment"># Transform the training data using only the 'text' column values: count_train </span></div><div class="line">count_train = count_vectorizer.fit_transform(X_train)</div><div class="line"></div><div class="line"><span class="comment"># Transform the test data using only the 'text' column values: count_test </span></div><div class="line">count_<span class="built_in">test</span> = count_vectorizer.transform(X_<span class="built_in">test</span>)</div><div class="line"></div><div class="line"><span class="comment"># Print the first 10 features of the count_vectorizer</span></div><div class="line"><span class="built_in">print</span>(count_vectorizer.get_feature_names()[:10])</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="TfidfVectorizer-for-text-classification"><a href="#TfidfVectorizer-for-text-classification" class="headerlink" title="TfidfVectorizer for text classification"></a>TfidfVectorizer for text classification</h4><p>感真，不知道自己在写什么。<br>感觉是数据清洗得对了，符合标准，拿出来分析就会方便很多？（我觉得我说出这种话是因为对算法一无所知）<br><figure class="highlight nix"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Import TfidfVectorizer</span></div><div class="line">from sklearn.feature_extraction.text <span class="built_in">import</span> TfidfVectorizer</div><div class="line"></div><div class="line"><span class="comment"># Initialize a TfidfVectorizer object: tfidf_vectorizer</span></div><div class="line"><span class="attr">tfidf_vectorizer</span> = TfidfVectorizer(<span class="attr">stop_words="english",</span> <span class="attr">max_df=</span> <span class="number">0.7</span>)</div><div class="line"></div><div class="line"><span class="comment"># Transform the training data: tfidf_train </span></div><div class="line"><span class="attr">tfidf_train</span> = tfidf_vectorizer.fit_transform(X_train)</div><div class="line"></div><div class="line"><span class="comment"># Transform the test data: tfidf_test </span></div><div class="line"><span class="attr">tfidf_test</span> = tfidf_vectorizer.transform(X_test)</div><div class="line"></div><div class="line"><span class="comment"># Print the first 10 features</span></div><div class="line">print(tfidf_vectorizer.get_feature_names()[:<span class="number">10</span>])</div><div class="line"></div><div class="line"><span class="comment"># Print the first 5 vectors of the tfidf training data</span></div><div class="line">print(tfidf_train.A[:<span class="number">5</span>])</div></pre></td></tr></table></figure></p>
<h4 id="Inspecting-the-vectors"><a href="#Inspecting-the-vectors" class="headerlink" title="Inspecting the vectors"></a>Inspecting the vectors</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Create the CountVectorizer DataFrame: count_df</span></div><div class="line">count_df = pd.DataFrame(count_train.A, columns=count_vectorizer.get_feature_names())</div><div class="line"></div><div class="line"><span class="comment"># Create the TfidfVectorizer DataFrame: tfidf_df</span></div><div class="line">tfidf_df = pd.DataFrame(tfidf_train.A,columns=tfidf_vectorizer.get_feature_names())</div><div class="line"></div><div class="line"><span class="comment"># Print the head of count_df</span></div><div class="line"><span class="built_in">print</span>(count_df.head())</div><div class="line"></div><div class="line"><span class="comment"># Print the head of tfidf_df</span></div><div class="line"><span class="built_in">print</span>(tfidf_df.head())</div><div class="line"></div><div class="line"><span class="comment"># Calculate the difference in columns: difference</span></div><div class="line">difference = <span class="built_in">set</span>(count_df.columns) - <span class="built_in">set</span>(tfidf_df.columns)</div><div class="line"><span class="built_in">print</span>(difference)</div><div class="line"></div><div class="line"><span class="comment"># Check whether the DataFrames are equal</span></div><div class="line"><span class="built_in">print</span>(count_df.equals(tfidf_df))</div></pre></td></tr></table></figure>
<h3 id="Training-and-testing-a-classification-model-with-scikit-learn"><a href="#Training-and-testing-a-classification-model-with-scikit-learn" class="headerlink" title="Training and testing a classification model with scikit-learn"></a>Training and testing a classification model with scikit-learn</h3><p>Naive Bayes模型，特别想给它取名 天真贝叶斯。这是解决NLP分类最常用的，主要是基于概率</p>
<h4 id="Training-and-testing-the-“fake-news”-model-with-CountVectorizer"><a href="#Training-and-testing-the-“fake-news”-model-with-CountVectorizer" class="headerlink" title="Training and testing the “fake news” model with CountVectorizer"></a>Training and testing the “fake news” model with CountVectorizer</h4><p>大概就是把视频里的东西抄了一遍吧（微笑脸<br><figure class="highlight livescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Import the necessary modules</span></div><div class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> metrics</div><div class="line"><span class="keyword">from</span> sklearn.naive_bayes <span class="keyword">import</span> MultinomialNB</div><div class="line"></div><div class="line"><span class="comment"># Instantiate a Multinomial Naive Bayes classifier: nb_classifier</span></div><div class="line">nb_classifier = MultinomialNB()</div><div class="line"></div><div class="line"><span class="comment"># Fit the classifier to the training data</span></div><div class="line">nb_classifier.fit(count_train,y_train)</div><div class="line"></div><div class="line"><span class="comment"># Create the predicted tags: pred</span></div><div class="line">pred = nb_classifier.predict(count_test)</div><div class="line"></div><div class="line"><span class="comment"># Calculate the accuracy score: score</span></div><div class="line">score = metrics.accuracy_score(y_test,pred)</div><div class="line"><span class="built_in">print</span>(score)</div><div class="line"></div><div class="line"><span class="comment"># Calculate the confusion matrix: cm</span></div><div class="line">cm = metrics.confusion_matrix(y_test,pred,labels=[<span class="string">'FAKE'</span>,<span class="string">'REAL'</span>])</div><div class="line"><span class="built_in">print</span>(cm)</div></pre></td></tr></table></figure></p>
<h4 id="Training-and-testing-the-“fake-news”-model-with-TfidfVectorizer"><a href="#Training-and-testing-the-“fake-news”-model-with-TfidfVectorizer" class="headerlink" title="Training and testing the “fake news” model with TfidfVectorizer"></a>Training and testing the “fake news” model with TfidfVectorizer</h4><p>跟上面的原理都是一模一样了<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Create a Multinomial Naive Bayes classifier: nb_classifier</span></div><div class="line">nb_classifier = MultinomialNB()</div><div class="line"></div><div class="line"><span class="comment"># Fit the classifier to the training data</span></div><div class="line">nb_classifier.fit(tfidf_train,y_train)</div><div class="line"></div><div class="line"><span class="comment"># Create the predicted tags: pred</span></div><div class="line">pred = nb_classifier.predict(tfidf_<span class="built_in">test</span>)</div><div class="line"></div><div class="line"><span class="comment"># Calculate the accuracy score: score</span></div><div class="line">score = metrics.accuracy_score(y_<span class="built_in">test</span>,pred)</div><div class="line"><span class="built_in">print</span>(score)</div><div class="line"></div><div class="line"><span class="comment"># Calculate the confusion matrix: cm</span></div><div class="line">cm = metrics.confusion_matrix(y_<span class="built_in">test</span>,pred,labels=[<span class="string">'FAKE'</span>,<span class="string">'REAL'</span>])</div><div class="line"><span class="built_in">print</span>(cm)</div></pre></td></tr></table></figure></p>
<h3 id="Simple-NLP-complex-problems"><a href="#Simple-NLP-complex-problems" class="headerlink" title="Simple NLP, complex problems"></a>Simple NLP, complex problems</h3><p>使用的场景：translation、sentiment analysis、language biases</p>
<h4 id="Improving-your-model"><a href="#Improving-your-model" class="headerlink" title="Improving your model"></a>Improving your model</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Create the list of alphas: alphas</span></div><div class="line">alphas = np.arange(<span class="number">0</span>,<span class="number">1</span>,<span class="number">0.1</span>)</div><div class="line"></div><div class="line"><span class="comment"># Define train_and_predict()</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">train_and_predict</span><span class="params">(alpha)</span>:</span></div><div class="line">    <span class="comment"># Instantiate the classifier: nb_classifier</span></div><div class="line">    nb_classifier = MultinomialNB(alpha=alpha)</div><div class="line">    <span class="comment"># Fit to the training data</span></div><div class="line">    nb_classifier.fit(tfidf_train,y_train)</div><div class="line">    <span class="comment"># Predict the labels: pred</span></div><div class="line">    pred = nb_classifier.predict(tfidf_test)</div><div class="line">    <span class="comment"># Compute accuracy: score</span></div><div class="line">    score = metrics.accuracy_score(y_test,pred)</div><div class="line">    <span class="keyword">return</span> score</div><div class="line"></div><div class="line"><span class="comment"># Iterate over the alphas and print the corresponding score</span></div><div class="line"><span class="keyword">for</span> alpha <span class="keyword">in</span> alphas:</div><div class="line">    print(<span class="string">'Alpha: '</span>, alpha)</div><div class="line">    print(<span class="string">'Score: '</span>, train_and_predict(alpha))</div><div class="line">    print()</div></pre></td></tr></table></figure>
<h4 id="Inspecting-your-model"><a href="#Inspecting-your-model" class="headerlink" title="Inspecting your model"></a>Inspecting your model</h4><p>知道自己在写什么吗？不知道……<br><figure class="highlight makefile"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Get the class labels: class_labels</span></div><div class="line">class_labels = nb_classifier.classes_</div><div class="line"></div><div class="line"><span class="comment"># Extract the features: feature_names</span></div><div class="line">feature_names = tfidf_vectorizer.get_feature_names()</div><div class="line"></div><div class="line"><span class="comment"># Zip the feature names together with the coefficient array and sort by weights: feat_with_weights</span></div><div class="line">feat_with_weights = sorted(zip(nb_classifier.coef_[0], feature_names))</div><div class="line"></div><div class="line"><span class="comment"># Print the first class label and the top 20 feat_with_weights entries</span></div><div class="line">print(class_labels[0], feat_with_weights[:20])</div><div class="line"></div><div class="line"><span class="comment"># Print the second class label and the bottom 20 feat_with_weights entries</span></div><div class="line">print(class_labels[1], feat_with_weights[-20:])</div></pre></td></tr></table></figure></p>
<p>话说，数据预处理真的是非常重要了。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;学完了，入门了吗？不知道。&lt;br&gt;
    
    </summary>
    
    
      <category term="Python" scheme="http://yibeichen.me/tags/Python/"/>
    
      <category term="NLP" scheme="http://yibeichen.me/tags/NLP/"/>
    
  </entry>
  
  <entry>
    <title>Python 学习笔记</title>
    <link href="http://yibeichen.me/2018/01/08/Data-Scientist-with-Python/"/>
    <id>http://yibeichen.me/2018/01/08/Data-Scientist-with-Python/</id>
    <published>2018-01-08T07:46:27.000Z</published>
    <updated>2018-03-17T14:19:01.993Z</updated>
    
    <content type="html"><![CDATA[<p>又见Python，争取在8月之前熟练Python。日后出去了，也是有技可傍，不至于手足无措。<br>哎，为了可怜的零星的安全感。</p>
<p>这篇纯粹是写给自己看的……</p>
<a id="more"></a>
<p><em>2018-01-08</em></p>
<h1 id="Intermediate-Python-for-Data-Science"><a href="#Intermediate-Python-for-Data-Science" class="headerlink" title="Intermediate Python for Data Science"></a>Intermediate Python for Data Science</h1><h2 id="Loops"><a href="#Loops" class="headerlink" title="Loops"></a>Loops</h2><p><a href="https://campus.datacamp.com/courses/intermediate-python-for-data-science/loops?ex=10" target="_blank" rel="external">Looping data structures, Part1</a></p>
<p>List<br><code>for i in my_list():</code></p>
<p>Dictionary<br><code>for key, val in my_dict.items():</code><br>dict用但是methods, print(key+str(val))</p>
<p>Numpy array<br><code>for val in np.nditer(my_array):</code><br>numpy用的是function, print(str(val))</p>
<p><a href="https://campus.datacamp.com/courses/intermediate-python-for-data-science/loops?ex=13" target="_blank" rel="external">Looping data structure, Part2</a></p>
<p><em>Pandas</em></p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">import pandas <span class="keyword">as</span> pd</div><div class="line">brics = pd.<span class="keyword">read</span>.csv(<span class="string">"brics.csv"</span>, index_col = 0)</div><div class="line"><span class="keyword">for</span> <span class="keyword">lab</span>, row <span class="keyword">in</span> brics.iterrows() :</div><div class="line">	brics.<span class="keyword">loc</span>[<span class="keyword">lab</span>, <span class="string">"name_length"</span>] = len(row[<span class="string">"country"</span>]) # add colum</div><div class="line">	brics[<span class="string">"name_length"</span>] = brics[<span class="string">"country"</span>].apply(len) # apply length funtion <span class="keyword">on</span> <span class="string">"country"</span>——<span class="keyword">more</span> efficient</div><div class="line"><span class="keyword">print</span>(brics)</div></pre></td></tr></table></figure>
<h2 id="Case-Study-Hacker-Statistics"><a href="#Case-Study-Hacker-Statistics" class="headerlink" title="Case Study: Hacker Statistics"></a>Case Study: Hacker Statistics</h2><h3 id="Random-Numbers"><a href="#Random-Numbers" class="headerlink" title="Random Numbers"></a>Random Numbers</h3><p>计算机生成的随机数其实是pseudo-random number，想到doctor who皮卡叔有一集就是讲这个的</p>
<p>roll the dice<br><code>np.random.randint(4,8)</code></p>
<p>来看一个掷骰子爬楼梯的案例</p>
<figure class="highlight maxima"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"># Import numpy <span class="keyword">and</span> set seed</div><div class="line">import numpy as <span class="built_in">np</span></div><div class="line"><span class="built_in">np</span>.<span class="built_in">random</span>.seed(<span class="number">123</span>)</div><div class="line"></div><div class="line"># Starting <span class="keyword">step</span></div><div class="line"><span class="keyword">step</span> = <span class="number">50</span></div><div class="line"></div><div class="line"># Roll the dice</div><div class="line">dice=<span class="built_in">np</span>.<span class="built_in">random</span>.randint(<span class="number">1</span>,<span class="number">7</span>)</div><div class="line"></div><div class="line"># Finish the control construct</div><div class="line"><span class="keyword">if</span> dice &lt;= <span class="number">2</span> :</div><div class="line">	<span class="keyword">step</span> = <span class="keyword">step</span> - <span class="number">1</span></div><div class="line">elif dice &lt;=<span class="number">5</span> :</div><div class="line">	<span class="keyword">step</span> = <span class="keyword">step</span> + <span class="number">1</span></div><div class="line"><span class="keyword">else</span> :</div><div class="line">	<span class="keyword">step</span> = <span class="keyword">step</span> + <span class="built_in">np</span>.<span class="built_in">random</span>.randint(<span class="number">1</span>,<span class="number">7</span>)</div><div class="line"></div><div class="line"># Print out dice <span class="keyword">and</span> <span class="keyword">step</span></div><div class="line"><span class="built_in">print</span>(dice)</div><div class="line"><span class="built_in">print</span>(<span class="keyword">step</span>)</div></pre></td></tr></table></figure>
<h3 id="Random-Walk"><a href="#Random-Walk" class="headerlink" title="Random Walk"></a>Random Walk</h3><figure class="highlight maxima"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"># Import numpy <span class="keyword">and</span> set seed</div><div class="line">import numpy as <span class="built_in">np</span></div><div class="line"><span class="built_in">np</span>.<span class="built_in">random</span>.seed(<span class="number">123</span>)</div><div class="line"></div><div class="line"># Initialize random_walk</div><div class="line">random_walk=[<span class="number">0</span>]</div><div class="line"></div><div class="line"><span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>) :</div><div class="line">	# Set <span class="keyword">step</span>: <span class="built_in">last</span> element <span class="keyword">in</span> random_walk</div><div class="line">	<span class="keyword">step</span>=random_walk[-<span class="number">1</span>]</div><div class="line"></div><div class="line">	# Roll the dice</div><div class="line">	dice = <span class="built_in">np</span>.<span class="built_in">random</span>.randint(<span class="number">1</span>,<span class="number">7</span>)</div><div class="line"></div><div class="line">	# Determine next <span class="keyword">step</span></div><div class="line">	<span class="keyword">if</span> dice &lt;= <span class="number">2</span>:</div><div class="line">		<span class="keyword">step</span> = <span class="keyword">step</span> - <span class="number">1</span></div><div class="line">		# 用了一个新函数 <span class="built_in">max</span>()，有两个参数，下面表示，在保证<span class="keyword">step</span>不小于<span class="number">0</span>的情况下，减<span class="number">1</span>.不过，如果小于<span class="number">0</span>了，要执行那一句呢？</div><div class="line">		<span class="keyword">step</span> = <span class="built_in">max</span>(<span class="number">0</span>, <span class="keyword">step</span>-<span class="number">1</span>)</div><div class="line">		</div><div class="line">	elif dice &lt;= <span class="number">5</span>:</div><div class="line">		<span class="keyword">step</span> = <span class="keyword">step</span> + <span class="number">1</span></div><div class="line">	<span class="keyword">else</span>:</div><div class="line">		<span class="keyword">step</span> = <span class="keyword">step</span> + <span class="built_in">np</span>.<span class="built_in">random</span>.randint(<span class="number">1</span>,<span class="number">7</span>)</div><div class="line"></div><div class="line">	# <span class="built_in">append</span> next_step to random_walk</div><div class="line">	random_walk.<span class="built_in">append</span>(<span class="keyword">step</span>)</div><div class="line"></div><div class="line"># Print random_walk</div><div class="line"><span class="built_in">print</span>(random_walk)</div><div class="line"></div><div class="line"># Import matplotlib.pyplot as plt</div><div class="line">import matplotlib.pyplot as plt</div><div class="line"></div><div class="line"># Plot random_walk</div><div class="line">plt.plot(random_walk)</div><div class="line">plt.<span class="built_in">show</span>()</div></pre></td></tr></table></figure>
<p>接下来是进阶版的模拟爬楼梯+可视化</p>
<figure class="highlight maxima"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">import matplotlib.pyplot as plt</div><div class="line">import numpy as <span class="built_in">np</span></div><div class="line"># 为什么每次的seed都是<span class="number">123</span>？</div><div class="line"><span class="built_in">np</span>.<span class="built_in">random</span>.seed(<span class="number">123</span>) </div><div class="line">all_walks = []</div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">250</span>) :</div><div class="line">	random_walk = [<span class="number">0</span>]</div><div class="line">	<span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>) :</div><div class="line">		<span class="keyword">step</span> = random_walk[-<span class="number">1</span>]</div><div class="line">		dice = <span class="built_in">np</span>.<span class="built_in">random</span>.randint(<span class="number">1</span>,<span class="number">7</span>)</div><div class="line">		<span class="keyword">if</span> dice &lt;= <span class="number">2</span>:</div><div class="line">			<span class="keyword">step</span> = <span class="built_in">max</span>(<span class="number">0</span>, <span class="keyword">step</span> - <span class="number">1</span>)</div><div class="line">		elif dice &lt;= <span class="number">5</span>:</div><div class="line">			<span class="keyword">step</span> = <span class="keyword">step</span> + <span class="number">1</span></div><div class="line">		<span class="keyword">else</span>:</div><div class="line">			<span class="keyword">step</span> = <span class="keyword">step</span> + <span class="built_in">np</span>.<span class="built_in">random</span>.randint(<span class="number">1</span>,<span class="number">7</span>)</div><div class="line">		# Implement clumsiness 这句是用来干嘛的——You're a bit clumsy <span class="keyword">and</span> you have a <span class="number">0.1</span><span class="symbol">%</span> chance of falling down.为什么要考虑这个？</div><div class="line">		<span class="keyword">if</span> <span class="built_in">np</span>.<span class="built_in">random</span>.rand() &lt;= <span class="number">0.001</span>:</div><div class="line">			<span class="keyword">step</span> = <span class="number">0</span></div><div class="line">		random_walk.<span class="built_in">append</span>(<span class="keyword">step</span>)</div><div class="line">	all_walks.<span class="built_in">append</span>(random_walk)</div><div class="line"></div><div class="line"># Convert all_walks to Numpy <span class="built_in">array</span>: np_aw</div><div class="line">np_aw=<span class="built_in">np</span>.<span class="built_in">array</span>(all_walks)</div><div class="line"></div><div class="line"># Plot np_aw <span class="keyword">and</span> <span class="built_in">show</span></div><div class="line">plt.plot(np_aw)</div><div class="line">plt.<span class="built_in">show</span>()</div><div class="line"># Clear the figure</div><div class="line">plt.clf()</div><div class="line"></div><div class="line"># Transpose np_aw: np_aw_t 这一步是干嘛的？把它变成什么形状了？</div><div class="line">np_aw_t=<span class="built_in">np</span>.<span class="built_in">transpose</span>(np_aw)</div><div class="line"></div><div class="line"># Plot np_aw_t <span class="keyword">and</span> <span class="built_in">show</span></div><div class="line">plt.plot(np_aw_t)</div><div class="line">plt.<span class="built_in">show</span>()</div></pre></td></tr></table></figure>
<p>有一处模拟的我不太懂，想了半天还是似懂非懂，trails单独print出来是个三角形……嗯，我还得再想想</p>
<figure class="highlight maxima"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">import numpy as <span class="built_in">np</span></div><div class="line"><span class="built_in">np</span>.<span class="built_in">random</span>.seed(<span class="number">123</span>)</div><div class="line">final_tails = []</div><div class="line"><span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):</div><div class="line">	tails = [<span class="number">0</span>]</div><div class="line">	<span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</div><div class="line">		coin = <span class="built_in">np</span>.<span class="built_in">random</span>.randint(<span class="number">0</span>,<span class="number">2</span>)</div><div class="line">		tails.<span class="built_in">append</span>(tails[x]+coin) # 就是这一步</div><div class="line">		<span class="built_in">print</span>(tails)</div><div class="line">	final_tails.<span class="built_in">append</span>(tails[-<span class="number">1</span>]) # 为什么要这么加</div><div class="line"><span class="built_in">print</span>(final_tails)</div></pre></td></tr></table></figure>
<p><em>2018-01-09</em></p>
<h1 id="Python-Data-Science-Toolbox-Part-1"><a href="#Python-Data-Science-Toolbox-Part-1" class="headerlink" title="Python Data Science Toolbox (Part 1)"></a>Python Data Science Toolbox (Part 1)</h1><h2 id="Writing-your-own-functions"><a href="#Writing-your-own-functions" class="headerlink" title="Writing your own functions"></a>Writing your own functions</h2><h3 id="User-defined-functions"><a href="#User-defined-functions" class="headerlink" title="User-defined functions"></a><a href="https://www.codementor.io/kaushikpal/user-defined-functions-in-python-8s7wyc8k2" target="_blank" rel="external">User-defined functions</a></h3><p>call the function 是什么意思？<br>比如说定义了一个——<code>def shout()</code>，在最后一行写出<code>shout()</code>，就是call the function</p>
<p>没有parameter的是<code>def shout()</code><br>有一个parameter的是<code>def shout(word)</code></p>
<p>str类型的要记得加单引号<code>shout(&#39;congratulations&#39;)</code>，单引号和双引号还有差别吗</p>
<p>有多个parameter的是<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Define shout with parameters word1 and word2</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">shout</span><span class="params">(word1, word2)</span>:</span></div><div class="line">    <span class="string">"""Concatenate strings with three exclamation marks"""</span></div><div class="line">    <span class="comment"># Concatenate word1 with '!!!': shout1</span></div><div class="line">    shout1=word1+<span class="string">'!!!'</span></div><div class="line">    </div><div class="line">    <span class="comment"># Concatenate word2 with '!!!': shout2</span></div><div class="line">    shout2=word2+<span class="string">'!!!'</span></div><div class="line">    </div><div class="line">    <span class="comment"># Concatenate shout1 with shout2: new_shout</span></div><div class="line">    new_shout = shout1+shout2</div><div class="line"></div><div class="line">    <span class="comment"># Return new_shout</span></div><div class="line">    <span class="keyword">return</span> new_shout</div><div class="line"></div><div class="line"><span class="comment"># Pass 'congratulations' and 'you' to shout(): yell</span></div><div class="line">yell=shout(<span class="string">'congratulations'</span>,<span class="string">'you'</span>)</div><div class="line"></div><div class="line"><span class="comment"># Print yell</span></div><div class="line">print(yell)</div></pre></td></tr></table></figure></p>
<p>这里面的<code>new_shout</code>是不是就是概念化的<code>yell</code>？</p>
<p>再来看另一个例子，tuples，卡了我半天<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Define shout_all with parameters word1 and word2</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">shout_all</span><span class="params">(word1, word2)</span>:</span></div><div class="line">    </div><div class="line">    <span class="comment"># Concatenate word1 with '!!!': shout1</span></div><div class="line">    shout1=word1+<span class="string">'!!!'</span>;</div><div class="line">    </div><div class="line">    <span class="comment"># Concatenate word2 with '!!!': shout2</span></div><div class="line">    shout2=word2+<span class="string">'!!!'</span>;</div><div class="line">    </div><div class="line">    <span class="comment"># Construct a tuple with shout1 and shout2: shout_words</span></div><div class="line">    shout_words=(shout1,shout2)</div><div class="line"></div><div class="line">    <span class="comment"># Return shout_words</span></div><div class="line">    <span class="keyword">return</span> shout_words</div><div class="line"></div><div class="line"><span class="comment"># Pass 'congratulations' and 'you' to shout_all(): yell1, yell2</span></div><div class="line">(yell1,yell2)=shout_all(<span class="string">'congratulations'</span>,<span class="string">'you'</span>)</div><div class="line"><span class="comment"># 就是这里！想半天不知道要怎么写</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># Print yell1 and yell2</span></div><div class="line">print(yell1)</div><div class="line">print(yell2)</div></pre></td></tr></table></figure></p>
<h3 id="Bringing-it-all-together"><a href="#Bringing-it-all-together" class="headerlink" title="Bringing it all together"></a>Bringing it all together</h3><p>这个例子是判断Twitter中出现的语言有几种，也是很简单的了<br>一个字典中的for loop, if 判断这个key在不在字典里，在的话，value+1，不在的话，把这个key加进去，设初始值为1.<br>这个多简单啊，过去刚学Python（忽然想到第一次学Python已经是16年的事了）就总碰到，今天还在这一题卡了半天。我竟然不知道该怎么加……</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Import pandas</span></div><div class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div><div class="line"></div><div class="line"><span class="comment"># Import Twitter data as DataFrame: df</span></div><div class="line">df = pd.read_csv(<span class="string">"tweets.csv"</span>)</div><div class="line"></div><div class="line"><span class="comment"># Initialize an empty dictionary: langs_count</span></div><div class="line">langs_count = &#123;&#125;</div><div class="line"></div><div class="line"><span class="comment"># Extract column from DataFrame: col</span></div><div class="line">col = df[<span class="string">'lang'</span>]</div><div class="line"></div><div class="line"><span class="comment"># Iterate over lang column in DataFrame</span></div><div class="line"><span class="keyword">for</span> entry <span class="keyword">in</span> col:</div><div class="line"></div><div class="line">    <span class="comment"># If the language is in langs_count, add 1</span></div><div class="line">    <span class="keyword">if</span> entry <span class="keyword">in</span> langs_count.keys():</div><div class="line">        langs_count[entry]+=<span class="number">1</span> <span class="comment"># 就是这里，多么简单的一句，我大概想了20分钟，`+=`写成了`=+`…… 当然我还想过更复杂的写法……</span></div><div class="line">    <span class="comment"># Else add the language to langs_count, set the value to 1</span></div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        langs_count[entry]=<span class="number">1</span></div><div class="line"></div><div class="line"><span class="comment"># Print the populated dictionary</span></div><div class="line">print(langs_count)</div></pre></td></tr></table></figure>
<p>进一步的函数<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Define count_entries()</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">count_entries</span><span class="params">(df, col_name)</span>:</span></div><div class="line">    <span class="string">"""Return a dictionary with counts of </span></div><div class="line">    occurrences as value for each key."""</div><div class="line"></div><div class="line">    <span class="comment"># Initialize an empty dictionary: langs_count</span></div><div class="line">    langs_count = &#123;&#125;</div><div class="line">    </div><div class="line">    <span class="comment"># Extract column from DataFrame: col</span></div><div class="line">    col = df[col_name]</div><div class="line">    </div><div class="line">    <span class="comment"># Iterate over lang column in DataFrame</span></div><div class="line">    <span class="keyword">for</span> entry <span class="keyword">in</span> col:</div><div class="line"></div><div class="line">        <span class="comment"># If the language is in langs_count, add 1</span></div><div class="line">        <span class="keyword">if</span> entry <span class="keyword">in</span> langs_count.keys():</div><div class="line">            langs_count[entry]+=<span class="number">1</span></div><div class="line">        <span class="comment"># Else add the language to langs_count, set the value to 1</span></div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            langs_count[entry]=<span class="number">1</span></div><div class="line"></div><div class="line">    <span class="comment"># Return the langs_count dictionary</span></div><div class="line">    <span class="keyword">return</span> langs_count</div><div class="line"></div><div class="line"><span class="comment"># Call count_entries(): result</span></div><div class="line">result=count_entries(tweets_df,<span class="string">'lang'</span>)</div><div class="line"><span class="comment"># call the function 我还没搞得太明白，passing tweets_df和'lang' to count_entries(),就是说把函数的变量设为这两个？加了单引号说明它是str（这里的land是变量名），不加的话，它就是变量</span></div><div class="line"></div><div class="line"><span class="comment"># Print the result</span></div><div class="line">print(result)</div></pre></td></tr></table></figure></p>
<p><em>2018-01-10</em></p>
<h2 id="Default-arguments-variable-length-arguments-and-scope"><a href="#Default-arguments-variable-length-arguments-and-scope" class="headerlink" title="Default arguments, variable-length arguments and scope"></a>Default arguments, variable-length arguments and scope</h2><h3 id="Scope-and-user-defined-functions"><a href="#Scope-and-user-defined-functions" class="headerlink" title="Scope and user-defined functions"></a>Scope and user-defined functions</h3><p>三种：</p>
<ul>
<li>global scope —— 定义在<code>__main__</code>里面的</li>
<li>local scope —— 定义在function里面的</li>
<li>built-in scope —— 自带的</li>
</ul>
<h3 id="Nested-functions"><a href="#Nested-functions" class="headerlink" title="Nested functions"></a>Nested functions</h3><p>读取顺序是</p>
<ul>
<li>local scope</li>
<li>enclosing functions</li>
<li>global</li>
<li>built-in</li>
</ul>
<p>用户自定义的name默认都是local，但是你可以用keywords - nonlocal或者global来改变</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">raise_val</span><span class="params">(n)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inner</span><span class="params">(x)</span>:</span></div><div class="line">        raised = x ** n</div><div class="line">        <span class="keyword">return</span> raised</div><div class="line">    <span class="keyword">return</span> inner</div><div class="line"></div><div class="line">square = raise_val(<span class="number">3</span>)</div><div class="line">cube = raise_val(<span class="number">2</span>)</div><div class="line"></div><div class="line">print(square(<span class="number">2</span>),cube(<span class="number">4</span>))</div></pre></td></tr></table></figure>
<p>上面这段代码我思考了半天，才弄清楚square(x)和cube(x)都是对应inner(x)，我知道它是这么做的，但是还不太理解为什么要这么做</p>
<p>下面是一个练习<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Define three_shouts</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">three_shouts</span><span class="params">(word1, word2, word3)</span>:</span></div><div class="line">    <span class="string">"""Returns a tuple of strings</span></div><div class="line">    concatenated with '!!!'."""</div><div class="line"></div><div class="line">    <span class="comment"># Define inner</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inner</span><span class="params">(word)</span>:</span></div><div class="line">        <span class="string">"""Returns a string concatenated with '!!!'."""</span></div><div class="line">        <span class="keyword">return</span> word + <span class="string">'!!!'</span></div><div class="line"></div><div class="line">    <span class="comment"># Return a tuple of strings 我第一遍写的时候把inner()漏掉了，可能是因为我还没搞懂</span></div><div class="line">    <span class="keyword">return</span> (inner(word1),inner(word2),inner(word3))</div><div class="line"></div><div class="line"><span class="comment"># Call three_shouts() and print</span></div><div class="line">print(three_shouts(<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>))</div></pre></td></tr></table></figure></p>
<h3 id="Default-and-flexible-arguments"><a href="#Default-and-flexible-arguments" class="headerlink" title="Default and flexible arguments"></a>Default and flexible arguments</h3><p>下面介绍的这个keyword arguments: <code>**kwargs</code>好像很适合用在dict里？<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_all</span><span class="params">(**kwargs)</span>:</span></div><div class="line">    <span class="keyword">for</span> key, value <span class="keyword">in</span> kwargs,items():</div><div class="line">        print(key + <span class="string">":"</span> + value)</div><div class="line"></div><div class="line">print_all(name=<span class="string">"dumbledore"</span>, job=<span class="string">"headmaster"</span>)</div></pre></td></tr></table></figure></p>
<p>最后输出的顺序好像很任性……</p>
<p>最近几个例子都挺容易的，我想强调一下的是第二步<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Define gibberish</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">gibberish</span><span class="params">(*args)</span>:</span></div><div class="line">    <span class="string">"""Concatenate strings in *args together."""</span></div><div class="line"></div><div class="line">    <span class="comment"># Initialize an empty string: hodgepodge 一开始不知道什么叫空的string…… 还去Google了一下</span></div><div class="line">    hodgepodge=<span class="string">""</span></div><div class="line"></div><div class="line">    <span class="comment"># Concatenate the strings in args</span></div><div class="line">    <span class="keyword">for</span> word <span class="keyword">in</span> args:</div><div class="line">        hodgepodge += word</div><div class="line"></div><div class="line">    <span class="comment"># Return hodgepodge</span></div><div class="line">    <span class="keyword">return</span> hodgepodge</div><div class="line"></div><div class="line"><span class="comment"># Call gibberish() with one string: one_word</span></div><div class="line">one_word = gibberish(<span class="string">"luke"</span>)</div><div class="line"></div><div class="line"><span class="comment"># Call gibberish() with five strings: many_words</span></div><div class="line">many_words = gibberish(<span class="string">"luke"</span>, <span class="string">"leia"</span>, <span class="string">"han"</span>, <span class="string">"obi"</span>, <span class="string">"darth"</span>)</div><div class="line"></div><div class="line"><span class="comment"># Print one_word and many_words</span></div><div class="line">print(one_word)</div><div class="line">print(many_words)</div></pre></td></tr></table></figure></p>
<h3 id="Bring-it-all-together"><a href="#Bring-it-all-together" class="headerlink" title="Bring it all together"></a>Bring it all together</h3><p>下面这个例子，上堂课出现了一次，也是很常见的那种，判断一个key在不在这个entry里面，在的话value+1，不在的话把这个key加进去设初始值为1。<br>翻回去看了下，昨天写了一模一样的话……<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Define count_entries()</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">count_entries</span><span class="params">(df, *args)</span>:</span></div><div class="line">    <span class="string">"""Return a dictionary with counts of</span></div><div class="line">    occurrences as value for each key."""</div><div class="line">    </div><div class="line">    <span class="comment">#Initialize an empty dictionary: cols_count</span></div><div class="line">    cols_count = &#123;&#125;</div><div class="line">    </div><div class="line">    <span class="comment"># Iterate over column names in args</span></div><div class="line">    <span class="keyword">for</span> col_name <span class="keyword">in</span> args: <span class="comment"># 刚开始是`*args`运行报错了，我不记得是系统设定好写这个还是我自己写的了</span></div><div class="line">    </div><div class="line">        <span class="comment"># Extract column from DataFrame: col</span></div><div class="line">        col = df[col_name]</div><div class="line">    </div><div class="line">        <span class="comment"># Iterate over the column in DataFrame</span></div><div class="line">        <span class="keyword">for</span> entry <span class="keyword">in</span> col:</div><div class="line">    </div><div class="line">            <span class="comment"># If entry is in cols_count, add 1</span></div><div class="line">            <span class="keyword">if</span> entry <span class="keyword">in</span> cols_count.keys():</div><div class="line">                cols_count[entry] += <span class="number">1</span></div><div class="line">    </div><div class="line">            <span class="comment"># Else add the entry to cols_count, set the value to 1</span></div><div class="line">            <span class="keyword">else</span>:</div><div class="line">                cols_count[entry] = <span class="number">1</span></div><div class="line"></div><div class="line">    <span class="comment"># Return the cols_count dictionary</span></div><div class="line">    <span class="keyword">return</span> cols_count</div><div class="line"></div><div class="line"><span class="comment"># Call count_entries(): result1</span></div><div class="line">result1 = count_entries(tweets_df, <span class="string">'lang'</span>)</div><div class="line"></div><div class="line"><span class="comment"># Call count_entries(): result2</span></div><div class="line">result2 = count_entries(tweets_df, <span class="string">'lang'</span>, <span class="string">'source'</span>)</div><div class="line"></div><div class="line"><span class="comment"># Print result1 and result2</span></div><div class="line">print(result1)</div><div class="line">print(result2)</div></pre></td></tr></table></figure></p>
<p>这次和上次的区别就是，这次可以返回的参数更多了，上次写的只能返回<code>&#39;lang&#39;</code>或者<code>&#39;source&#39;</code>，但这次用了<code>*args</code>就可以任意返回很多个了。就不用一个一个单独写了</p>
<h2 id="Lambda-functions-and-error-handling"><a href="#Lambda-functions-and-error-handling" class="headerlink" title="Lambda functions and error-handling"></a>Lambda functions and error-handling</h2><h3 id="Lambda-functions"><a href="#Lambda-functions" class="headerlink" title="Lambda functions"></a>Lambda functions</h3><p>有一个变量的时候，函数这么写：<code>lambda a : a +&quot;!!!&quot;</code><br>有两个变量的时候，函数这么写：<code>lambda x,y : x**y</code></p>
<p>与map()嵌套的例子，其实这个例子里还是单变量的<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"># Create <span class="keyword">a</span> <span class="keyword">list</span> of <span class="built_in">string</span><span class="variable">s:</span> spells</div><div class="line">spells = [<span class="string">"protego"</span>, <span class="string">"accio"</span>, <span class="string">"expecto patronum"</span>, <span class="string">"legilimens"</span>]</div><div class="line"></div><div class="line"># Use <span class="keyword">map</span>() <span class="keyword">to</span> apply <span class="keyword">a</span> lambda <span class="function"><span class="keyword">function</span> <span class="title">over</span> <span class="title">spells</span>: <span class="title">shout_spells</span></span></div><div class="line">shout_spells = <span class="keyword">map</span>(lambda item : item+<span class="string">'!!!'</span>, spells)</div><div class="line"></div><div class="line"># Convert shout_spells <span class="keyword">to</span> <span class="keyword">a</span> lis<span class="variable">t:</span> shout_spells_list</div><div class="line">shout_spells_list=<span class="keyword">list</span>(shout_spells)</div><div class="line"></div><div class="line"># Convert shout_spells into <span class="keyword">a</span> <span class="keyword">list</span> <span class="built_in">and</span> <span class="keyword">print</span> it</div><div class="line"><span class="keyword">print</span>(shout_spells_list)</div></pre></td></tr></table></figure></p>
<p>刚刚是外嵌套，现在是内嵌套，还是单变量的<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"># Create <span class="keyword">a</span> <span class="keyword">list</span> of <span class="built_in">string</span><span class="variable">s:</span> fellowship</div><div class="line">fellowship = [<span class="string">'frodo'</span>, <span class="string">'samwise'</span>, <span class="string">'merry'</span>, <span class="string">'aragorn'</span>, <span class="string">'legolas'</span>, <span class="string">'boromir'</span>, <span class="string">'gimli'</span>]</div><div class="line"></div><div class="line"># Use <span class="built_in">filter</span>() <span class="keyword">to</span> apply <span class="keyword">a</span> lambda <span class="function"><span class="keyword">function</span> <span class="title">over</span> <span class="title">fellowship</span>: <span class="title">result</span></span></div><div class="line">result = <span class="built_in">filter</span>(lambda member:<span class="built_in">len</span>(member)&gt;<span class="number">6</span>, fellowship)</div><div class="line"></div><div class="line"># Convert result <span class="keyword">to</span> <span class="keyword">a</span> lis<span class="variable">t:</span> result_list</div><div class="line">result_list=<span class="keyword">list</span>(result)</div><div class="line"></div><div class="line"># Convert result into <span class="keyword">a</span> <span class="keyword">list</span> <span class="built_in">and</span> <span class="keyword">print</span> it</div><div class="line"><span class="keyword">print</span>(result_list)</div></pre></td></tr></table></figure></p>
<p>接下来是双变量的嵌套，犯了两个错误<br><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"># Import reduce <span class="keyword">from</span> functools 这一步先错了，我写错了import reduce <span class="keyword">from</span> functools</div><div class="line"><span class="keyword">from</span> functools import reduce</div><div class="line"></div><div class="line"># <span class="keyword">Create</span> a list <span class="keyword">of</span> strings: stark</div><div class="line">stark = [<span class="string">'robb'</span>, <span class="string">'sansa'</span>, <span class="string">'arya'</span>, <span class="string">'eddard'</span>, <span class="string">'jon'</span>]</div><div class="line"></div><div class="line"># Use reduce() <span class="keyword">to</span> apply a lambda <span class="function"><span class="keyword">function</span> <span class="title">over</span> <span class="title">stark</span>:</span> <span class="keyword">result</span> 还有这个concatenate，是加法，我总写成乘法</div><div class="line"><span class="keyword">result</span> = reduce(lambda item1,item2:item1+item2, stark)</div><div class="line"></div><div class="line"># Print the <span class="keyword">result</span></div><div class="line">print(<span class="keyword">result</span>)</div></pre></td></tr></table></figure></p>
<h3 id="Error-handling"><a href="#Error-handling" class="headerlink" title="Error handling"></a>Error handling</h3><p>终于学到这里了，以前最怕的就是try-except，看不懂。但是刚刚觉得，这个句法明明就为了让你看懂才这么写的呀，为什么我之前看不懂。</p>
<p>除了try-except外，还有if-raise 语句<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Define shout_echo</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">shout_echo</span><span class="params">(word1, echo=<span class="number">1</span>)</span>:</span></div><div class="line">    <span class="string">"""Concatenate echo copies of word1 and three</span></div><div class="line">    exclamation marks at the end of the string."""</div><div class="line"></div><div class="line">    <span class="comment"># Raise an error with raise 就像 except TypeError一样，raise后面也可以接很多其他的error</span></div><div class="line">    <span class="keyword">if</span> echo&lt;<span class="number">0</span>:</div><div class="line">        <span class="keyword">raise</span> ValueError(<span class="string">'echo must be greater than 0'</span>)</div><div class="line"></div><div class="line">    <span class="comment"># Concatenate echo copies of word1 using *: echo_word</span></div><div class="line">    echo_word = word1 * echo</div><div class="line"></div><div class="line">    <span class="comment"># Concatenate '!!!' to echo_word: shout_word</span></div><div class="line">    shout_word = echo_word + <span class="string">'!!!'</span></div><div class="line"></div><div class="line">    <span class="comment"># Return shout_word</span></div><div class="line">    <span class="keyword">return</span> shout_word</div><div class="line"></div><div class="line"><span class="comment"># Call shout_echo</span></div><div class="line">shout_echo(<span class="string">"particle"</span>, echo=<span class="number">5</span>)</div></pre></td></tr></table></figure></p>
<h3 id="Bringing-it-all-together-1"><a href="#Bringing-it-all-together-1" class="headerlink" title="Bringing it all together"></a>Bringing it all together</h3><p>本来打算写两句的，结果发现没什么好写的就结束了……</p>
<p>第三课学完了，明天可以开始第四课了</p>
<p><em>2018-01-11</em></p>
<h1 id="Python-Data-Science-Toolbox-Part-2"><a href="#Python-Data-Science-Toolbox-Part-2" class="headerlink" title="Python Data Science Toolbox (Part 2)"></a>Python Data Science Toolbox (Part 2)</h1><h2 id="Using-iterators-in-PythonLand"><a href="#Using-iterators-in-PythonLand" class="headerlink" title="Using iterators in PythonLand"></a>Using iterators in PythonLand</h2><h3 id="iterables-vs-iterators"><a href="#iterables-vs-iterators" class="headerlink" title="iterables vs. iterators"></a>iterables vs. iterators</h3><p>iterables<br>lists, strings, dictionaries, files 都是可以被遍历的，所以它们被称为iterables，对这些iterables使用iter()，就能生成iterators</p>
<p>iterators<br>通过next()来遍历每一个元素</p>
<p>两者的关系是<br><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">word</span>=<span class="string">'Da'</span></div><div class="line"><span class="keyword">it</span>=iter(<span class="built_in">word</span>)</div><div class="line">print(next(<span class="keyword">it</span>))<span class="comment"># 在这个例子中只能写两次，因为只有2个字母</span></div><div class="line">print(*<span class="keyword">it</span>) <span class="comment"># 还有另一种写法，这样只用写一次就全部遍历完了</span></div></pre></td></tr></table></figure></p>
<h3 id="useful-functions"><a href="#useful-functions" class="headerlink" title="useful functions"></a>useful functions</h3><p><code>enumerate()</code><br>两种用法：</p>
<ul>
<li>list→enumerate()→list()变成一个含有tuples的list</li>
<li>自带index属性，从0开始。在for loop，可以print(index,value)</li>
</ul>
<p><code>zip()</code><br>三种用法：</p>
<ul>
<li>2个list→zip()→list()变成一个含有tuples的list</li>
<li>for loop</li>
<li><code>print(*z)</code></li>
</ul>
<p>这个<code>*operator</code>需要注意下<br><figure class="highlight nix"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Create a zip object from mutants and powers: z1</span></div><div class="line"><span class="attr">z1</span> = zip(mutants,powers)</div><div class="line"></div><div class="line"><span class="comment"># Print the tuples in z1 by unpacking with *</span></div><div class="line">print(*z1)</div><div class="line"></div><div class="line"><span class="comment"># Re-create a zip object from mutants and powers: z1</span></div><div class="line"><span class="attr">z1</span> = zip(mutants,powers)</div><div class="line"></div><div class="line"><span class="comment"># 'Unzip' the tuples in z1 by unpacking with * and zip(): result1, result2 注意，就是这里，一开始不知道怎么写</span></div><div class="line">result1, <span class="attr">result2</span> = zip(*z1)</div><div class="line"></div><div class="line"><span class="comment"># Check if unpacked tuples are equivalent to original tuples</span></div><div class="line">print(<span class="attr">result1</span> == mutants)</div><div class="line">print(<span class="attr">result2</span> == powers)</div></pre></td></tr></table></figure></p>
<h3 id="Using-iterators-for-big-data"><a href="#Using-iterators-for-big-data" class="headerlink" title="Using iterators for big data"></a>Using iterators for big data</h3><p>用到pandas <code>read_csv()</code> <code>chunksize</code><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Define count_entries()</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">count_entries</span><span class="params">(csv_file,c_size,colname)</span>:</span></div><div class="line">    <span class="string">"""Return a dictionary with counts of</span></div><div class="line">    occurrences as value for each key."""</div><div class="line">    </div><div class="line">    </div><div class="line">    <span class="comment"># Initialize an empty dictionary: counts_dict</span></div><div class="line">    counts_dict = &#123;&#125;</div><div class="line"></div><div class="line">    <span class="comment"># Iterate over the file chunk by chunk</span></div><div class="line">    <span class="keyword">for</span> chunk <span class="keyword">in</span> pd.read_csv(csv_file, chunksize=c_size):</div><div class="line"></div><div class="line">        <span class="comment"># Iterate over the column in DataFrame</span></div><div class="line">        <span class="keyword">for</span> entry <span class="keyword">in</span> chunk[colname]:</div><div class="line">            <span class="keyword">if</span> entry <span class="keyword">in</span> counts_dict.keys():</div><div class="line">                counts_dict[entry] += <span class="number">1</span></div><div class="line">            <span class="keyword">else</span>:</div><div class="line">                counts_dict[entry] = <span class="number">1</span></div><div class="line"></div><div class="line">    <span class="comment"># Return counts_dict</span></div><div class="line">    <span class="keyword">return</span> counts_dict</div><div class="line"></div><div class="line"><span class="comment"># Call count_entries(): result_counts</span></div><div class="line">result_counts = count_entries(<span class="string">'tweets.csv'</span>,<span class="number">10</span>,<span class="string">'lang'</span>)</div><div class="line"></div><div class="line"><span class="comment"># Print result_counts</span></div><div class="line">print(result_counts)</div></pre></td></tr></table></figure></p>
<p>需要时刻铭记的是，所定义的函数的body里，都应该是通用的参数，而不应该是具体的指标，在call的部分才可以把具体的内容分配到对应的参数中</p>
<h2 id="List-comprehensions-and-generators"><a href="#List-comprehensions-and-generators" class="headerlink" title="List comprehensions and generators"></a>List comprehensions and generators</h2><h3 id="List-comprehensions"><a href="#List-comprehensions" class="headerlink" title="List comprehensions"></a>List comprehensions</h3><p>一句代码实现for循环，三个组成部分：</p>
<ul>
<li>iterable</li>
<li>iterator variables (members of iterable)</li>
<li>output expression</li>
</ul>
<h3 id="Nested-loop"><a href="#Nested-loop" class="headerlink" title="Nested loop"></a>Nested loop</h3><p>来看一下这个嵌套的<br><figure class="highlight maxima"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"># Create a <span class="number">5</span> x <span class="number">5</span> <span class="built_in">matrix</span> using a list of lists: <span class="built_in">matrix</span> 在这里整个<span class="built_in">col</span>的循环是作为<span class="built_in">row</span>的iterators…… 反正我是卡了半天</div><div class="line"><span class="built_in">matrix</span> = [[<span class="built_in">col</span> <span class="keyword">for</span> <span class="built_in">col</span> <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>)] <span class="keyword">for</span> <span class="built_in">row</span> <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>)]</div><div class="line"></div><div class="line"># Print the <span class="built_in">matrix</span></div><div class="line"><span class="keyword">for</span> <span class="built_in">row</span> <span class="keyword">in</span> <span class="built_in">matrix</span>:</div><div class="line">    <span class="built_in">print</span>(<span class="built_in">row</span>)</div></pre></td></tr></table></figure></p>
<h3 id="Conditionals-in-comprehension"><a href="#Conditionals-in-comprehension" class="headerlink" title="Conditionals in comprehension"></a>Conditionals in comprehension</h3><p>条件句咯<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"># Create <span class="keyword">a</span> <span class="keyword">list</span> of <span class="built_in">string</span><span class="variable">s:</span> fellowship</div><div class="line">fellowship = [<span class="string">'frodo'</span>, <span class="string">'samwise'</span>, <span class="string">'merry'</span>, <span class="string">'aragorn'</span>, <span class="string">'legolas'</span>, <span class="string">'boromir'</span>, <span class="string">'gimli'</span>]</div><div class="line"></div><div class="line"># Create <span class="keyword">list</span> comprehension: new_fellowship</div><div class="line">new_fellowship = [member <span class="keyword">for</span> member in fellowship <span class="keyword">if</span> <span class="built_in">len</span>(member)&gt;=<span class="number">7</span>]</div><div class="line"></div><div class="line"># <span class="keyword">Print</span> the <span class="keyword">new</span> <span class="keyword">list</span></div><div class="line"><span class="keyword">print</span>(new_fellowship)</div></pre></td></tr></table></figure></p>
<p>if-else语句，非得写在for前面？写在后面提示我valid syntax<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"># Create <span class="keyword">a</span> <span class="keyword">list</span> of <span class="built_in">string</span><span class="variable">s:</span> fellowship</div><div class="line">fellowship = [<span class="string">'frodo'</span>, <span class="string">'samwise'</span>, <span class="string">'merry'</span>, <span class="string">'aragorn'</span>, <span class="string">'legolas'</span>, <span class="string">'boromir'</span>, <span class="string">'gimli'</span>]</div><div class="line"></div><div class="line"># Create <span class="keyword">list</span> comprehension: new_fellowship</div><div class="line">new_fellowship = [member <span class="keyword">if</span> <span class="built_in">len</span>(member)&gt;=<span class="number">7</span> <span class="keyword">else</span> <span class="string">''</span> <span class="keyword">for</span> member in fellowship]</div><div class="line"></div><div class="line"># <span class="keyword">Print</span> the <span class="keyword">new</span> <span class="keyword">list</span></div><div class="line"><span class="keyword">print</span>(new_fellowship)</div></pre></td></tr></table></figure></p>
<h3 id="Dict-comprehension"><a href="#Dict-comprehension" class="headerlink" title="Dict comprehension"></a>Dict comprehension</h3><p>字典有几处需要注意的：</p>
<ul>
<li>用<code>{}</code></li>
<li><code>key</code>和<code>value</code>成对写在for前面，for后面和其他的没差别<figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"># Create <span class="keyword">a</span> <span class="keyword">list</span> of <span class="built_in">string</span><span class="variable">s:</span> fellowship</div><div class="line">fellowship = [<span class="string">'frodo'</span>, <span class="string">'samwise'</span>, <span class="string">'merry'</span>, <span class="string">'aragorn'</span>, <span class="string">'legolas'</span>, <span class="string">'boromir'</span>, <span class="string">'gimli'</span>]</div><div class="line"></div><div class="line"># Create dict comprehension: new_fellowship</div><div class="line">new_fellowship = &#123;member:<span class="built_in">len</span>(member) <span class="keyword">for</span> member in fellowship&#125;</div><div class="line"></div><div class="line"># <span class="keyword">Print</span> the <span class="keyword">new</span> <span class="keyword">list</span></div><div class="line"><span class="keyword">print</span>(new_fellowship)</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="Generator"><a href="#Generator" class="headerlink" title="Generator"></a>Generator</h2><p>list用的是<code>[]</code>, generator用的是<code>()</code><br>举个例子<code>result=(num for num in range(6))</code></p>
<p>定义一个generator function，最后返回用的是yield不是return</p>
<h3 id="time-stamped-data"><a href="#time-stamped-data" class="headerlink" title="time-stamped data"></a>time-stamped data</h3><p>我可以用这个方法来抓 full text<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Extract the created_at column from df: tweet_time</span></div><div class="line">tweet_time = df[<span class="string">'created_at'</span>]</div><div class="line"></div><div class="line"><span class="comment"># Extract the clock time: tweet_clock_time 12到18位刚好是时分秒，17到18是秒，所以这句是根据秒数来确定</span></div><div class="line">tweet_clock_time = [entry[11:19] <span class="keyword">for</span> entry <span class="keyword">in</span> tweet_time <span class="keyword">if</span> entry[17:19] == <span class="string">'19'</span>]</div><div class="line"></div><div class="line"><span class="comment"># Print the extracted times</span></div><div class="line"><span class="built_in">print</span>(tweet_clock_time)</div></pre></td></tr></table></figure></p>
<h2 id="Bringing-it-all-together-2"><a href="#Bringing-it-all-together-2" class="headerlink" title="Bringing it all together!"></a>Bringing it all together!</h2><h3 id="convert-a-list-of-lists-into-a-list-of-dicts"><a href="#convert-a-list-of-lists-into-a-list-of-dicts" class="headerlink" title="convert a list of lists into a list of dicts"></a>convert a list of lists into a list of dicts</h3><p>我在这一题上停留了半小时！各种嵌套comprehension都没有搞出来，本来不想看提示的，但是Google了一下就翻到了别人的笔记……<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"># <span class="keyword">Print</span> the first <span class="keyword">two</span> lists <span class="keyword">in</span> row_lists</div><div class="line"><span class="keyword">print</span>(row_lists[0])</div><div class="line"><span class="keyword">print</span>(row_lists[1])</div><div class="line"></div><div class="line"># Turn <span class="keyword">list</span> of lists into <span class="keyword">list</span> of dicts: list_of_dicts 原来它这个dict要靠lists2dict() 这个函数来完成，就是更新一个参数，而这个参数又是旧参数的子集……</div><div class="line">list_of_dicts = [lists2dict(feature_names,sublist) <span class="keyword">for</span> sublist <span class="keyword">in</span> row_lists]</div><div class="line"></div><div class="line"># <span class="keyword">Print</span> the first <span class="keyword">two</span> dictionaries <span class="keyword">in</span> list_of_dicts</div><div class="line"><span class="keyword">print</span>(list_of_dicts[0])</div><div class="line"><span class="keyword">print</span>(list_of_dicts[1])</div></pre></td></tr></table></figure></p>
<h3 id="Using-Python-generators-for-streaming-data"><a href="#Using-Python-generators-for-streaming-data" class="headerlink" title="Using Python generators for streaming data"></a>Using Python generators for streaming data</h3><p>想到了Twitter API<br>又来了一道艰难的题，两个错误：1、看错题意；2、写错格式<br><figure class="highlight vala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="meta"># Initialize reader object: urb_pop_reader</span></div><div class="line">urb_pop_reader = pd.read_csv(<span class="string">'ind_pop_data.csv'</span>, chunksize=<span class="number">1000</span>)</div><div class="line"></div><div class="line"><span class="meta"># Get the first DataFrame chunk: df_urb_pop</span></div><div class="line">df_urb_pop = next(urb_pop_reader)</div><div class="line"></div><div class="line"><span class="meta"># Check out the head of the DataFrame</span></div><div class="line">print(df_urb_pop.head())</div><div class="line"></div><div class="line"><span class="meta"># Check out specific country: df_pop_ceb 这个地方题意没有看清楚，应该写判断的，没有写</span></div><div class="line">df_pop_ceb = df_urb_pop[df_urb_pop[<span class="string">'CountryCode'</span>]==<span class="string">'CEB'</span>]</div><div class="line"></div><div class="line"></div><div class="line"><span class="meta"># Zip DataFrame columns of interest: pops 就这个格式折腾了我八百遍，万万没想到它要换行</span></div><div class="line">pops = zip(</div><div class="line">    df_pop_ceb[<span class="string">'Total Population'</span>],</div><div class="line">    df_pop_ceb[<span class="string">'Urban population (% of total)'</span>]</div><div class="line">    )</div><div class="line"></div><div class="line"><span class="meta"># Turn zip object into list: pops_list</span></div><div class="line">pops_list = list(pops)</div><div class="line"></div><div class="line"><span class="meta"># Print pops_list</span></div><div class="line">print(pops_list)</div></pre></td></tr></table></figure></p>
<p>接下来这个我也写了一小时……还花费了所有的提示，结果最后的问题在于<code>chunksize</code>我写错了……为什么报错这么不智能！<br><figure class="highlight vala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="meta"># Initialize reader object: urb_pop_reader</span></div><div class="line">urb_pop_reader = pd.read_csv(<span class="string">'ind_pop_data.csv'</span>, chunksize=<span class="number">1000</span>)</div><div class="line"></div><div class="line"><span class="meta"># Get the first DataFrame chunk: df_urb_pop</span></div><div class="line">df_urb_pop = next(urb_pop_reader)</div><div class="line"></div><div class="line"><span class="meta"># Check out specific country: df_pop_ceb</span></div><div class="line">df_pop_ceb = df_urb_pop[df_urb_pop[<span class="string">'CountryCode'</span>] == <span class="string">'CEB'</span>]</div><div class="line"></div><div class="line"><span class="meta"># Zip DataFrame columns of interest: pops</span></div><div class="line">pops = zip(df_pop_ceb[<span class="string">'Total Population'</span>], </div><div class="line">            df_pop_ceb[<span class="string">'Urban population (% of total)'</span>])</div><div class="line"></div><div class="line"><span class="meta"># Turn zip object into list: pops_list</span></div><div class="line">pops_list = list(pops)</div><div class="line"></div><div class="line"><span class="meta"># Use list comprehension to create new DataFrame column 'Total Urban Population'</span></div><div class="line">df_pop_ceb[<span class="string">'Total Urban Population'</span>] = [<span class="keyword">int</span>(tup[<span class="number">0</span>] * tup[<span class="number">1</span>]* <span class="number">0.01</span>) <span class="keyword">for</span> tup in pops_list]</div><div class="line"></div><div class="line"><span class="meta"># Plot urban population data</span></div><div class="line">df_pop_ceb.plot(kind=<span class="string">'scatter'</span>, x=<span class="string">'Year'</span>, y=<span class="string">'Total Urban Population'</span>)</div><div class="line">plt.show()</div></pre></td></tr></table></figure></p>
<p>今天学完了第三课，总体来说比较简单吧，但是我总是在一些莫名其妙的地方卡住了，一停就是半小时，费时间，有时候也是因为网站给出的错误提示太模糊了……</p>
<p><em>2018-01-14</em></p>
<h1 id="Importing-Data-in-Python-Part-1"><a href="#Importing-Data-in-Python-Part-1" class="headerlink" title="Importing Data in Python (Part 1)"></a>Importing Data in Python (Part 1)</h1><h2 id="Basic"><a href="#Basic" class="headerlink" title="Basic"></a>Basic</h2><h3 id="plain-text"><a href="#plain-text" class="headerlink" title="plain text"></a>plain text</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">filename = <span class="string">'huck_finn.txt'</span></div><div class="line"><span class="keyword">file</span> = <span class="keyword">open</span>(filename, <span class="keyword">mode</span>=<span class="string">'r'</span>) # <span class="string">'r'</span> <span class="keyword">is</span> <span class="keyword">to</span> <span class="keyword">read</span>, <span class="string">'w'</span> <span class="keyword">is</span> <span class="keyword">to</span> <span class="keyword">write</span></div><div class="line">text = <span class="keyword">file</span>.<span class="keyword">read</span>()</div><div class="line"><span class="keyword">file</span>.<span class="keyword">close</span>()</div></pre></td></tr></table></figure>
<p>另一种写法 Context manager with<br><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">'huck_finn.txt'</span>,<span class="string">'r'</span>) <span class="keyword">as</span> <span class="built_in">file</span>:</div><div class="line">    print(<span class="built_in">file</span>.<span class="built_in">read</span>())</div></pre></td></tr></table></figure></p>
<p>ipython有展示当前目录的命令<code>!ls</code></p>
<h3 id="Flat-files"><a href="#Flat-files" class="headerlink" title="Flat files"></a>Flat files</h3><p>比text高级一点点（with records），比如 table data</p>
<h4 id="Zen-of-Python"><a href="#Zen-of-Python" class="headerlink" title="Zen of Python"></a>Zen of Python</h4><p>分享一首诗哈哈<br>The Zen of Python, by Tim Peters</p>
<blockquote>
<p>Beautiful is better than ugly.<br>Explicit is better than implicit.<br>Simple is better than complex.<br>Complex is better than complicated.<br>Flat is better than nested.<br>Sparse is better than dense.<br>Readability counts.<br>Special cases aren’t special enough to break the rules.<br>Although practicality beats purity.<br>Errors should never pass silently.<br>Unless explicitly silenced.<br>In the face of ambiguity, refuse the temptation to guess.<br>There should be one– and preferably only one –obvious way to do it.<br>Although that way may not be obvious at first unless you’re Dutch.<br>Now is better than never.<br>Although never is often better than <em>right</em> now.<br>If the implementation is hard to explain, it’s a bad idea.<br>If the implementation is easy to explain, it may be a good idea.<br>Namespaces are one honking great idea – let’s do more of those!</p>
</blockquote>
<h3 id="Importing-flat-files-using-NumPy"><a href="#Importing-flat-files-using-NumPy" class="headerlink" title="Importing flat files using NumPy"></a>Importing flat files using NumPy</h3><p>基本语法：<br><figure class="highlight nix"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">import</span> numpy as np</div><div class="line"><span class="attr">filename</span> = 'MNIST_header.txt'</div><div class="line"><span class="attr">data</span> = np.loadtxt(filename, <span class="attr">delimiter=',',</span> <span class="attr">dtype=str,skiprows=1,usecols=[0,2])</span> </div><div class="line"><span class="comment"># 后面这些参数都是可以选的</span></div><div class="line"><span class="comment"># `delimiter` you can use `','` and `'\t'` for comma-delimited and tab-delimited respectively; </span></div><div class="line"><span class="comment"># `skiprows` allows you to specify how many rows (not indices) you wish to skip; </span></div><div class="line"><span class="comment"># `usecols` takes a list of the indices of the columns you wish to keep</span></div></pre></td></tr></table></figure></p>
<h4 id="Mixed-datatypes"><a href="#Mixed-datatypes" class="headerlink" title="Mixed datatypes"></a>Mixed datatypes</h4><p><code>loadtext()</code>智能处理单一类型的数据，如果一个表格里面数据类型多样的话就要用上<code>np.genfromtxt()</code><br>还有另一种<code>np.recfromcsv()</code>和前面的类似，只不过默认的dtype是None</p>
<h3 id="Importing-flat-files-using-Pandas"><a href="#Importing-flat-files-using-Pandas" class="headerlink" title="Importing flat files using Pandas"></a>Importing flat files using Pandas</h3><p><code>data = pd.read_csv(file, sep=&#39;\t&#39;, comment=&#39;#&#39;, na_values=&#39;Nothing&#39;)</code></p>
<p><em>2018-01-21</em></p>
<h2 id="other-file-types"><a href="#other-file-types" class="headerlink" title="other file types"></a>other file types</h2><p>pickled files 是什么？ pickle好像是一个包<br>什么样才是一个flat file？</p>
<p>下面是说如何读取excel文件里的sheet<br><figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Load a sheet into a DataFrame by name: df1</span></div><div class="line">df1 = xl.parse(<span class="string">'2004'</span>)</div><div class="line"></div><div class="line"><span class="comment"># Print the head of the DataFrame df1</span></div><div class="line"><span class="keyword">print</span>(df1.head())</div><div class="line"></div><div class="line"><span class="comment"># Load a sheet into a DataFrame by index: df2 这一步我看了提示，因为不知道</span></div><div class="line">df2 = xl.parse(<span class="keyword">int</span>(<span class="number">0</span>))</div><div class="line"></div><div class="line"><span class="comment"># Print the head of the DataFrame df2</span></div><div class="line"><span class="keyword">print</span>(df2.head())</div></pre></td></tr></table></figure></p>
<p>下面这个parse()里面多了一些参数，里面需要有中括号的地方我都没有加上……<br><figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Parse the first sheet and rename the columns: df1</span></div><div class="line">df1 = xl.parse(<span class="keyword">int</span>(<span class="number">0</span>), skiprows=[<span class="number">0</span>], names=[<span class="string">'Country'</span>,<span class="string">'AAM due to War (2002)'</span>])</div><div class="line"></div><div class="line"><span class="comment"># Print the head of the DataFrame df1</span></div><div class="line"><span class="keyword">print</span>(df1.head())</div><div class="line"></div><div class="line"><span class="comment"># Parse the first column of the second sheet and rename the column: df2</span></div><div class="line">df2 = xl.parse(<span class="keyword">int</span>(<span class="number">1</span>), parse_cols=[<span class="number">0</span>], skiprows=[<span class="number">0</span>], names=[<span class="string">'Country'</span>])</div><div class="line"></div><div class="line"><span class="comment"># Print the head of the DataFrame df2</span></div><div class="line"><span class="keyword">print</span>(df2.head())</div></pre></td></tr></table></figure></p>
<h3 id="SAS-和-Stata-file"><a href="#SAS-和-Stata-file" class="headerlink" title="SAS 和 Stata file"></a>SAS 和 Stata file</h3><p>SAS文件的导入<br><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Import sas7bdat package</span></div><div class="line"><span class="built_in">from</span> sas7bdat import SAS7BDAT</div><div class="line"></div><div class="line"><span class="comment"># Save file to a DataFrame: df_sas</span></div><div class="line"><span class="keyword">with</span> SAS7BDAT(<span class="string">'sales.sas7bdat'</span>) <span class="keyword">as</span> <span class="built_in">file</span>: 这个地方我写错了。不知道<span class="built_in">file</span>原来还有属性……</div><div class="line">    df_sas=<span class="built_in">file</span>.to_data_frame()</div><div class="line"></div><div class="line"><span class="comment"># Print head of DataFrame</span></div><div class="line">print(df_sas.head())</div><div class="line"></div><div class="line"><span class="comment"># Plot histogram of DataFrame features (pandas and pyplot already imported)</span></div><div class="line">pd.DataFrame.hist(df_sas[[<span class="string">'P'</span>]])</div><div class="line">plt.ylabel(<span class="string">'count'</span>)</div><div class="line">plt.show()</div></pre></td></tr></table></figure></p>
<p>Stata文件的导入<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Import sas7bdat package</span></div><div class="line"><span class="keyword">from</span> sas7bdat <span class="keyword">import</span> SAS7BDAT</div><div class="line"></div><div class="line"><span class="comment"># Save file to a DataFrame: df_sas</span></div><div class="line"><span class="keyword">with</span> SAS7BDAT(<span class="string">'sales.sas7bdat'</span>) <span class="keyword">as</span> file:</div><div class="line">    df_sas=file.to_data_frame()</div><div class="line"></div><div class="line"><span class="comment"># Print head of DataFrame</span></div><div class="line">print(df_sas.head())</div><div class="line"></div><div class="line"><span class="comment"># Plot histogram of DataFrame features (pandas and pyplot already imported)</span></div><div class="line">pd.DataFrame.hist(df_sas[[<span class="string">'P'</span>]])</div><div class="line">plt.ylabel(<span class="string">'count'</span>)</div><div class="line">plt.show()</div><div class="line"> <span class="comment"># Import pandas</span></div><div class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div><div class="line"></div><div class="line"><span class="comment"># Load Stata file into a pandas DataFrame: df</span></div><div class="line">df=pd.read_stata(<span class="string">'disarea.dta'</span>)</div><div class="line"></div><div class="line"><span class="comment"># Print the head of the DataFrame df</span></div><div class="line">print(df.head())</div><div class="line"></div><div class="line"><span class="comment"># Plot histogram of one column of the DataFrame</span></div><div class="line">pd.DataFrame.hist(df[[<span class="string">'disa10'</span>]])</div><div class="line">plt.xlabel(<span class="string">'Extent of disease'</span>)</div><div class="line">plt.ylabel(<span class="string">'Number of coutries'</span>)</div><div class="line">plt.show()</div></pre></td></tr></table></figure></p>
<h3 id="HDF5文件"><a href="#HDF5文件" class="headerlink" title="HDF5文件"></a>HDF5文件</h3><p>这个是用来存储超大量级的文件<br>它的结构包括’meta’ ‘quality’ ‘strain’<br><figure class="highlight vhdl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"># Get the HDF5 <span class="keyword">group</span>: <span class="keyword">group</span></div><div class="line"><span class="keyword">group</span>=data[<span class="symbol">'strain</span>']</div><div class="line"></div><div class="line"># Check <span class="keyword">out</span> keys <span class="keyword">of</span> <span class="keyword">group</span> 这个地方的`.keys()`我总是忘记加上</div><div class="line"><span class="keyword">for</span> key <span class="keyword">in</span> <span class="keyword">group</span>.keys():</div><div class="line">    print(key)</div><div class="line"></div><div class="line"># Set <span class="keyword">variable</span> equal <span class="keyword">to</span> <span class="built_in">time</span> series data: strain</div><div class="line">strain=data[<span class="symbol">'strain</span>'][<span class="symbol">'Strain</span>'].value</div><div class="line"></div><div class="line"># Set number <span class="keyword">of</span> <span class="built_in">time</span> points <span class="keyword">to</span> sample: num_samples</div><div class="line">num_samples=<span class="number">10000</span></div><div class="line"></div><div class="line"># Set <span class="built_in">time</span> vector</div><div class="line"><span class="built_in">time</span> = np.arange(<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>/num_samples)</div><div class="line"></div><div class="line"># Plot data</div><div class="line">plt.plot(<span class="built_in">time</span>, strain[:num_samples])</div><div class="line">plt.xlabel(<span class="symbol">'GPS</span> <span class="built_in">Time</span> (s)')</div><div class="line">plt.ylabel(<span class="symbol">'strain</span>')</div><div class="line">plt.show()</div></pre></td></tr></table></figure></p>
<h3 id="MATLAB文件"><a href="#MATLAB文件" class="headerlink" title="MATLAB文件"></a>MATLAB文件</h3><p>所需要的包都已经预先加载完成了，其实我不知道这个是要画出来干嘛的……<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"># <span class="keyword">Print</span> the <span class="built_in">keys</span> of the MATLAB dictionary</div><div class="line"><span class="keyword">print</span>(<span class="keyword">mat</span>.<span class="built_in">keys</span>())</div><div class="line"></div><div class="line"># <span class="keyword">Print</span> the <span class="built_in">type</span> of the value corresponding <span class="keyword">to</span> the key <span class="string">'CYratioCyt'</span></div><div class="line"><span class="keyword">print</span>(<span class="built_in">type</span>(<span class="keyword">mat</span>[<span class="string">'CYratioCyt'</span>]))</div><div class="line"></div><div class="line"># <span class="keyword">Print</span> the shape of the value corresponding <span class="keyword">to</span> the key <span class="string">'CYratioCyt'</span>这个地方注意一下要用`np.shape()`</div><div class="line"><span class="keyword">print</span>(np.shape(<span class="keyword">mat</span>[<span class="string">'CYratioCyt'</span>]))</div><div class="line"></div><div class="line"># Subset the array <span class="built_in">and</span> plot it</div><div class="line">data = <span class="keyword">mat</span>[<span class="string">'CYratioCyt'</span>][<span class="number">25</span>, <span class="number">5</span>:]</div><div class="line">fig = plt.figure()</div><div class="line">plt.plot(data)</div><div class="line">plt.xlabel(<span class="string">'time (min.)'</span>)</div><div class="line">plt.ylabel(<span class="string">'normalized fluorescence (measure of expression)'</span>)</div><div class="line">plt.show()</div></pre></td></tr></table></figure></p>
<p><em>2018-01-22</em></p>
<h2 id="Working-with-relational-databases-in-Pytho-Working-with-relational-databases-in-Python"><a href="#Working-with-relational-databases-in-Pytho-Working-with-relational-databases-in-Python" class="headerlink" title="Working with relational databases in Pytho Working with relational databases in Python"></a>Working with relational databases in Pytho Working with relational databases in Python</h2><p>什么是关系型数据库？记得大学第一门计算机课讲sql语言就讲到了这个。</p>
<ul>
<li>tables（三种：ordered tables, customer tables, employee tables）</li>
<li>tables are linked<br>三种管理关系型数据的是</li>
<li>postgreSQL</li>
<li>MySQL</li>
<li>SQLite<h3 id="create-engine-and-print-table-names"><a href="#create-engine-and-print-table-names" class="headerlink" title="create engine and print table_names"></a>create engine and print table_names</h3>记一下语法<figure class="highlight livescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Import necessary module</span></div><div class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> create_engine</div><div class="line"></div><div class="line"><span class="comment"># Create engine: engine</span></div><div class="line">engine=create_engine(<span class="string">'sqlite:///Chinook.sqlite'</span>)</div><div class="line"></div><div class="line"><span class="comment"># Save the table names to a list: table_names</span></div><div class="line">table_names=engine.table_names()</div><div class="line"></div><div class="line"><span class="comment"># Print the table names to the shell</span></div><div class="line"><span class="built_in">print</span>(table_names)</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="Querying-relational-databases-in-Python"><a href="#Querying-relational-databases-in-Python" class="headerlink" title="Querying relational databases in Python"></a>Querying relational databases in Python</h3><p>SQL的hello world<br>下面这几个步骤是最基本的workflow<br><figure class="highlight vala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="meta"># Import packages</span></div><div class="line">from sqlalchemy import create_engine</div><div class="line">import pandas as pd</div><div class="line"></div><div class="line"><span class="meta"># Create engine: engine</span></div><div class="line">engine = create_engine(<span class="string">'sqlite:///Chinook.sqlite'</span>)</div><div class="line"></div><div class="line"><span class="meta"># Open engine connection: con</span></div><div class="line">con=engine.connect()</div><div class="line"></div><div class="line"><span class="meta"># Perform query: rs 记住这个选择语句</span></div><div class="line">rs = con.execute(<span class="string">"SELECT * FROM Album"</span>)</div><div class="line"></div><div class="line"><span class="meta"># Save results of the query to DataFrame: df</span></div><div class="line">df = pd.DataFrame(rs.fetchall())</div><div class="line"></div><div class="line"><span class="meta"># Close connection</span></div><div class="line">con.close()</div><div class="line"></div><div class="line"><span class="meta"># Print head of DataFrame df</span></div><div class="line">print(df.head())</div></pre></td></tr></table></figure></p>
<p>做完上一步，紧接着来继续querying<br><figure class="highlight nix"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Open engine in context manager</span></div><div class="line"><span class="comment"># Perform query and save results to DataFrame: df</span></div><div class="line"><span class="keyword">with</span> engine.connect() as con:</div><div class="line">    <span class="attr">rs</span> = con.execute(<span class="string">"SELECT LastName, Title FROM Employee"</span>)</div><div class="line">    <span class="attr">df</span> = pd.DataFrame(rs.fetchmany(<span class="attr">size=3))</span></div><div class="line">    df.<span class="attr">columns</span> = rs.keys()</div><div class="line"></div><div class="line"><span class="comment"># Print the length of the DataFrame df</span></div><div class="line">print(len(df))</div><div class="line"></div><div class="line"><span class="comment"># Print the head of the DataFrame df</span></div><div class="line">print(df.head())</div></pre></td></tr></table></figure></p>
<p>搜索时加了一个条件<code>WHERE</code><br><figure class="highlight nix"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Create engine: engine</span></div><div class="line"><span class="attr">engine</span> = create_engine('sqlite:///Chinook.sqlite')</div><div class="line"></div><div class="line"><span class="comment"># Open engine in context manager</span></div><div class="line"><span class="comment"># Perform query and save results to DataFrame: df</span></div><div class="line"><span class="keyword">with</span> engine.connect() as con:</div><div class="line">    <span class="attr">rs</span> = con.execute(<span class="string">"SELECT * FROM Employee WHERE EmployeeId&gt;=6"</span>)</div><div class="line">    <span class="attr">df</span> = pd.DataFrame(rs.fetchall())</div><div class="line">    df.<span class="attr">columns</span> = rs.keys() <span class="comment"># 这句我第一遍写错了写成了df.keys()</span></div><div class="line"></div><div class="line"><span class="comment"># Print the head of the DataFrame df</span></div><div class="line">print(df.head())</div></pre></td></tr></table></figure></p>
<p>接下来是加上排序的条件ORDER<br><figure class="highlight nix"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Create engine: engine</span></div><div class="line"><span class="attr">engine=create_engine("sqlite:///Chinook.sqlite")</span></div><div class="line"></div><div class="line"><span class="comment"># Open engine in context manager</span></div><div class="line"><span class="keyword">with</span> engine.connect() as con:</div><div class="line">    <span class="attr">rs</span> = con.execute(<span class="string">"SELECT * FROM Employee ORDER BY BirthDate"</span>)</div><div class="line">    <span class="attr">df</span> = pd.DataFrame(rs.fetchall())</div><div class="line"></div><div class="line">    <span class="comment"># Set the DataFrame's column names</span></div><div class="line">    df.<span class="attr">columns=rs.keys()</span></div><div class="line"></div><div class="line"><span class="comment"># Print head of DataFrame</span></div><div class="line">print(df.head())</div></pre></td></tr></table></figure></p>
<h3 id="The-Power-of-Pandas"><a href="#The-Power-of-Pandas" class="headerlink" title="The Power of Pandas"></a>The Power of Pandas</h3><p>此处应该有配音——神秘的光之力量啊！<br>上面写了那么多，其实可以只用一行<br>下面就让你看看一行是怎么写的……<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Import packages</span></div><div class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> create_engine</div><div class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div><div class="line"></div><div class="line"><span class="comment"># Create engine: engine</span></div><div class="line">engine=create_engine(<span class="string">"sqlite:///Chinook.sqlite"</span>)</div><div class="line"></div><div class="line"><span class="comment"># Execute query and store records in DataFrame: df 重点就在这里</span></div><div class="line">df = pd.read_sql_query(<span class="string">"SELECT * FROM Album"</span>, engine)</div><div class="line"></div><div class="line"><span class="comment"># Print head of DataFrame</span></div><div class="line">print(df.head())</div><div class="line"></div><div class="line"><span class="comment"># Open engine in context manager</span></div><div class="line"><span class="comment"># Perform query and save results to DataFrame: df1</span></div><div class="line"><span class="keyword">with</span> engine.connect() <span class="keyword">as</span> con:</div><div class="line">    rs = con.execute(<span class="string">"SELECT * FROM Album"</span>)</div><div class="line">    df1 = pd.DataFrame(rs.fetchall())</div><div class="line">    df1.columns = rs.keys()</div><div class="line"></div><div class="line"><span class="comment"># Confirm that both methods yield the same result: does df = df1 ?</span></div><div class="line">print(df.equals(df1))</div></pre></td></tr></table></figure></p>
<p>让你们看看什么是十句话用一句说完 <code>WHERE</code>和<code>ORDER BY</code>都在这里了<br><figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="meta"># Import packages</span></div><div class="line"><span class="title">from</span> sqlalchemy <span class="keyword">import</span> create_engine</div><div class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div><div class="line"></div><div class="line"><span class="meta"># Create engine: engine</span></div><div class="line"><span class="title">engine</span>=create_engine(<span class="string">"sqlite:///Chinook.sqlite"</span>)</div><div class="line"></div><div class="line"><span class="meta"># Execute query and store records in DataFrame: df 不用加AND</span></div><div class="line"><span class="title">df</span>=pd.read_sql_query(<span class="string">"SELECT * FROM Employee WHERE EmployeeId&gt;=6 ORDER BY BirthDate"</span>, engine)</div><div class="line"></div><div class="line"><span class="meta"># Print head of DataFrame</span></div><div class="line"><span class="title">print</span>(df.head())</div></pre></td></tr></table></figure></p>
<h3 id="进阶版-JOIN"><a href="#进阶版-JOIN" class="headerlink" title="进阶版 JOIN"></a>进阶版 JOIN</h3><p>如何把两个table连接到一起？找出它们相同的那一列<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"># Open engine in context manager</div><div class="line"># Perform query <span class="built_in">and</span> save results <span class="keyword">to</span> DataFrame: df</div><div class="line">with engine.connect() <span class="keyword">as</span> <span class="keyword">con</span>:</div><div class="line">    rs=<span class="keyword">con</span>.<span class="keyword">execute</span>(<span class="string">"SELECT Title, Name FROM Album INNER JOIN Artist on Album.ArtistID=Artist.ArtistID"</span>)</div><div class="line">    df=pd.DataFrame(rs.fetchall())</div><div class="line">    df.columns=rs.<span class="built_in">keys</span>()</div><div class="line"></div><div class="line"># <span class="keyword">Print</span> head of DataFrame df</div><div class="line"><span class="keyword">print</span>(df.head())</div></pre></td></tr></table></figure></p>
<p>然后再把上面的一段话改成一句话<br><figure class="highlight erlang"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"># Execute <span class="keyword">query</span> <span class="keyword">and</span> store records in DataFrame: df 注意一下，我在这个地方总是不记得加`engine`</div><div class="line">df=pd.read_sql_query(<span class="string">"SELECT * FROM PlaylistTrack INNER JOIN Track on PlaylistTrack.TrackId=Track.TrackId WHERE Milliseconds&lt;250000"</span>, engine)</div><div class="line"></div><div class="line"># Print head <span class="keyword">of</span> DataFrame</div><div class="line"><span class="function"><span class="title">print</span><span class="params">(df.head())</span></span></div></pre></td></tr></table></figure></p>
<p><em>2018-01-23</em><br>刚刚写了半天没有保存……心痛</p>
<h1 id="Importing-Data-in-Python-Part-2"><a href="#Importing-Data-in-Python-Part-2" class="headerlink" title="Importing Data in Python (Part 2)"></a>Importing Data in Python (Part 2)</h1><h2 id="Importing-data-from-the-Internet"><a href="#Importing-data-from-the-Internet" class="headerlink" title="Importing data from the Internet"></a>Importing data from the Internet</h2><h3 id="Flat-Files"><a href="#Flat-Files" class="headerlink" title="Flat Files"></a>Flat Files</h3><p>前面讲了如何把网上数据存到本地，然后再用pandas打开读取<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Import package</span></div><div class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div><div class="line"></div><div class="line"><span class="comment"># Assign url of file: url</span></div><div class="line">url=<span class="string">'http://s3.amazonaws.com/assets.datacamp.com/course/importing_data_into_r/latitude.xls'</span></div><div class="line"></div><div class="line"><span class="comment"># Read in all sheets of Excel file: xl</span></div><div class="line">xl=pd.read_excel(url,sheetname=<span class="keyword">None</span>)</div><div class="line"></div><div class="line"><span class="comment"># Print the sheetnames to the shell</span></div><div class="line">print(xl.keys())</div><div class="line"></div><div class="line"><span class="comment"># Print the head of the first sheet (using its name, NOT its index) 难以置信误打误撞写对了……</span></div><div class="line">print(xl[<span class="string">'1700'</span>].head())</div></pre></td></tr></table></figure></p>
<h3 id="HTTP-requests"><a href="#HTTP-requests" class="headerlink" title="HTTP requests"></a>HTTP requests</h3><p>当年第一个爬虫就是用的这个包……<br><figure class="highlight vbscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"># Import packages</div><div class="line">from urllib.<span class="built_in">request</span> import urlopen, <span class="built_in">Request</span></div><div class="line"></div><div class="line"># Specify the url</div><div class="line">url = <span class="string">"http://www.datacamp.com/teach/documentation"</span></div><div class="line"></div><div class="line"># This packages the <span class="built_in">request</span>: <span class="built_in">request</span></div><div class="line"><span class="built_in">request</span>=<span class="built_in">Request</span>(url)</div><div class="line"></div><div class="line"># Sends the <span class="built_in">request</span> <span class="keyword">and</span> catches the <span class="built_in">response</span>: <span class="built_in">response</span></div><div class="line"><span class="built_in">response</span>=urlopen(<span class="built_in">request</span>)</div><div class="line"></div><div class="line"># Print the datatype of <span class="built_in">response</span></div><div class="line">print(type(<span class="built_in">response</span>))</div><div class="line"></div><div class="line"># Be polite <span class="keyword">and</span> close the <span class="built_in">response</span>!</div><div class="line"><span class="built_in">response</span>.close()</div></pre></td></tr></table></figure></p>
<p>下面用到了<code>text</code>这个属性<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Import package</span></div><div class="line">import requests</div><div class="line"></div><div class="line"><span class="comment"># Specify the url: url</span></div><div class="line">url=<span class="string">"http://www.datacamp.com/teach/documentation"</span></div><div class="line"></div><div class="line"><span class="comment"># Packages the request, send the request and catch the response: r</span></div><div class="line">r=requests.<span class="keyword">get</span>(url)</div><div class="line"></div><div class="line"><span class="comment"># Extract the response: text 这里又是蒙的</span></div><div class="line"><span class="built_in">text</span>=r.<span class="built_in">text</span></div><div class="line"></div><div class="line"><span class="comment"># Print the html</span></div><div class="line">print(<span class="built_in">text</span>)</div></pre></td></tr></table></figure></p>
<h3 id="Scraping-the-web"><a href="#Scraping-the-web" class="headerlink" title="Scraping the web"></a>Scraping the web</h3><p>又见到了beautifulsoup<br>这一步是让页面变得更好看<br><figure class="highlight nix"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Import packages</span></div><div class="line"><span class="built_in">import</span> requests</div><div class="line">from bs4 <span class="built_in">import</span> BeautifulSoup</div><div class="line"></div><div class="line"><span class="comment"># Specify url: url</span></div><div class="line"><span class="attr">url='https://www.python.org/~guido/'</span></div><div class="line"></div><div class="line"><span class="comment"># Package the request, send the request and catch the response: r</span></div><div class="line"><span class="attr">r=requests.get(url)</span></div><div class="line"></div><div class="line"><span class="comment"># Extracts the response as html: html_doc</span></div><div class="line"><span class="attr">html_doc=r.text</span></div><div class="line"></div><div class="line"><span class="comment"># Create a BeautifulSoup object from the HTML: soup</span></div><div class="line"><span class="attr">soup=BeautifulSoup(html_doc)</span></div><div class="line"></div><div class="line"><span class="comment"># Prettify the BeautifulSoup object: pretty_soup</span></div><div class="line"><span class="attr">pretty_soup=soup.prettify()</span></div><div class="line"></div><div class="line"><span class="comment"># Print the response</span></div><div class="line">print(pretty_soup)</div></pre></td></tr></table></figure></p>
<p>接着就是获取页面中的<code>text</code><br><figure class="highlight nix"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Import packages</span></div><div class="line"><span class="built_in">import</span> requests</div><div class="line">from bs4 <span class="built_in">import</span> BeautifulSoup</div><div class="line"></div><div class="line"><span class="comment"># Specify url: url</span></div><div class="line"><span class="attr">url</span> = 'https://www.python.org/~guido/'</div><div class="line"></div><div class="line"><span class="comment"># Package the request, send the request and catch the response: r</span></div><div class="line"><span class="attr">r</span> = requests.get(url)</div><div class="line"></div><div class="line"><span class="comment"># Extract the response as html: html_doc</span></div><div class="line"><span class="attr">html_doc</span> = r.text</div><div class="line"></div><div class="line"><span class="comment"># Create a BeautifulSoup object from the HTML: soup</span></div><div class="line"><span class="attr">soup=BeautifulSoup(html_doc)</span></div><div class="line"></div><div class="line"><span class="comment"># Get the title of Guido's webpage: guido_title</span></div><div class="line"><span class="attr">guido_title=soup.title</span></div><div class="line"></div><div class="line"><span class="comment"># Print the title of Guido's webpage to the shell</span></div><div class="line">print(guido_title)</div><div class="line"></div><div class="line"><span class="comment"># Get Guido's text: guido_text</span></div><div class="line"><span class="attr">guido_text=soup.get_text()</span></div><div class="line"></div><div class="line"><span class="comment"># Print Guido's text to the shell</span></div><div class="line">print(guido_text)</div></pre></td></tr></table></figure></p>
<p>找到所有的超链接<br><figure class="highlight livescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Import packages</span></div><div class="line"><span class="keyword">import</span> requests</div><div class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</div><div class="line"></div><div class="line"><span class="comment"># Specify url</span></div><div class="line">url = <span class="string">'https://www.python.org/~guido/'</span></div><div class="line"></div><div class="line"><span class="comment"># Package the request, send the request and catch the response: r</span></div><div class="line">r = requests.get(url)</div><div class="line"></div><div class="line"><span class="comment"># Extracts the response as html: html_doc</span></div><div class="line">html_doc = r.text</div><div class="line"></div><div class="line"><span class="comment"># create a BeautifulSoup object from the HTML: soup</span></div><div class="line">soup = BeautifulSoup(html_doc)</div><div class="line"></div><div class="line"><span class="comment"># Print the title of Guido's webpage</span></div><div class="line"><span class="built_in">print</span>(soup.title)</div><div class="line"></div><div class="line"><span class="comment"># Find all 'a' tags (which define hyperlinks): a_tags</span></div><div class="line">a_tags=soup.find_all(<span class="string">'a'</span>)</div><div class="line"></div><div class="line"><span class="comment"># Print the URLs to the shell</span></div><div class="line"><span class="keyword">for</span> link <span class="keyword">in</span> a_tags:</div><div class="line">    <span class="built_in">print</span>(link.get(<span class="string">'href'</span>))</div></pre></td></tr></table></figure></p>
<h2 id="Interacting-with-APIs-to-import-data-from-the-web"><a href="#Interacting-with-APIs-to-import-data-from-the-web" class="headerlink" title="Interacting with APIs to import data from the web"></a>Interacting with APIs to import data from the web</h2><h3 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h3><p>注意一下如何输出json内容<br><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Load JSON: json_data</span></div><div class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">"a_movie.json"</span>) <span class="keyword">as</span> json_file:</div><div class="line">    json_data=json.<span class="built_in">load</span>(json_file)</div><div class="line"></div><div class="line"><span class="comment"># Print each key-value pair in json_data</span></div><div class="line"><span class="keyword">for</span> k <span class="keyword">in</span> json_data.<span class="built_in">keys</span>():</div><div class="line">    print(k + <span class="string">': '</span>, json_data[k])</div></pre></td></tr></table></figure></p>
<h3 id="API"><a href="#API" class="headerlink" title="API"></a>API</h3><p>三步走：connecting, pulling, parsing<br><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Import requests package</span></div><div class="line">import requests</div><div class="line"></div><div class="line"><span class="comment"># Assign URL to variable: url 注意一下这里，有一个(?)</span></div><div class="line">url=<span class="string">'http://www.omdbapi.com/?apikey=ff21610b&amp;t=social+network'</span></div><div class="line"></div><div class="line"><span class="comment"># Package the request, send the request and catch the response: r</span></div><div class="line">r = requests.<span class="built_in">get</span>(url)</div><div class="line"></div><div class="line"><span class="comment"># Print the text of the response</span></div><div class="line">print(r.<span class="keyword">text</span>)</div></pre></td></tr></table></figure></p>
<p>前面输出了beautifulsoup<br><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Import package</span></div><div class="line">import requests</div><div class="line"></div><div class="line"><span class="comment"># Assign URL to variable: url</span></div><div class="line">url = <span class="string">'http://www.omdbapi.com/?apikey=ff21610b&amp;t=social+network'</span></div><div class="line"></div><div class="line"><span class="comment"># Package the request, send the request and catch the response: r</span></div><div class="line">r=requests.<span class="built_in">get</span>(url)</div><div class="line"></div><div class="line"><span class="comment"># Decode the JSON data into a dictionary: json_data</span></div><div class="line">json_data=r.json()</div><div class="line"></div><div class="line"><span class="comment"># Print each key-value pair in json_data</span></div><div class="line"><span class="keyword">for</span> k <span class="keyword">in</span> json_data.<span class="built_in">keys</span>():</div><div class="line">    print(k + <span class="string">': '</span>, json_data[k])</div></pre></td></tr></table></figure></p>
<h2 id="Diving-deep-into-the-Twitter-API"><a href="#Diving-deep-into-the-Twitter-API" class="headerlink" title="Diving deep into the Twitter API"></a>Diving deep into the Twitter API</h2><p>先授权，然后开始streaming tweets<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"># <span class="type">Initialize</span> <span class="type">Stream</span> listener</div><div class="line">l = <span class="type">MyStreamListener</span>()</div><div class="line"></div><div class="line"># <span class="type">Create</span> you <span class="type">Stream</span> <span class="class"><span class="keyword">object</span> <span class="keyword">with</span> <span class="title">authentication</span></span></div><div class="line">stream = tweepy.<span class="type">Stream</span>(auth, l)</div><div class="line"></div><div class="line"></div><div class="line"># <span class="type">Filter</span> <span class="type">Twitter</span> <span class="type">Streams</span> to capture data by the keywords:</div><div class="line">stream.filter(track=[<span class="symbol">'clinto</span>n',<span class="symbol">'trum</span>p',<span class="symbol">'sander</span>s',<span class="symbol">'cru</span>z'])</div></pre></td></tr></table></figure></p>
<p>开始写入数据<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"># Import package</div><div class="line">import json</div><div class="line"></div><div class="line"># String of path <span class="keyword">to</span> <span class="keyword">file</span>: tweets_data_path</div><div class="line">tweets_data_path=<span class="string">'tweets.txt'</span></div><div class="line"></div><div class="line"># Initialize <span class="built_in">empty</span> <span class="keyword">list</span> <span class="keyword">to</span> store tweet<span class="variable">s:</span> tweets_data</div><div class="line">tweets_data=<span class="keyword">list</span>()</div><div class="line"></div><div class="line"># Open connection <span class="keyword">to</span> <span class="keyword">file</span></div><div class="line">tweets_file = <span class="keyword">open</span>(tweets_data_path, <span class="string">"r"</span>)</div><div class="line"></div><div class="line"># Read in tweets <span class="built_in">and</span> store in lis<span class="variable">t:</span> tweets_data</div><div class="line"><span class="keyword">for</span> <span class="built_in">line</span> in tweets_file:</div><div class="line">    tweet=json.loads(<span class="built_in">line</span>)</div><div class="line">    tweets_data.<span class="keyword">append</span>(tweet)</div><div class="line"></div><div class="line"># Close connection <span class="keyword">to</span> <span class="keyword">file</span></div><div class="line">tweets_file.<span class="keyword">close</span>()</div><div class="line"></div><div class="line"># <span class="keyword">Print</span> the <span class="built_in">keys</span> of the <span class="keyword">first</span> tweet dict</div><div class="line"><span class="keyword">print</span>(tweets_data[<span class="number">0</span>].<span class="built_in">keys</span>())</div></pre></td></tr></table></figure></p>
<p>用上了pandas，存成DataFrame<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Import package</span></div><div class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div><div class="line"></div><div class="line"><span class="comment"># Build DataFrame of tweet texts and languages</span></div><div class="line">df = pd.DataFrame(tweets_data, columns=[<span class="string">'text'</span>,<span class="string">'lang'</span>])</div><div class="line"></div><div class="line"><span class="comment"># Print head of DataFrame</span></div><div class="line">print(df.head())</div></pre></td></tr></table></figure></p>
<p>接下来是一点小应用，比如计算几个关键词分别在搜索结果中出现了多少次<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Initialize list to store tweet counts</span></div><div class="line">[clinton, trump, sanders, cruz] = [0, 0, 0, 0]</div><div class="line"></div><div class="line"><span class="comment"># Iterate through df, counting the number of tweets in which</span></div><div class="line"><span class="comment"># each candidate is mentioned</span></div><div class="line"><span class="keyword">for</span> index, row <span class="keyword">in</span> df.iterrows():</div><div class="line">    clinton += word_<span class="keyword">in</span>_text(<span class="string">'clinton'</span>, row[<span class="string">'text'</span>])</div><div class="line">    trump += word_<span class="keyword">in</span>_text(<span class="string">'trump'</span>, row[<span class="string">'text'</span>])</div><div class="line">    sanders += word_<span class="keyword">in</span>_text(<span class="string">'sanders'</span>, row[<span class="string">'text'</span>])</div><div class="line">    cruz += word_<span class="keyword">in</span>_text(<span class="string">'cruz'</span>, row[<span class="string">'text'</span>])</div></pre></td></tr></table></figure></p>
<p>画图<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Import packages</span></div><div class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</div><div class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># Set seaborn style</span></div><div class="line">sns.set(color_codes=<span class="keyword">True</span>)</div><div class="line"></div><div class="line"><span class="comment"># Create a list of labels:cd</span></div><div class="line">cd = [<span class="string">'clinton'</span>, <span class="string">'trump'</span>, <span class="string">'sanders'</span>, <span class="string">'cruz'</span>]</div><div class="line"></div><div class="line"><span class="comment"># Plot histogram 第二个参数其实就是条形图的名字，不用加引号</span></div><div class="line">ax = sns.barplot(cd,[clinton, trump, sanders, cruz])</div><div class="line">ax.set(ylabel=<span class="string">"count"</span>)</div><div class="line">plt.show()</div></pre></td></tr></table></figure></p>
<p><em>2018-01-24</em></p>
<h1 id="Cleaning-Data-in-Python"><a href="#Cleaning-Data-in-Python" class="headerlink" title="Cleaning Data in Python"></a>Cleaning Data in Python</h1><h2 id="Exploring-your-data"><a href="#Exploring-your-data" class="headerlink" title="Exploring your data"></a>Exploring your data</h2><p>常见的数据问题</p>
<ul>
<li>inconsistent column names</li>
<li>missing data</li>
<li>outliers</li>
<li>duplicate rows</li>
<li>untidy</li>
<li>need to process columns</li>
<li>column types can signal unexpected data values<br>几个常用的method：<code>columns（每一列的名称）``shape（是个几行几列的表）``info()（具体信息，包括每一列的有效数据等等）</code><br>这一章比较像数据分析……<br>鉴定完毕，真的就是statistics啊！<br>下面画图给你看<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Import matplotlib.pyplot</span></div><div class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</div><div class="line"></div><div class="line"><span class="comment"># Plot the histogram</span></div><div class="line">df[<span class="string">'Existing Zoning Sqft'</span>].plot(kind=<span class="string">'hist'</span>, rot=<span class="number">70</span>, logx=<span class="keyword">True</span>, logy=<span class="keyword">True</span>)</div><div class="line"></div><div class="line"><span class="comment"># Display the histogram</span></div><div class="line">plt.show()</div></pre></td></tr></table></figure>
</li>
</ul>
<p>接下来画箱形图给你看<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Import necessary modules</span></div><div class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div><div class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</div><div class="line"></div><div class="line"><span class="comment"># Create the boxplot</span></div><div class="line">df.boxplot(column=<span class="string">'initial_cost'</span>, by=<span class="string">'Borough'</span>, rot=<span class="number">90</span>)</div><div class="line"></div><div class="line"><span class="comment"># Display the plot</span></div><div class="line">plt.show()</div></pre></td></tr></table></figure></p>
<p>画散点图给你看（我把这些代码贴出来有什么意义啊……<br><figure class="highlight nix"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Import necessary modules</span></div><div class="line"><span class="built_in">import</span> pandas as pd</div><div class="line"><span class="built_in">import</span> matplotlib.pyplot as plt</div><div class="line"></div><div class="line"><span class="comment"># Create and display the first scatter plot</span></div><div class="line">df.plot(<span class="attr">kind='scatter',</span> <span class="attr">x='initial_cost',</span> <span class="attr">y='total_est_fee',</span> <span class="attr">rot=70)</span></div><div class="line">plt.show()</div><div class="line"></div><div class="line"><span class="comment"># Create and display the second scatter plot</span></div><div class="line">df_subset.plot(<span class="attr">kind='scatter',</span> <span class="attr">x='initial_cost',</span> <span class="attr">y='total_est_fee',</span> <span class="attr">rot=70)</span></div><div class="line">plt.show()</div></pre></td></tr></table></figure></p>
<p><em>2018-01-27</em></p>
<h2 id="Tidying-data-for-analysis"><a href="#Tidying-data-for-analysis" class="headerlink" title="Tidying data for analysis"></a>Tidying data for analysis</h2><h3 id="Tidying-data"><a href="#Tidying-data" class="headerlink" title="Tidying data"></a>Tidying data</h3><p>三大原则：</p>
<ul>
<li>columns represent separate variables</li>
<li>rows represent individual observations</li>
<li>observational units form tables<br>不过我忘了这三大原则是说整理前还是整理后了……<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Print the head of airquality</span></div><div class="line"><span class="built_in">print</span>(airquality.head())</div><div class="line"></div><div class="line"><span class="comment"># Melt airquality: airquality_melt 后面还有两个变量，我不记得是不是这么写了了</span></div><div class="line">airquality_melt = pd.melt(df, id_vars=[<span class="string">'Month'</span>, <span class="string">'Day'</span>], vars_names=<span class="string">'measurement'</span>, value_names=<span class="string">'reading'</span>)</div><div class="line"></div><div class="line"><span class="comment"># Print the head of airquality_melt</span></div><div class="line"><span class="built_in">print</span>(airquality_melt.head())</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="Pivoting-data"><a href="#Pivoting-data" class="headerlink" title="Pivoting data"></a>Pivoting data</h3><p>这一节没看懂啊<br><figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Print the head of airquality_melt</span></div><div class="line"><span class="keyword">print</span>(airquality_melt.head())</div><div class="line"></div><div class="line"><span class="comment"># Pivot airquality_melt: airquality_pivot 注意一下，这里用的不是pandas这个包</span></div><div class="line">airquality_pivot = airquality_melt.pivot_table(<span class="keyword">index</span>=[<span class="string">'Month'</span>, <span class="string">'Day'</span>], columns=<span class="string">'measurement'</span>, <span class="keyword">values</span>=<span class="string">'reading'</span>)</div><div class="line"></div><div class="line"><span class="comment"># Print the head of airquality_pivot</span></div><div class="line"><span class="keyword">print</span>(airquality_pivot.head())</div></pre></td></tr></table></figure></p>
<p>重置索引<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"># <span class="keyword">Print</span> the <span class="built_in">index</span> of airquality_pivot</div><div class="line"><span class="keyword">print</span>(airquality_pivot.<span class="built_in">index</span>)</div><div class="line"></div><div class="line"># Reset the <span class="built_in">index</span> of airquality_pivo<span class="variable">t:</span> airquality_pivot</div><div class="line">airquality_pivot = airquality_pivot.reset_index()</div><div class="line"></div><div class="line"># <span class="keyword">Print</span> the <span class="keyword">new</span> <span class="built_in">index</span> of airquality_pivot</div><div class="line"><span class="keyword">print</span>(airquality_pivot.<span class="built_in">index</span>)</div><div class="line"></div><div class="line"># <span class="keyword">Print</span> the head of airquality_pivot</div><div class="line"><span class="keyword">print</span>(airquality_pivot.head())</div></pre></td></tr></table></figure></p>
<p>复制表格<br><figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Pivot airquality_dup: airquality_pivot</span></div><div class="line">airquality_pivot = airquality_dup.pivot_table(<span class="keyword">index</span>=[<span class="string">'Month'</span>, <span class="string">'Day'</span>], columns=<span class="string">'measurement'</span>, <span class="keyword">values</span>=<span class="string">'reading'</span>, aggfunc=np.mean)</div><div class="line"></div><div class="line"><span class="comment"># Reset the index of airquality_pivot</span></div><div class="line">airquality_pivot = airquality_pivot.reset_index()</div><div class="line"></div><div class="line"><span class="comment"># Print the head of airquality_pivot</span></div><div class="line"><span class="keyword">print</span>(airquality_pivot.head())</div><div class="line"></div><div class="line"><span class="comment"># Print the head of airquality</span></div><div class="line"><span class="keyword">print</span>(airquality.head())</div></pre></td></tr></table></figure></p>
<p>除了上面所说的之外，还有</p>
<h3 id="Spliting-data"><a href="#Spliting-data" class="headerlink" title="Spliting data"></a>Spliting data</h3><p>先看简易版拆分<br><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Melt tb: tb_melt</span></div><div class="line">tb_melt = pd.melt(df, id_vars=[<span class="string">'country'</span>, <span class="string">'year'</span>])</div><div class="line"></div><div class="line"><span class="comment"># Create the 'gender' column 这个地方我真的是靠猜啊！这不就是list的切片吗……可是谁知道要填这个，这种写法还是不够智能</span></div><div class="line">tb_melt[<span class="string">'gender'</span>] = tb_melt.<span class="built_in">variable</span>.str[<span class="number">0</span>]</div><div class="line"></div><div class="line"><span class="comment"># Create the 'age_group' column</span></div><div class="line">tb_melt[<span class="string">'age_group'</span>] = tb_melt.<span class="built_in">variable</span>.str[<span class="number">1</span>:]</div><div class="line"></div><div class="line"><span class="comment"># Print the head of tb_melt</span></div><div class="line">print(tb_melt.head())</div></pre></td></tr></table></figure></p>
<p>进阶版<br><figure class="highlight processing"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"># Melt ebola: ebola_melt</div><div class="line">ebola_melt = pd.melt(ebola, id_vars=[<span class="string">'Date'</span>, <span class="string">'Day'</span>], var_name=<span class="string">'type_country'</span>, value_name=<span class="string">'counts'</span>)</div><div class="line"></div><div class="line"># Create the <span class="string">'str_split'</span> column  这个地方我写错了，我脑海中总是想着嵌套嵌套</div><div class="line">ebola_melt[<span class="string">'str_split'</span>] = ebola_melt.type_country.<span class="built_in">str</span>.<span class="built_in">split</span>(<span class="string">'_'</span>)</div><div class="line"></div><div class="line"># Create the <span class="string">'type'</span> column 所以这里的<span class="built_in">str</span>.<span class="built_in">get</span>(<span class="number">0</span>)=<span class="built_in">str</span>[<span class="number">0</span>] ？为何如此简单</div><div class="line">ebola_melt[<span class="string">'type'</span>] = ebola_melt.str_split.<span class="built_in">str</span>.<span class="built_in">get</span>(<span class="number">0</span>)</div><div class="line"></div><div class="line"># Create the <span class="string">'country'</span> column</div><div class="line">ebola_melt[<span class="string">'country'</span>] = ebola_melt.str_split.<span class="built_in">str</span>.<span class="built_in">get</span>(<span class="number">1</span>)</div><div class="line"></div><div class="line"># Print the head of ebola_melt</div><div class="line"><span class="built_in">print</span>(ebola_melt.head())</div></pre></td></tr></table></figure></p>
<p><em>2018-01-28</em></p>
<h2 id="Combining-data-for-analysis"><a href="#Combining-data-for-analysis" class="headerlink" title="Combining data for analysis"></a>Combining data for analysis</h2><h3 id="Concatenating-data"><a href="#Concatenating-data" class="headerlink" title="Concatenating data"></a>Concatenating data</h3><p>结构相同的两个表格连接在一起<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Concatenate uber1, uber2, and uber3: row_concat</span></div><div class="line">row_concat = pd.concat([uber1,uber2,uber3])</div><div class="line"></div><div class="line"><span class="comment"># Print the shape of row_concat</span></div><div class="line"><span class="built_in">print</span>(row_concat.shape)</div><div class="line"></div><div class="line"><span class="comment"># Print the head of row_concat</span></div><div class="line"><span class="built_in">print</span>(row_concat.head())</div></pre></td></tr></table></figure></p>
<p><em>2018-02-01</em></p>
<h3 id="Finding-data"><a href="#Finding-data" class="headerlink" title="Finding data"></a>Finding data</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Import necessary modules</span></div><div class="line"><span class="keyword">import</span> glob</div><div class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div><div class="line"></div><div class="line"><span class="comment"># Write the pattern: pattern</span></div><div class="line">pattern = <span class="string">'*.csv'</span></div><div class="line"></div><div class="line"><span class="comment"># Save all file matches: csv_files</span></div><div class="line">csv_files = glob.glob(pattern)</div><div class="line"></div><div class="line"><span class="comment"># Print the file names</span></div><div class="line">print(csv_files)</div><div class="line"></div><div class="line"><span class="comment"># Load the second file into a DataFrame: csv2 如果不加这个pd.read_csv()，那么csv2就是str类型的</span></div><div class="line">csv2 = pd.read_csv(csv_files[<span class="number">1</span>])</div><div class="line"></div><div class="line"><span class="comment"># Print the head of csv2</span></div><div class="line">print(csv2.head())</div></pre></td></tr></table></figure>
<h3 id="Concatenating-data-1"><a href="#Concatenating-data-1" class="headerlink" title="Concatenating data"></a>Concatenating data</h3><p>先遍历再添加<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Create an empty list: frames</span></div><div class="line">frames = []</div><div class="line"></div><div class="line"><span class="comment">#  Iterate over csv_files</span></div><div class="line"><span class="keyword">for</span> csv <span class="keyword">in</span> csv_files:</div><div class="line"></div><div class="line">    <span class="comment">#  Read csv into a DataFrame: df</span></div><div class="line">    df = pd.read_csv(csv)</div><div class="line">    </div><div class="line">    <span class="comment"># Append df to frames</span></div><div class="line">    frames.append(df)</div><div class="line"></div><div class="line"><span class="comment"># Concatenate frames into a single DataFrame: uber</span></div><div class="line">uber = pd.concat(frames)</div><div class="line"></div><div class="line"><span class="comment"># Print the shape of uber</span></div><div class="line"><span class="built_in">print</span>(uber.shape)</div><div class="line"></div><div class="line"><span class="comment"># Print the head of uber</span></div><div class="line"><span class="built_in">print</span>(uber.head())</div></pre></td></tr></table></figure></p>
<h3 id="Merge-data"><a href="#Merge-data" class="headerlink" title="Merge data"></a>Merge data</h3><p>三种不同的：</p>
<ul>
<li>一对一</li>
<li>一对多/多对一</li>
<li>多对多<br>首先来看一对一的合并<figure class="highlight nix"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Merge the DataFrames: o2o</span></div><div class="line"><span class="attr">o2o</span> = pd.merge(<span class="attr">left=site,</span> <span class="attr">right=visited,</span> <span class="attr">left_on='name',</span> <span class="attr">right_on='site')</span></div><div class="line"></div><div class="line"><span class="comment"># Print o2o</span></div><div class="line">print(o2o)</div></pre></td></tr></table></figure>
</li>
</ul>
<p>然后是多对一<br><figure class="highlight nix"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Merge the DataFrames: m2o</span></div><div class="line"><span class="attr">m2o</span> = pd.merge(<span class="attr">left=site,</span> <span class="attr">right=visited,</span> <span class="attr">left_on='name',</span> <span class="attr">right_on='site')</span></div><div class="line"></div><div class="line"><span class="comment"># Print m2o</span></div><div class="line">print(m2o)</div></pre></td></tr></table></figure></p>
<p>多对多，这里的“多”和“一”指的是什么？<br><figure class="highlight nix"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Merge site and visited: m2m</span></div><div class="line"><span class="attr">m2m</span> = pd.merge(<span class="attr">left=site,</span> <span class="attr">right=visited,</span> <span class="attr">left_on='name',</span> <span class="attr">right_on='site')</span></div><div class="line"></div><div class="line"><span class="comment"># Merge m2m and survey: m2m</span></div><div class="line"><span class="attr">m2m</span> = pd.merge(<span class="attr">left=m2m,</span> <span class="attr">right=survey,</span> <span class="attr">left_on='ident',</span> <span class="attr">right_on='taken')</span></div><div class="line"></div><div class="line"><span class="comment"># Print the first 20 lines of m2m</span></div><div class="line">print(m2m.head(<span class="number">20</span>))</div></pre></td></tr></table></figure></p>
<p><em>2018-02-02</em></p>
<h2 id="Cleaning-data-for-analysis"><a href="#Cleaning-data-for-analysis" class="headerlink" title="Cleaning data for analysis"></a>Cleaning data for analysis</h2><h2 id="Converting-data"><a href="#Converting-data" class="headerlink" title="Converting data"></a>Converting data</h2><p>先看怎么转成category格式<br><figure class="highlight elm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"># <span class="type">Convert</span> the sex column to <span class="keyword">type</span> 'category'</div><div class="line"><span class="title">tips</span>.sex = tips.sex.<span class="keyword">as</span><span class="keyword">type</span>('category')</div><div class="line"></div><div class="line"># <span class="type">Convert</span> the smoker column to <span class="keyword">type</span> 'category'</div><div class="line"><span class="title">tips</span>.smoker = tips.smoker.<span class="keyword">as</span><span class="keyword">type</span>('category')</div><div class="line"></div><div class="line"># <span class="type">Print</span> the info <span class="keyword">of</span> tips</div><div class="line"><span class="title">print</span>(tips.info())</div></pre></td></tr></table></figure></p>
<p>接下来是转成numeric<br>一般情况下，本来那一列都是表示数字的，但却是object格式，有可能是因为有一个表示空值的符号，你可以找出它，也可以直接忽略它。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Convert 'total_bill' to a numeric dtype</span></div><div class="line">tips[<span class="string">'total_bill'</span>] = pd.to_numeric(tips[<span class="string">'total_bill'</span>], errors=<span class="string">'coerce'</span>)</div><div class="line"></div><div class="line"><span class="comment"># Convert 'tip' to a numeric dtype</span></div><div class="line">tips[<span class="string">'tip'</span>] = pd.to_numeric(tips[<span class="string">'tip'</span>], errors=<span class="string">'coerce'</span>)</div><div class="line"></div><div class="line"><span class="comment"># Print the info of tips</span></div><div class="line"><span class="built_in">print</span>(tips.info())</div></pre></td></tr></table></figure></p>
<h3 id="Regular-Expressions"><a href="#Regular-Expressions" class="headerlink" title="Regular Expressions"></a>Regular Expressions</h3><p>终于讲到正则表达式了，mac上好像有专门写正则的app<br>先写简单的，手机号码<br><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Import the regular expression module</span></div><div class="line">import re</div><div class="line"></div><div class="line"><span class="comment"># Compile the pattern: prog</span></div><div class="line">prog = re.compile(<span class="string">'\d&#123;3&#125;-\d&#123;3&#125;-\d&#123;4&#125;'</span>)</div><div class="line"></div><div class="line"><span class="comment"># See if the pattern matches</span></div><div class="line"><span class="built_in">result</span> = prog.match(<span class="string">'123-456-7890'</span>)</div><div class="line">print(bool(<span class="built_in">result</span>))</div><div class="line"></div><div class="line"><span class="comment"># See if the pattern matches</span></div><div class="line"><span class="built_in">result</span> = prog.match(<span class="string">'1123-456-7890'</span>)</div><div class="line">print(bool(<span class="built_in">result</span>))</div></pre></td></tr></table></figure></p>
<p>在一句话里面找数字<br><figure class="highlight livescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Import the regular expression module</span></div><div class="line"><span class="keyword">import</span> re</div><div class="line"></div><div class="line"><span class="comment"># Find the numeric values: matches 注意一下这个+号，意思是指这个pattern可能出现了好几次</span></div><div class="line">matches = re.findall(<span class="string">'\d+'</span>, <span class="string">'the recipe calls for 10 strawberries and 1 banana'</span>)</div><div class="line"></div><div class="line"><span class="comment"># Print the matches</span></div><div class="line"><span class="built_in">print</span>(matches)</div></pre></td></tr></table></figure></p>
<p>写几个pattern玩一下吧<br><figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"># Write the first pattern</div><div class="line">pattern1 = bool(<span class="name">re</span>.match(<span class="name">pattern=</span>'\d&#123;<span class="number">3</span>&#125;-\d&#123;<span class="number">3</span>&#125;-\d&#123;<span class="number">4</span>&#125;', string='<span class="number">123</span><span class="number">-456</span><span class="number">-7890</span>'))</div><div class="line">print(<span class="name">pattern1</span>)</div><div class="line"></div><div class="line"># Write the second pattern</div><div class="line">pattern2 = bool(<span class="name">re</span>.match(<span class="name">pattern=</span>'\$\d*\.\d&#123;<span class="number">2</span>&#125;', string='$<span class="number">123.45</span>'))</div><div class="line">print(<span class="name">pattern2</span>)</div><div class="line"></div><div class="line"># Write the third pattern</div><div class="line">pattern3 = bool(<span class="name">re</span>.match(<span class="name">pattern=</span>'[A-Z]\w*', string='Australia'))</div><div class="line">print(<span class="name">pattern3</span>)</div></pre></td></tr></table></figure></p>
<h3 id="Using-functions-to-clean-data"><a href="#Using-functions-to-clean-data" class="headerlink" title="Using functions to clean data"></a>Using functions to clean data</h3><p>lambda又登场了，它的特点就是非常简洁，用它来写函数非常漂亮了<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Write the lambda function using replace</span></div><div class="line">tips[<span class="string">'total_dollar_replace'</span>] = tips.total_dollar.apply(<span class="keyword">lambda</span> x: x.replace(<span class="string">'$'</span>, <span class="string">''</span>))</div><div class="line"></div><div class="line"><span class="comment"># Write the lambda function using regular expressions</span></div><div class="line">tips[<span class="string">'total_dollar_re'</span>] = tips.total_dollar.apply(<span class="keyword">lambda</span> x: re.findall(<span class="string">'\d+\.\d+'</span>, x)[<span class="number">0</span>])</div><div class="line"></div><div class="line"><span class="comment"># Print the head of tips</span></div><div class="line">print(tips.head())</div></pre></td></tr></table></figure></p>
<h3 id="Duplicate-and-missing-data"><a href="#Duplicate-and-missing-data" class="headerlink" title="Duplicate and missing data"></a>Duplicate and missing data</h3><p>原则就是扔掉重复的，填满缺失的<br>先扔为敬<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Create the new DataFrame: tracks</span></div><div class="line"><span class="attribute">tracks</span> = billboard[[<span class="string">'year'</span>,<span class="string">'artist'</span>,<span class="string">'track'</span>,<span class="string">'time'</span>]]</div><div class="line"></div><div class="line"><span class="comment"># Print info of tracks</span></div><div class="line">print(tracks.<span class="literal">info</span>())</div><div class="line"></div><div class="line"><span class="comment"># Drop the duplicates: tracks_no_duplicates</span></div><div class="line">tracks_no_duplicates = tracks.drop_duplicates()</div><div class="line"></div><div class="line"><span class="comment"># Print info of tracks</span></div><div class="line">print(tracks_no_duplicates.<span class="literal">info</span>())</div></pre></td></tr></table></figure></p>
<p>来补了<br>这段代码写得很奇怪，fillna的部分<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Calculate the mean of the Ozone column: oz_mean</span></div><div class="line"><span class="attribute">oz_mean</span> = airquality.Ozone.mean()</div><div class="line"></div><div class="line"><span class="comment"># Replace all the missing values in the Ozone column with the mean</span></div><div class="line">airquality[<span class="string">'Ozone'</span>] = airquality.Ozone.fillna(oz_mean)</div><div class="line"></div><div class="line"><span class="comment"># Print the info of airquality</span></div><div class="line">print(airquality.<span class="literal">info</span>())</div></pre></td></tr></table></figure></p>
<h3 id="Testing-with-asserts"><a href="#Testing-with-asserts" class="headerlink" title="Testing with asserts"></a>Testing with asserts</h3><figure class="highlight irpf90"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"># <span class="keyword">Assert</span> that there are no missing values</div><div class="line"><span class="keyword">assert</span> ebola.notnull().<span class="built_in">all</span>().<span class="built_in">all</span>()</div><div class="line"></div><div class="line"># <span class="keyword">Assert</span> that <span class="built_in">all</span> values are &gt;= <span class="number">0</span></div><div class="line"><span class="keyword">assert</span> ebola.notnull(ebola&gt;=<span class="number">0</span>).<span class="built_in">all</span>().<span class="built_in">all</span>()</div></pre></td></tr></table></figure>
<p><em>2018-02-05</em></p>
<h2 id="Case-study"><a href="#Case-study" class="headerlink" title="Case study"></a>Case study</h2><p>来画个图吧朋友<br><figure class="highlight vala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="meta"># Import matplotlib.pyplot</span></div><div class="line">import matplotlib.pyplot as plt</div><div class="line"></div><div class="line"><span class="meta"># Create the scatter plot</span></div><div class="line">g1800s.plot(kind=<span class="string">'scatter'</span>, x=<span class="string">'1800'</span>, y=<span class="string">'1899'</span>)</div><div class="line"></div><div class="line"><span class="meta"># Specify axis labels</span></div><div class="line">plt.xlabel(<span class="string">'Life Expectancy by Country in 1800'</span>)</div><div class="line">plt.ylabel(<span class="string">'Life Expectancy by Country in 1899'</span>)</div><div class="line"></div><div class="line"><span class="meta"># Specify axis limits</span></div><div class="line">plt.xlim(<span class="number">20</span>, <span class="number">55</span>)</div><div class="line">plt.ylim(<span class="number">20</span>, <span class="number">55</span>)</div><div class="line"></div><div class="line"><span class="meta"># Display the plot</span></div><div class="line">plt.show()</div></pre></td></tr></table></figure></p>
<p>下面这个例子，先定义了一个函数，翻译成自然语言就是，扔掉所有的缺失值，取剩下大于0的部分。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">check_null_or_valid</span><span class="params">(row_data)</span>:</span></div><div class="line">    <span class="string">"""Function that takes a row of data,</span></div><div class="line">    drops all missing values,</div><div class="line">    and checks if all remaining values are greater than or equal to 0</div><div class="line">    """</div><div class="line">    no_na = row_data.dropna()[<span class="number">1</span>:<span class="number">-1</span>]</div><div class="line">    numeric = pd.to_numeric(no_na)</div><div class="line">    ge0 = numeric &gt;= <span class="number">0</span></div><div class="line">    <span class="keyword">return</span> ge0</div><div class="line"></div><div class="line"><span class="comment"># Check whether the first column is 'Life expectancy'</span></div><div class="line"><span class="keyword">assert</span> g1800s.columns[<span class="number">0</span>] == <span class="string">'Life expectancy'</span></div><div class="line"></div><div class="line"><span class="comment"># Check whether the values in the row are valid 注意一下在这里为什么要用all()两次，因为检查的是整个数据集</span></div><div class="line"><span class="keyword">assert</span> g1800s.iloc[:, <span class="number">1</span>:].apply(check_null_or_valid, axis=<span class="number">1</span>).all().all()</div><div class="line"></div><div class="line"><span class="comment"># Check that there is only one instance of each country</span></div><div class="line"><span class="keyword">assert</span> g1800s[<span class="string">'Life expectancy'</span>].value_counts()[<span class="number">0</span>] == <span class="number">1</span></div></pre></td></tr></table></figure></p>
<p>接下来这个melt 跟我以前的语法有点差别，不需要加中括号了，而且重命名竟然就是直接写一个list？<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Melt gapminder: gapminder_melt</span></div><div class="line">gapminder_melt = pd.melt(gapminder, id_vars=<span class="string">'Life expectancy'</span>)</div><div class="line"></div><div class="line"><span class="comment"># Rename the columns</span></div><div class="line">gapminder_melt.columns = [<span class="string">'country'</span>,<span class="string">'year'</span>,<span class="string">'life_expectancy'</span>]</div><div class="line"></div><div class="line"><span class="comment"># Print the head of gapminder_melt</span></div><div class="line"><span class="built_in">print</span>(gapminder_melt.head())</div></pre></td></tr></table></figure></p>
<p>转换数据类型，可以用attribute的形式也可以写成index的形式<br><figure class="highlight ocaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"># <span class="type">Convert</span> the year column <span class="keyword">to</span> numeric</div><div class="line">gapminder.year = pd.to_numeric(gapminder.year, errors=<span class="symbol">'coerce'</span>)</div><div class="line"></div><div class="line"># <span class="type">Test</span> <span class="keyword">if</span> country is <span class="keyword">of</span> <span class="keyword">type</span> <span class="keyword">object</span></div><div class="line"><span class="keyword">assert</span> gapminder.country.dtypes == np.<span class="keyword">object</span></div><div class="line"></div><div class="line"># <span class="type">Test</span> <span class="keyword">if</span> year is <span class="keyword">of</span> <span class="keyword">type</span> <span class="built_in">int64</span></div><div class="line"><span class="keyword">assert</span> gapminder.year.dtypes == np.<span class="built_in">int64</span></div><div class="line"></div><div class="line"># <span class="type">Test</span> <span class="keyword">if</span> life_expectancy is <span class="keyword">of</span> <span class="keyword">type</span> float64</div><div class="line"><span class="keyword">assert</span> gapminder.life_expectancy.dtypes == np.float64</div></pre></td></tr></table></figure></p>
<p>画图，学了一个新的method——groupby()，感觉有点线性回归的意思<br><figure class="highlight vala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="meta"># Add first subplot</span></div><div class="line">plt.subplot(<span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>) </div><div class="line"></div><div class="line"><span class="meta"># Create a histogram of life_expectancy</span></div><div class="line">gapminder.life_expectancy.plot(kind=<span class="string">'hist'</span>)</div><div class="line"></div><div class="line"><span class="meta"># Group gapminder: gapminder_agg</span></div><div class="line">gapminder_agg = gapminder.groupby(<span class="string">'year'</span>)[<span class="string">'life_expectancy'</span>].mean()</div><div class="line"></div><div class="line"><span class="meta"># Print the head of gapminder_agg</span></div><div class="line">print(gapminder_agg.head())</div><div class="line"></div><div class="line"><span class="meta"># Print the tail of gapminder_agg</span></div><div class="line">print(gapminder_agg.tail())</div><div class="line"></div><div class="line"><span class="meta"># Add second subplot</span></div><div class="line">plt.subplot(<span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>)</div><div class="line"></div><div class="line"><span class="meta"># Create a line plot of life expectancy per year</span></div><div class="line">gapminder_agg.plot()</div><div class="line"></div><div class="line"><span class="meta"># Add title and specify axis labels</span></div><div class="line">plt.title(<span class="string">'Life expectancy over the years'</span>)</div><div class="line">plt.ylabel(<span class="string">'Life expectancy'</span>)</div><div class="line">plt.xlabel(<span class="string">'Year'</span>)</div><div class="line"></div><div class="line"><span class="meta"># Display the plots</span></div><div class="line">plt.tight_layout()</div><div class="line">plt.show()</div><div class="line"></div><div class="line"><span class="meta"># Save both DataFrames to csv files</span></div><div class="line">gapminder.to_csv(<span class="string">'gapminder.csv'</span>)</div><div class="line">gapminder_agg.to_csv(<span class="string">'gapminder_agg.csv'</span>)</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;又见Python，争取在8月之前熟练Python。日后出去了，也是有技可傍，不至于手足无措。&lt;br&gt;哎，为了可怜的零星的安全感。&lt;/p&gt;
&lt;p&gt;这篇纯粹是写给自己看的……&lt;/p&gt;
    
    </summary>
    
    
      <category term="Python" scheme="http://yibeichen.me/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>社会学家能做什么？</title>
    <link href="http://yibeichen.me/2018/01/07/What%20Can%20Sociologists%20Do/"/>
    <id>http://yibeichen.me/2018/01/07/What Can Sociologists Do/</id>
    <published>2018-01-07T03:48:22.000Z</published>
    <updated>2018-01-07T04:00:08.723Z</updated>
    
    <content type="html"><![CDATA[<p>把书递给我的时候，她说：“哎，我现在也开始怀疑，做这些社会学的研究能有什么用呢？只是写出了自己的博士论文罢了，对你的研究对象根本毫无帮助。”</p>
<a id="more"></a>
<hr>
<p>如果按这个标准算的话，人文艺术的研究更不用存在了，他们的研究对象都不是“人”，或者说都不是“有机生命体”啊，有什么用呢？有什么意义呢？</p>
<p>同学借给我的这本书是<a href="https://book.douban.com/subject/26606365/" target="_blank" rel="external">《城中城》</a>，英文版是<a href="https://www.goodreads.com/book/show/1491906.Gang_Leader_for_a_Day" target="_blank" rel="external"><em>Gang Leader for a Day</em></a>。算是田野调查的记录吧，当年作者为他在芝加哥大学社会学系的博士论文所做的田野。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;把书递给我的时候，她说：“哎，我现在也开始怀疑，做这些社会学的研究能有什么用呢？只是写出了自己的博士论文罢了，对你的研究对象根本毫无帮助。”&lt;/p&gt;
    
    </summary>
    
    
      <category term="book" scheme="http://yibeichen.me/tags/book/"/>
    
  </entry>
  
  <entry>
    <title>美德是什么？</title>
    <link href="http://yibeichen.me/2017/12/29/Virtue/"/>
    <id>http://yibeichen.me/2017/12/29/Virtue/</id>
    <published>2017-12-29T15:27:04.000Z</published>
    <updated>2018-02-05T14:21:33.054Z</updated>
    
    <content type="html"><![CDATA[<p>太累了今天，但还是想写两句。关于美德。</p>
<p>不过，美德是什么？我始终不明白。</p>
<a id="more"></a>
<hr>
<p>今晚是本学期最后一次空手道训练，体能比赛。</p>
<p>上周会长通知这件事的时候，我想的是，当然要靠体能取胜了呀。毕竟腿法非常弱，套路足手打得也不算特别出彩，唯一说得过去的就是，每次热身都是做得最快的那个。</p>
<p>但今天进行的体能，强度超出了我的预期。本来还想加上形容词“完全”，但想了想，其实还可以忍受。近一个小时中，支撑我坚持下去的大概是如下想法：</p>
<blockquote>
<p>刚刚开始感受到有点累<br>→我坚决不做第一个放弃的</p>
<p>有四五个人放弃了<br>→左右两人都没动，我也不会动</p>
<p>右边的人放弃了<br>→总共四个红带，我坚决不做红带里第一个放弃的</p>
<p>有一个红带放弃了<br>→还有两个本科生红带都没放弃，我也不放弃</p>
<p>又有一个红带放弃了<br>→剩下这个红带都不是我校的，我不能输给一个外校的</p>
<p>真的太太太痛苦了，深蹲前踢的时候眼泪都出来了，我开始不断问自己<br>→假如有十局比赛，最后一局定胜负，在第四五六七八九局放弃的人，有区别吗？早放弃的人是不是看不起晚放弃的？</p>
<p>我可能真的不行了，腿软，我真的抬不起来了，抬头看看左边还有六七个黄带<br>→怎么还有这么多黄带，熬着吧，熬死他们我就赢了</p>
<p>第二次平板支撑，我真的撑不住了，女生还剩下5个，再淘汰2个就结束了<br>→都特么撑到最后了，再熬死2个我就赢了</p>
</blockquote>
<p>最后，一个黄带放弃了，隔壁的红带也放弃了。我熬过了她们俩，当然我也快熬死了。</p>
<p>到这里还没有涉及到美德。<br>但我忍不住思考的一个问题是，假如50个人的比赛，决出前三，请问第1个放弃的和第47个放弃的，以及这中间的45个人，有差吗？<br>当我在问“有差别吗”的时候，这个“差别”指的是什么呢？很显然，现在看来，我是结果导向的，问的是“结果是否有差”。<br>结果当然是没差的，都是失败者。<br>但如果从别的方面来看呢？<br>比如，旁观者。他们可能会留意第1个和第47个。第47个也许会让人唏嘘不已，再坚持坚持可能就赢了啊。<br>再比如，当事人。也许第47个人内心会有很多想法，我猜想一定有过这样的研究，关于放弃，当事人内心活动的丰富程度可能是呈倒U型分布，两端最高点分别是第1个人和第47个人，最好再加上一个维度，因为两端内心活动的性质可能是不同的……</p>
<p>好吧，说到正题，美德。</p>
<p>这件事情中，引发我关于美德疑问的是，我隔壁那个红带，最后一个放弃的人。<br>其实当时算错了，剩下的5个人中，有1位是不参与这个比赛的，所以当那个黄带放弃之后，剩下我们两红一黄就是胜出者。但那个时候我们不知道，所以隔壁这位红带也算是出局了。发奖品的时候，不参与比赛的那位自动提出来了，所以只有一黄一红得到了奖品。这时候，隔壁那位红带过来问我了，“教练最开始说的是取前三不是前二对吧？我也想要那个奖品”。她问了左右两位同学，我们都不知道答案，然后她问了会长。<br>会长说：“学期中你参加了比赛，本来就是有T恤作为奖品的，一直没来得及给你，等会拿给你。”<br>“那太好了，我特别想要T恤，”她说。<br>另一位红带笑着问她，“早知道你有奖品，是不是就不那么拼命了？”<br>“哈哈哈哈，对呀，那我就早早放弃了。”</p>
<p>我想到刚刚比赛的过程中，她其实使用了一些tricks，我也看到最后平板支撑她几乎是趴在地上了，教练让她出局，她坚持不愿意出局。</p>
<p>我知道她一心想要坚持到最后，我也知道她非常想要那件T恤作为奖品。<br>我也一心要坚持到最后，但我想要的就是最后作为胜利者。</p>
<p>好了，现在诞生了两个问题。</p>
<p>先说第一个。</p>
<p>淡总在几天前单向街的演讲中，提到了<a href="https://mp.weixin.qq.com/s/hyzg021kBctJylFCqjeZdw" target="_blank" rel="external">麦金泰尔的思想实验</a>。她说，是什么给了那个七岁小孩下国际象棋的充分理由呢？是作为奖励的零食，还是国际象棋本身？零食所代表的是<strong>一种由于社会机缘，外在偶然地落在下棋这件事上的利益</strong>，而象棋本身的艺术则代表了<strong>内在于这种特定实践的善好</strong>。<br>善好也是一种利益，但它更多的是人在对于优秀、对于优异、对于杰出的追求中所发现一种具体的善。这种对善的追求会对这种实践形式有所贡献，国际象棋会因为这种努力而成为更伟大的艺术。<br>但对外在利益的追求，和这种实践形式本身并无直接的独一无二的关系，零食可以有其他办法获得，T恤也是。更进一步的是，为了在这场实践中获得这种利益，可能会不择手段。<br>所以，唯有追求内在的善好，才能对国际象棋有所贡献，而对外部利益的追逐，只会造成表面繁荣的假象，实际上国际象棋是退步了。<br>这是我想说的第一点。</p>
<p>美德会带来进步是吗？<br>但你要如何识破什么是表面的繁荣？<br>你要如何在万千外部利益的追逐者中找到那些追求内在善好的人？<br>能做到前两点的“你”，又是谁？<br>“你”是谁？<br>美德对“你”而言是什么？<br>“你”在推动艺术进步的过程中扮演的是什么角色？<br>“你”为什么要做这些？</p>
<p>美德是什么？我们如何跳出书本跳出假设跳出理想状态而找到它？</p>
<p>另外，“不择手段”又涉及到我的第二个问题了。</p>
<p>很显然，隔壁那位红带的坚持是源于外部利益的渴望，所以她会用tricks。<br>那我呢，我想要的是赢得比赛，我想要成为的是胜利者。在这场竞争中，我附加给自己的一个暗示是，如果我能坚持到最后，如果我能在这件事情上成功，那么我在另外一件事情（我万分渴望的事）上也会坚持到最后，得到成功。（这有点像弗雷泽在《金枝》里说的，基于相似律的顺势巫术。）所以，我追求的其实也是外部利益，但可能比较隐蔽。</p>
<p>那么，为什么我没有使用那些tricks？（我并不是想说我比她赢得更光明正大，高尚与否这一点不是今天要讨论的）<br>我自己来回答这个问题。<br>我不能容忍我的胜利是带有污点的。如果在这件事上我作弊了，那么意味着我将它所投射到的另一件事，我可能不会胜利，就算胜利了也可能是有污点的，但那件事对我而言太重要了，我不能忍受丝毫的污点。<br>这能说我有更多的美德吗？我拥有更多的道德？</p>
<p>美德到底是什么？道德是什么？道德感是什么？这个学期，我真的是忍不住要问这些问题，从来没有哪一个时刻像这半年一样，我非常渴望理解道德。</p>
<p>我太渴望答案了。</p>
<p>其实还有一些话想说，但，实在太累了。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;太累了今天，但还是想写两句。关于美德。&lt;/p&gt;
&lt;p&gt;不过，美德是什么？我始终不明白。&lt;/p&gt;
    
    </summary>
    
    
      <category term="nonsense" scheme="http://yibeichen.me/tags/nonsense/"/>
    
  </entry>
  
  <entry>
    <title>心理问题及其他</title>
    <link href="http://yibeichen.me/2017/12/23/Psychological/"/>
    <id>http://yibeichen.me/2017/12/23/Psychological/</id>
    <published>2017-12-23T14:26:07.000Z</published>
    <updated>2018-02-05T14:21:30.988Z</updated>
    
    <content type="html"><![CDATA[<p>见了几次心理咨询师，感觉没什么用。</p>
<p>很久很久了，我不再阅读文学，也不再写字。</p>
<p>我甚至觉得，日益严重的心理问题都与我停止了这两件事有关。</p>
<a id="more"></a>
<p>我知道我的心理问题始于何时。</p>
<p>高二。</p>
<p>我清楚地记得每天晚上下了自习回到家，是如何将巨大的压力化为对我妈无声的暴力，而她默默承受了两年。后来我妈回忆，那时候真的是“噤若寒蝉”，她什么也不说，不敢说，也不知道该说什么。</p>
<p>第二次是在大一。</p>
<p>几近抑郁了。我记得是在三教301上课，一位短发女老师教MySQL，第一节课下课，我挪到讲台边告诉老师，我浑身都疼，想去校医院。校医院什么也没检查出来。那种疼痛是，坐立不安，站着疼，坐着疼，躺着也疼。你无法指出到底是哪一部分躯体在疼，疼痛就在你所指认的四周。分不清疼痛是浸入骨头，还是从骨头四散到血肉。这次疼痛惊吓了我，我知道疼痛源于何处，正是它的源头让它骗过了医生。</p>
<p>第三次，不记得是在T公司还是在K公司。</p>
<p>因为现在回想起来，分量都不够。在T公司的时候，我的确因为一些人一些事辗转反侧，但工作并没有受到太多影响。不过，在K公司的那一个月，大概是我在北京最痛苦的时候了。因为某件事的处理失当，我跟最好的朋友大吵一架，可以说，友情已经破碎了，尽管半年前我们终于见了一面，但过去的情深义重是不可能重现的了。后来我离开北京，从物理上远离了这一切，但火种深埋，隐隐燃烧了两年多，直到最近才渐渐暗淡下去。</p>
<p>现在觉得，大概就是这一次，我停止了写字，学会了遗忘，把所有的痛苦、失败、窘迫、无助……都忘了。因为不再写字，我不需要记忆了。因为全都忘记了，我能写什么呢？</p>
<p>第四次，我觉得它不是新的事件，只是换了cue，而问题还是出在作为主体的我身上。</p>
<p>我不知道该怎么描述这件事。它其实不是一件事，有好多件连在一起。<br>这学期约过三次心理咨询，两位心理医生。都不是很满意。<br>在第一位医生那，我有所保留。<br>我对第二位医生非常坦诚，但是她没有达到我的预期。她似乎对我不耐烦，心理医生怎么可以对自己的病人不耐烦？她的鼓励在我看来非常无效，我不需要这种鼓励。<br>她说，我认识到问题出在自己身上，非常难得，是很好的。<br>太虚假了老师，如果我不知道问题出在自己身上，我就不会痛苦成这样，就不需要来找你。<br>我当然知道问题在我这，十年前我就知道了，这么多年我一直试图寻求答案，我想知道为什么，为什么我是这样的我，为什么我变成了这样，我如何摆脱这样的我？<br>我没有答案，我需要答案。在苦苦寻求答案的过程中，新事旧事不断烦扰着我。在自我折磨与自我救赎之间挣扎。</p>
<p>咨询师说我把生活变成了战场。<br>可是生活本来就是战场呀。你竟然意识不到这一点？我们该如何继续对话？</p>
<p>我非常痛恶那些言论——你应该是个漂亮温柔的女孩子，应该去发现生活的美好，去谈恋爱，去培养自己的爱好呀。<br>我为什么一定要谈恋爱？为什么应该是漂亮温柔？Why should I be? Why do I have to be? 发现生活的美好，难道不应看清生活艰难的本质吗？为什么要用虚假的美好蒙骗自己？</p>
<p>咨询师说我目的性太强，太功利。<br>哈哈哈哈，仰天大笑。如果我够功利的话，我的痛苦要比当下少去一半。我的痛苦恰恰是看到了周围人远甚于我的功利，而我没办法在功利上加码。</p>
<p>翻过去的日记，虽然过去也有很多痛苦，但我总是在结尾留下了希望。而现在呢？我不想写了，用遗忘对抗痛苦，所以我也失去了用希望安抚自己的机会。</p>
<p>我不再写字了，我也很久没有完整阅读过一本书了。今天看到《芳华》的影评，讲穂子眼中的何小萍，才意识到，缺乏阅读，我丧失了很多同理心。或者说，过于专注paper，我的世界更狭窄了。那些nerds为什么会被嘲笑？因为他们对周遭世界已经是desensitive。但其实我是敏感的，只不过我遵循了一套自以为是的逻辑。</p>
<p>当我写到这里的时候，我知道，我是病态的。我一直都知道，我是有病的，所以才会主动约见心理医生。我没有放弃自己呀，可是医生帮不了我。</p>
<p>咨询师说我要学会尊重别人。<br>我非常惊讶。我没有不尊重别人。可是转念一想，什么是尊重，什么是不尊重？今天扫过一篇paper，讨论记者报道健康问题时的框架，文章说，新闻生产背后的东西太复杂了，量化的方法只会简化问题，所以我们选择质性研究。<br>什么是我尊重你的决定？我不加干涉，我无为而治吗？<br>那什么是我尊重你？不把我的意志强加于你，也不用我的思维来解读你的行为？我们保持适当的距离吧，最好互不干扰对方的生活。请问你尊重我吗？<br>请问我需要尊重一个不尊重我的人吗？</p>
<p>我不知道了，我想，我又要匆匆收尾了。<br>我没有办法坚持写日记。写作太痛苦了。<br>有时候我也不想去阅读文学作品，因为作家太残忍了。</p>
<p>我还不是个勇士吧，我无法直面惨淡的人生，但我又不得不挣扎着向前走。</p>
<p>我该怎么办呢？比如，什么时候可以在写作中少用“我”？</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;见了几次心理咨询师，感觉没什么用。&lt;/p&gt;
&lt;p&gt;很久很久了，我不再阅读文学，也不再写字。&lt;/p&gt;
&lt;p&gt;我甚至觉得，日益严重的心理问题都与我停止了这两件事有关。&lt;/p&gt;
    
    </summary>
    
    
      <category term="nonsense" scheme="http://yibeichen.me/tags/nonsense/"/>
    
  </entry>
  
  <entry>
    <title>有人给他写信的M</title>
    <link href="http://yibeichen.me/2017/08/07/A-Letter/"/>
    <id>http://yibeichen.me/2017/08/07/A-Letter/</id>
    <published>2017-08-06T16:58:35.000Z</published>
    <updated>2017-08-06T16:59:33.000Z</updated>
    
    <content type="html"><![CDATA[<p>我正写信告诉我，今天的夜晚，是什么颜色。<br><a id="more"></a><br>M:</p>
<p>你好吗？你好不好我全知道，有时候，我又什么都不知道。</p>
<p>这封信，差点就写不出来了。</p>
<p>刚刚对着Keep，已经在脑海中写了一大半，要非常克制，才能停止在脑海中写字。<br>不断换开头，换了很多个。<br>其实，只是想解释下，为什么突然要写信。</p>
<p>所以，我们倒着来吧，一点一点，沿着线往上走。</p>
<p>开头A：<br>想写信，是因为看了《傅雷家书》。<br>看《傅雷家书》则是因为左大琦同学劝我去读鲁迅的书信，但是家中没有，暂时也买不到。<br>为什么突然让我读书信呢？因为，我帮朋友写了一个五分钟的演讲稿，拿给左大琦同学看，结果被批评地，自信心全盘崩塌。毫不夸张地说，真是犹如当头棒喝。写作的无力，自身的怯弱，通通暴露在眼前。<br>要面对啊朋友。傅雷说了，写信就是这样一个面对自我，锻炼写作训练思考力的过程。<br>再往上，不想说了，感觉怎么也说不完。</p>
<p>开头B：<br>一早醒来，看见WhatsApp弹出消息，若冰说：“我把近三年的微博都删了。”<br>这几个月来我们一直在讨论各种censorship，最近尤甚。前两天她跟我说，爸爸很严肃地告知她，不该说的话不要乱说，尤其在网络上。大概是语气非常之正式，我们开始思考，自己的言语可能会对家人造成威胁。我之前还认为，阿冰在国外，总该是个自由身吧，但是，那天给她找链接，翻到了加拿大公民实验室的调查，<a href="https://citizenlab.ca/2016/11/wechat-china-censorship-one-app-two-systems/" target="_blank" rel="external">微信的“一APP两制”式审查机制</a>，才意识到，我对这世上的网，认知实在是浅薄。<br>而我买这个域名，搭这个博客，可以说完全是因为阿冰。去年7月，赋闲在家，百无聊赖，冰冰她用WordPress搭博客，碰到了技术问题，以为我能帮上忙，结果我已经忘得一干二净了。然后阿冰又邀请我和她一起写，吓得我赶紧自己折腾了一个博客。害怕，是因为，怕答应了冰冰，结果什么都写不出来，不能对她不负责。于是，我选择了对自己不负责——搭了博客后，半年，没写过一个字。<br>上个月，又续了一年的域名，花了我一百多美金呢，总得对钱负责吧。</p>
<p>开头C：<br>既然聊到了去年赋闲的事，那就多聊一点吧。那可真是一段求知若渴意气风发勇往无前的日子啊。书评影评日记随笔写个不停，连诗都写了好几首。记得还有个系列，献给缪斯。<br>然后，缪斯就走了，在去年8月，我所有的写作活动，都停在了那里。<br>整整一年，我没法想象也不能理解那段日子。那时候写的东西都用锤子便签存成了长图片，放在手机里。可我一点都不想打开，盯着屏幕，看着缩略图，那么多，简直跟我没关系。<br>我终于相信了，世界上是有缪斯的，因为他走了我才察觉他来过。<br>所以，我要把我的缪斯请回来。没有他，我跟一个老干部有什么区别？从前写作中散发的光芒都消失了，从前别人夸赞我的灵气也都全然不见了。<br>真的是太丧了，这一年。</p>
<p>好了，这就是我写信的全部理由，至于内容，等下一封信吧。</p>
<p>YC</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;我正写信告诉我，今天的夜晚，是什么颜色。&lt;br&gt;
    
    </summary>
    
    
      <category term="myletter" scheme="http://yibeichen.me/tags/myletter/"/>
    
  </entry>
  
  <entry>
    <title>大年初二、论文、修复Next及其他</title>
    <link href="http://yibeichen.me/2017/01/29/First-Blog-in-2017/"/>
    <id>http://yibeichen.me/2017/01/29/First-Blog-in-2017/</id>
    <published>2017-01-29T09:19:58.000Z</published>
    <updated>2017-09-09T15:15:28.000Z</updated>
    
    <content type="html"><![CDATA[<p>修复了next显示空白的问题，用了一下git pull，写了2017年的第一篇博文。<br>一个笼罩在4篇论文阴影下的大年初二。<br><a id="more"></a></p>
<h1 id="修复因github-pages更新导致的next主题显示空白"><a href="#修复因github-pages更新导致的next主题显示空白" class="headerlink" title="修复因github pages更新导致的next主题显示空白"></a>修复因github pages更新导致的next主题显示空白</h1><p>11月9号或者10号左右吧，我记得把Ajax的作业放到这里之后，没过多久，网站就变成了一片空白，那天搜索没有找到解决办法，就搁置了。</p>
<p>这一歇，就是80天。</p>
<p>今天不知道怎么又突然想起来了，找了找，发现竟然是因为11月8号那天，github pages更新了，过滤了next主题下source/vendors文件夹（里面装了css和js），所以才导致了网站显示空白。</p>
<p>解决方案有两个：</p>
<ul>
<li>去官网更新最新的next（主题作者已经针对这个问题修复了）</li>
<li>修改文件夹名：source/vendors改为source/rename（自己换一个名字），再到_config.yml文件中修改_internal：vendors（改为你换的名字）</li>
</ul>
<p>我先尝试了方法二，其实也不是无效，只是一开始没有刷新成功，可能cookies没有清理干净，我没闲住，又想去试试方法一。</p>
<p>方法一呢，就涉及到如何更新next主题了，也有两个方法，都是看别人提问的解答（<a href="https://github.com/iissnan/hexo-theme-next/issues/61" target="_blank" rel="external">这里</a>）:</p>
<ul>
<li>适用于不熟悉git的盆友：<ul>
<li>备份_config.yml、_custom.styl 以及你修改过的其他文件</li>
<li>删除掉 themes/next 目录</li>
<li>重新 clone 一份 <code>git clone https://github.com/iissnan/hexo-theme-next themes/next</code></li>
<li>比对你修改的文件与主题对应的文件，将修改应用回去</li>
</ul>
</li>
<li>用git指令：<ul>
<li><code>cd themes/next</code></li>
<li><code>git init</code></li>
<li><code>git pull</code></li>
</ul>
</li>
</ul>
<p>其实这两种更新方法我也都试了（就是闲得，又没耐心），第一个弄到一半嫌它太麻烦，终止了，换了git，本来在github的回答中，<code>git pull</code>前还有一句<code>git remote add origin</code> 但是我输入后显示无效，所以就去掉它了。</p>
<h1 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h1><p>其他没什么好说的了，最近，也不是最近，已经有快三个月了，口头表达能力严重退化，无法连续说话两分钟，跟有人掐着我喉咙把要说的字往回按似得；文字表达能力也退化到只能写论文、给老师发邮件、微信发“新年快乐”这种地步了。</p>
<p>新年计划、感想什么的？没有。<br>旧年总结、反思什么的？更没有。</p>
<p>我来想象一下，我导估计会说，这样最好呀，别说什么其他话了，看论文去，也别写什么其他东西了，写论文去。</p>
<p>唉哟，这论文们，托福啊，各种去年的to-do lists和flags呀，折腾我心慌得。</p>
<p>大年初二怎么就这么垂头丧气了。<br>都是愁容童子，可别说诺贝尔文学奖了，你连一篇日记都写不出。</p>
<p>向大江健三郎先生问个好。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;修复了next显示空白的问题，用了一下git pull，写了2017年的第一篇博文。&lt;br&gt;一个笼罩在4篇论文阴影下的大年初二。&lt;br&gt;
    
    </summary>
    
    
      <category term="nonsense" scheme="http://yibeichen.me/tags/nonsense/"/>
    
      <category term="Hexo" scheme="http://yibeichen.me/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title>对“埃阿斯自杀”的文本和图像材料的简要分析</title>
    <link href="http://yibeichen.me/2016/11/09/The-Suicide-of-Ajax/"/>
    <id>http://yibeichen.me/2016/11/09/The-Suicide-of-Ajax/</id>
    <published>2016-11-09T08:35:23.000Z</published>
    <updated>2017-01-29T10:05:02.000Z</updated>
    
    <content type="html"><![CDATA[<p>20170129：<br>腊月二十九写完了古希腊神话研究的第二份作业，回过头来看看这第一份，真是惨不忍睹，张老师给的评语都不敢看第二眼，只记住了四个字“注释规范！”<br>听从可可学姐的建议，下载了一篇张老师的论文，同传播学论文的注释完全不同啊。</p>
<p>哎，不懂你们古典学。<br><a id="more"></a></p>
<p>对雅典人来说，埃阿斯是非常重要的英雄人物，祭拜埃阿斯的仪式似乎延续的时间极为久远：鲍桑尼亚斯（Pausanias）说，<code>διαμένουσι δὲ καὶ ἐς τόδε τῷ Αἴαντι παρὰ Ἀθηναίοις τιμαὶ αὐτῷ τε καὶ Εὐρυσάκει, καὶ γὰρ Εὐρυσάκους βωμός ἐστιν ἐν Ἀθήναις.</code>（就是时至今日，雅典人还依然给予埃阿斯极高的荣誉，也很推崇欧律萨克斯，在雅典甚至还设置这欧律萨克斯的龛位：鲍桑尼亚斯, 《希腊志》, Ⅰ. 35. 3）。 除了埃阿斯本身所具有的英雄特征比如骁勇善战之外，可能正是他的自戕所蕴含的悲剧力量，使其伟大得到了证明。</p>
<p>关于埃阿斯（Ajax）自杀，有两个版本。前半部分是相同的：阿喀琉斯战死，埃阿斯背回了他的尸体，认为自己的功绩有目共睹，理所应当得到阿喀琉斯的武器，但最后不敌巧言善辩的奥德修斯，没能分到武器。此处出现了分叉：一个版本是埃阿斯直接愤而自杀；另一个版本是埃阿斯非常气愤想要杀奥德修斯和阿伽门农，但雅典娜施法，令其发疯，宰杀了作为战利品的牛羊，埃阿斯又气愤又羞愧，遂自杀。</p>
<p>下文列举了和一些埃阿斯自杀相关的文字和图像材料，并对部分材料进行了重点描述，并由此探讨文本和图像之间的关系。其中文本分析以索福克勒斯（Sophocles）的悲剧《埃阿斯》为主，图像分析以科林斯杯、埃塞克基亚斯（Exekias）的黑绘双耳罐和阿提卡红绘杯三件作品为主。</p>
<h1 id="文本分析"><a href="#文本分析" class="headerlink" title="文本分析"></a>文本分析</h1><h2 id="关于埃阿斯自杀的几个失传文本"><a href="#关于埃阿斯自杀的几个失传文本" class="headerlink" title="关于埃阿斯自杀的几个失传文本"></a>关于埃阿斯自杀的几个失传文本</h2><h3 id="《奥德赛》版本"><a href="#《奥德赛》版本" class="headerlink" title="《奥德赛》版本"></a>《奥德赛》版本</h3><p>《奥德赛》（Odyssey）并不能算作失传文本，但考虑到其间接涉及到“埃阿斯自杀”，所以也列在这里。卷十一，行543，奥德修斯在地府碰到了埃阿斯的魂灵：<br><figure class="highlight erlang"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">οἴη δ᾽ Αἴαντος ψυχὴ Τελαμωνιάδαο</div><div class="line">νόσφιν ἀφεστήκει, κεχολωμένη εἵνεκα νίκης,</div><div class="line">τήν μιν ἐγὼ νίκησα δικαζόμενος παρὰ νηυσὶ</div><div class="line">τεύχεσιν ἀμφ᾽ Ἀχιλῆος: ἔθηκε δὲ πότνια μήτηρ.</div><div class="line">παῖδες δὲ Τρώων δίκασαν καὶ Παλλὰς Ἀθήνη.</div></pre></td></tr></table></figure></p>
<p>暗示了埃阿斯愤而自杀的结局，没有更多更直接的描写。</p>
<h3 id="《埃提奥比斯》版本"><a href="#《埃提奥比斯》版本" class="headerlink" title="《埃提奥比斯》版本"></a>《埃提奥比斯》版本</h3><p>荷马以后，出现了两个十分重要的与埃阿斯有关的传说版本。公元前766年前后出现的系列组诗《埃提奥比斯》（Aithiopis），公元前700年前后出现的《小伊利亚特》（Ilias Mikra）。这两部作品均已失传，只有通过其他文献中提及的只言片语才能得窥部分内容。</p>
<p>一般认为，《埃提奥比斯》的作者是米利都的阿尔克提努斯（Arctînus），他可能是荷马的学生或徒弟，生活在公元前775年到公元前741年之间。这部作品中关于埃阿斯之死，有两个较为确定的细节：一、分兵器之后，Arctînus提到一位专治疑难杂症的医生Podaleirius，医生看到埃阿斯在争夺兵器时眼镜里闪烁着强悍的凶光，由此诊断后者的精神状态已陷入极度愤怒，并成为后来发生的事情的先兆：“<code>ὅς ῥα καὶ Αἴαντος πρῶτος μάθε χωομένοιο ὄμματά τ᾽ ἀστράπτοντα βαρυνόμενόν τε νόημα</code>”；二、Arctînus认为埃阿斯的自杀大约是在黎明时分——分兵器之后的那个早晨。品达也对这个时间点表示了赞同（<code>Scholiast on Pindar, Isth. iii. 53: The author of the &quot;Aethiopis&quot; says that Aias killed himself about dawn.</code>）。但这部作品并没有详细说明自杀的过程，也没有线索证明它提到了埃阿斯因雅典娜施法而发疯屠杀牛羊，他自杀的动机，在这个版本中，被简单地归结为愤怒。（<code>Sir Richard C. Jebb, Commentary on Sophocles: Ajax</code>）</p>
<h3 id="《小伊利亚特》版本"><a href="#《小伊利亚特》版本" class="headerlink" title="《小伊利亚特》版本"></a>《小伊利亚特》版本</h3><p>《小伊利亚特》一般被认为（虽然并非公认）有一个叫做庇拉（Pyrrha）的莱斯克斯人所作，也有人认为这是一群诗人共同创作的，其中包括荷马本人。<br>从相传的版本中，可以找到索福克勒斯《埃阿斯》的两条故事线索：其一，埃阿斯在那天晚上陷入了疯狂，于是便对作为战利品的牛羊牲畜大开杀戒；其二，当埃阿斯自杀身亡后，他的尸体依然被阿开亚人羞辱。根据已有研究，这两条线索都是《小伊利亚特》所独有的。可以理解为，《小伊利亚特》奠定了埃阿斯因羞愧（disgrace）而自杀这个版本的基础。</p>
<h3 id="埃斯库罗斯的埃阿斯三联剧"><a href="#埃斯库罗斯的埃阿斯三联剧" class="headerlink" title="埃斯库罗斯的埃阿斯三联剧"></a>埃斯库罗斯的埃阿斯三联剧</h3><p>埃斯库罗斯（Aeschylus）以埃阿斯为核心所写的一组三联剧也被看作是埃阿斯传说来源的一个版本，史称埃阿斯三联剧（Ajax-trilogy）（没有具体的成书时间，但肯定比索福克勒斯的《埃阿斯》早，因为埃斯库罗斯逝世于公元前455年左右），分别是：《兵器颁赏》（<em>Ὅπλων κρίσις</em>）、《色雷斯女人》（<em>Θρῇσσαι</em>）、《萨拉弥斯女人》（<em>Σαλαμίνιαι</em>），这些作品也都已经失传。《兵器颁赏》（The Award of the Arms）主要讲述了阿喀琉斯死后，埃阿斯和奥德赛对兵器的争夺。而在《色雷斯女人》（The Phrygian Women）中，埃阿斯的自杀是由一位信使来讲述的。埃斯库罗斯采用了一个已有的传说：埃阿斯和赫拉克勒斯一样，除了曾经以狮皮包裹时没有覆盖的地方外，也是刀枪不入。这个传说没有出现在《伊利亚特》中，但是在柏拉图时代很流行。这位信使讲到，当埃阿斯第一次试图自杀的时候，剑弯了，但是很快一位女神出现了，并告诉他应该把剑刺向哪个地方。至于第三部《萨拉弥斯女人》（The Salaminian Women）主要讲述的是埃阿斯死后的故事，不讨论。</p>
<h2 id="索福克勒斯的《埃阿斯》分析"><a href="#索福克勒斯的《埃阿斯》分析" class="headerlink" title="索福克勒斯的《埃阿斯》分析"></a>索福克勒斯的《埃阿斯》分析</h2><p>索福克勒斯的《埃阿斯》， 大约写于公元前440年左右，是第一次对埃阿斯自杀的故事进行完整的描绘（<code>Gantz, T. Early Greek myth. Vol 2: Sophokles’ preserved Aias gives us our first full account of the story</code>）。<br>主要关注的部分是埃阿斯实施自杀的动作，包括他的自白和自杀场所等相关信息。</p>
<p>行815-行822：<br><figure class="highlight erlang"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">ὁ μὲν σφαγεὺς ἕστηκεν ᾗ τομώτατος</div><div class="line">γένοιτ᾽ ἄν, εἴ τῳ καὶ λογίζεσθαι σχολή:</div><div class="line">δῶρον μὲν ἀνδρὸς Ἕκτορος ξένων ἐμοὶ</div><div class="line">μάλιστα μισηθέντος ἐχθίστου θ᾽ ὁρᾶν:</div><div class="line">πέπηγε δ᾽ ἐν γῇ πολεμίᾳ τῇ Τρῳάδι,</div><div class="line">σιδηροβρῶτι θηγάνῃ νεηκονής:</div><div class="line">ἔπηξα δ᾽ αὐτὸν εὖ περιστείλας ἐγώ,</div><div class="line">εὐνούστατον τῷδ᾽ ἀνδρὶ διὰ τάχους θανεῖν.</div></pre></td></tr></table></figure></p>
<p>从这一段开始了埃阿斯死前的自白：这杀人的家伙已经插好……按照古典语文学家（Liddell&amp;Scott, Jones）的说法，<code>εὖ περιστείλας</code>不仅表示把长剑倒插在地上，而且还在剑的四周培上海滩上的沙土，能够使其稳稳地立在那里。这一段也告知了埃阿斯自杀的地点：海滩。自白也同时表明，场景中没有其他人，只有他独自一人赴死。</p>
<p>行823-行834：<br><figure class="highlight erlang"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">οὕτω μὲν εὐσκευοῦμεν: ἐκ δὲ τῶνδέ μοι</div><div class="line">σὺ πρῶτος, ὦ Ζεῦ, καὶ γὰρ εἰκός, ἄρκεσον.</div><div class="line">αἰτήσομαι δέ σ᾽ οὐ μακρὸν γέρας λαχεῖν.</div><div class="line">πέμψον τιν᾽ ἡμῖν ἄγγελον, κακὴν φάτιν</div><div class="line">Τεύκρῳ φέροντα, πρῶτος ὥς με βαστάσῃ</div><div class="line">πεπτῶτα τῷδε περὶ νεορράντῳ ξίφει,</div><div class="line">καὶ μὴ πρὸς ἐχθρῶν του κατοπτευθεὶς πάρος</div><div class="line">ῥιφθῶ κυσὶν πρόβλητος οἰωνοῖς θ᾽ ἕλωρ.</div><div class="line">τοσαῦτά σ᾽, ὦ Ζεῦ, προστρέπω, καλῶ δ᾽ ἅμα</div><div class="line">πομπαῖον Ἑρμῆν χθόνιον εὖ με κοιμίσαι,</div><div class="line">ξὺν ἀσφαδάστῳ καὶ ταχεῖ πηδήματι</div><div class="line">πλευρὰν διαρρήξαντα τῷδε φασγάνῳ.</div></pre></td></tr></table></figure></p>
<p>这几句是埃阿斯向宙斯的祈求，也是全剧描写埃阿斯死的情形最具体的一处：“一旦我倒在那把新鲜血液浸染的剑上（<code>πεπτῶτα τῷδε περὶ νεορράντῳ ξίφει</code> 行828）”，“同时，我还要请求赫尔墨斯，让他在冥界为我的灵魂引路，我要请求他，当那把剑从我的侧肋直插进去时，能让我在一跃之间倒下，不要有任何的挣扎（<code>καλῶ δ᾽ ἅμα πομπαῖον Ἑρμῆν χθόνιον εὖ με κοιμίσαι, ξὺν ἀσφαδάστῳ καὶ ταχεῖ πηδήματι πλευρὰν διαρρήξαντα τῷδε φασγάνῳ</code> 行831-行834）”<br>这里说到了“从我的侧肋直插进去”（<code>πλευρὰν διαρρήξαντα</code>），和前面埃斯库罗斯三联剧中的第二部Θρῇσσαι中提到的，埃阿斯的命门，似乎相互照应。<br>另外，剧本中是埃阿斯的妻子特克莫萨（Tecmessa）最先发现他的尸体。</p>
<p>行898-行899：<br><figure class="highlight erlang"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Αἴας ὅδ᾽ ἡμῖν ἀρτίως νεοσφαγὴς</div><div class="line">κεῖται, κρυφαίῳ φασγάνῳ περιπτυχής.</div></pre></td></tr></table></figure></p>
<p>以第三人的视角展现了埃阿斯死后的样子，“一把埋在地里的剑刺穿了他的胸膛”（行899）。</p>
<h1 id="图像分析"><a href="#图像分析" class="headerlink" title="图像分析"></a>图像分析</h1><h2 id="科林斯杯"><a href="#科林斯杯" class="headerlink" title="科林斯杯"></a>科林斯杯</h2><p>对于古希腊的艺术家来说，埃阿斯自杀的故事，尤其是他“把剑刺入胸膛”这个可怕的动作是重要的创作主题之一 。公元前六世纪的科林斯的艺术品，这个主题十分盛行。<br>其中有代表的作品是，公元前580年左右产于科林斯的一个饮水杯，描绘了古希腊英雄们发现埃阿斯尸体的场景：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-11-09-FullSizeRender.jpg" alt=""><br>这幅图大概描述了，埃阿斯的尸体被同伴发现，他们聚在一起可能一边悲叹他的命运（ponder his fate），一边考虑他的葬礼。根据铭文（在作品上添加文字注解，是公元前七世纪古希腊艺术家的风格），我们可以辨别出这七个人的身份，人物位置的排列很有意思。紧邻着尸体的是两位白发长者，希腊军营的顾问内斯特（Nestor）和福尼克斯（Phoinix）。他俩见多识广，经验丰富，在这样一个惊慌（unnerving）的时候，其他人需要向他们寻求安慰和建议。分别站在这两个人身后的，右边是阿伽门农（Agamemnon），总指挥官；左边的是奥德修斯（Odysseus）。在这里，奥德修斯并不是作为一个反面角色出现，仅仅是希腊英雄们的一员。画面中的其他三个人物，不同于穿着长袍的长者们，他们三人的裸体显示了其较为低级的身份，从左至右分别是：狄奥墨得斯（Diomedes）、透克洛斯（Teucer）和小埃阿斯（the Lesser Ajax）。</p>
<h2 id="埃塞克基亚斯的黑绘双耳罐"><a href="#埃塞克基亚斯的黑绘双耳罐" class="headerlink" title="埃塞克基亚斯的黑绘双耳罐"></a>埃塞克基亚斯的黑绘双耳罐</h2><p>而埃克塞基亚斯，古希腊最优秀的黑灰陶瓶画师，创作的《埃阿斯之死》（约公元前530年）另辟蹊径，没有随大流展现英雄的尸体，而是聚焦于埃阿斯为自杀做准备的瞬间：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-11-09-exekiasajax.jpg" alt=""><br><img src="http://oapfne1kf.bkt.clouddn.com/2016-11-09-Preparing_for_Suicide_02.jpg" alt=""><br>在画家笔下，荒无人烟的沙滩上，埃阿斯茕茕孑立。著名的七层盾放在一边，头盔立在盾牌上，两支长矛斜靠着，给人一种“幽灵正在注视这一切“的感觉（这或许也代表了曾经的埃阿斯，他的盾牌头盔和长矛，代表曾是伟大战斗英雄的前半世的他）。他左边的那棵棕榈树，一方面暗示了这里没有其他人，另一方面，向右倾斜似乎也代表了对埃阿斯的同情。<br>而埃阿斯自己，正把剑插在地上，仔细拍打着宝剑周围的泥土，试图让它更牢靠一点，好俯身上去。这样有条不紊的举动，完全不像是一个发疯了的人。同时，画家对眉毛和脸部线条的刻画，展现了埃阿斯内心的困惑不安，似乎陷入了对无能为力的命运的思索。</p>
<p>整个场景没有暴力动作，近乎静态，但如果了解这个故事，就能感受到作者对这个瞬间不同寻常的选择所带来的巨大的情感冲击力，仿佛是暴风雨来临前的平静，外表波澜不惊其实内心已是黑云压城。英雄受到了羞辱，他不想再蒙羞了。笨拙地倒下，微不足道的伤口——这些意外事件只会增加他的耻辱。<br>画家经过深思熟虑创造了这个形象，深刻体现了英雄的性格和境遇，动人心魄。这幅作品展现了艺术家对创作对象的一种真正的怜悯与同情，在早期的西方艺术中十分少见。</p>
<h2 id="阿提卡红绘杯"><a href="#阿提卡红绘杯" class="headerlink" title="阿提卡红绘杯"></a>阿提卡红绘杯</h2><p>这件作品创作于公元前490年到公元前480年，描绘的是特克莫萨发现埃阿斯的尸体，并为他盖上毯子的场景：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-11-09-121825.jpg" alt=""><br><img src="http://oapfne1kf.bkt.clouddn.com/2016-11-09-TekmessaBrygos.jpg" alt=""><br>这幅画最大的特色是，第一次展现了埃阿斯面朝上背朝下倒在剑上。我们得以看到埃阿斯强壮的胸膛，浓密的胡须，凌乱的头发，也许是呼应了他此前的发疯状态。依然是强调埃阿斯庞大的身躯，一个英雄的悲壮地倒下，双脚都越出了画面，而特克莫萨，一个传统妇女的形象，拿着黑边和四角带小流苏的毯子，正要给埃阿斯盖上，却有一种家庭式的美好感，倒是形成了强烈对比。</p>
<h1 id="文本与图像之间的关系探讨"><a href="#文本与图像之间的关系探讨" class="headerlink" title="文本与图像之间的关系探讨"></a>文本与图像之间的关系探讨</h1><p>三件艺术作品的创作年代都早于索福克勒斯的剧本，晚于荷马史诗以及《埃提奥比斯》和《小伊利亚特》，且除第三件作品外，前两件早于埃斯库罗斯的埃阿斯三联剧（埃斯库罗斯出生于公元前525年左右，晚于前两件作品的创作时间）。</p>
<p>第一件作品中，对七个人物的精心选择以及位置的安排，并且标注了名字（确定的人物名称很可能来源于成文的文学作品），大约是受到了《埃提奥比斯》的影响，因为只有《埃提奥比斯》是最早写埃阿斯之死的，而《小伊利亚特》里，埃阿斯的尸体被阿开亚人羞辱，所以站在尸体旁的不可能是这七个人。</p>
<p>第二件作品，首先，它的作者是大名鼎鼎的埃塞克基亚斯，其次，它的场景独特，在同时代同主题作品中独树一帜，而且它在索福克勒斯的剧本出现之前就对人物的内心作了一番细腻深入地刻画，足以说明它并不是文学作品的附庸，而是画家创造力的表现。相反，埃塞克基亚斯实在太出色以至于后来者无法忽视，索福克勒斯借鉴了他的作品也并非不可能。</p>
<p>第三件作品，也没有随波逐流，而是展现了埃阿斯背部被刺穿以及特克莫萨发现他的尸体的场景。在之前的文本中似乎并没有明确说明埃阿斯到底是背朝下还是面朝下被刺死，也没有提到是特克莫萨最先发现了埃阿斯。很有可能，索福克勒斯的剧本中的这一情节的灵感是来自于这幅画。</p>
<p>总之，文本和图像作品互相影响，口耳相传或者成文的文学作品给予艺术家们以灵感，而在这一时期的创作者中，一些伟大的艺术家（如埃塞克基亚斯），扭转了单一的线性影响模式，充分发挥自己的聪明才智，自主创新，超越了同时代的人和艺术环境，又给后代艺术家、诗人作家（如索福克勒斯）以启发，如此交替往复，创造了璀璨的艺术世界。</p>
<h1 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h1><p>Ackermann, C. &amp; Gisler, J. (1981). Lexicon iconographicum mythologiae classicae (LIMC). Zurich: Artemis.</p>
<p>Aeschylus. (2016). En.wikipedia.org. Retrieved 8 November 2016</p>
<p>AESCHYLUS, FRAGMENTS 57-154 - Theoi Classical Texts Library. (2016). Theoi.com. Retrieved 8 November 2016</p>
<p>Boardman, J. (2001). The history of Greek vases. New York, N.Y.: Thames &amp; Hudson.</p>
<p>Carpenter, T. (1991). Art and myth in ancient Greece. London: Thames and Hudson.</p>
<p>Gantz, T. (1996). Early Greek myth. Baltimore: Johns Hopkins University Press.</p>
<p>Hesiod., Evelyn-White, H., &amp; Homer.,. (1914). Hesiod, the Homeric hymns, and Homerica. London: W. Heinemann.</p>
<p>Homer, Odyssey. (2016). Perseus.tufts.edu. Retrieved 8 November 2016</p>
<p>PAUSANIAS, Description of Greece | Loeb Classical Library. (2016). Loeb Classical Library. Retrieved 9 November 2016</p>
<p>PAUSANIAS, Description of Greece | Loeb Classical Library. (2016). Loeb Classical Library. Retrieved 9 November 2016</p>
<p>Shapiro, H. (1994). Myth into art. London: Routledge.<br>Sir Richard C. Jebb, Commentary on Sophocles: Ajax,section 3. (2016). Perseus.tufts.edu. Retrieved 8 November 2016</p>
<p>Sophocles, Ajax. (2016). Perseus.tufts.edu. Retrieved 8 November 2016</p>
<p>Sophocles., &amp; Jebb, R. (1967). The Ajax. Amsterdam: Hakkert.</p>
<p>伍德福德, 苏. (2006). 古代艺术品中的神话形象. 济南市: 山东画报出版社.</p>
<p>沈默,. (2010). 高贵的言辞:索福克勒斯《埃阿斯》疏证. 上海: 华东师范大学出版社.</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;20170129：&lt;br&gt;腊月二十九写完了古希腊神话研究的第二份作业，回过头来看看这第一份，真是惨不忍睹，张老师给的评语都不敢看第二眼，只记住了四个字“注释规范！”&lt;br&gt;听从可可学姐的建议，下载了一篇张老师的论文，同传播学论文的注释完全不同啊。&lt;/p&gt;
&lt;p&gt;哎，不懂你们古典学。&lt;br&gt;
    
    </summary>
    
    
      <category term="Greek" scheme="http://yibeichen.me/tags/Greek/"/>
    
      <category term="Myth" scheme="http://yibeichen.me/tags/Myth/"/>
    
  </entry>
  
  <entry>
    <title>HTML, CSS, and Javascript for Web Developers 课程笔记 (未完)</title>
    <link href="http://yibeichen.me/2016/08/13/HTML-CSS-Javascript-for-Web-Developers/"/>
    <id>http://yibeichen.me/2016/08/13/HTML-CSS-Javascript-for-Web-Developers/</id>
    <published>2016-08-13T08:00:23.000Z</published>
    <updated>2016-08-30T06:45:21.000Z</updated>
    
    <content type="html"><![CDATA[<p>0813：为什么网速这么慢，今天写不完作业下周我就不记得怎么写了！<br>0809：算了下，以每天一小节的速度，学完整个课程还要14天，勉勉强强赶在上学前……<br>0807：到目前为止，课上讲的html还在我的知识储备内。(学代码最好的办法就是去写代码呀，忘了不要紧，被逼着写一回就全想起来了。)<br>0805：有一种当年自学html&amp;css靠的都是野路子，这才是正规军的感觉。<br>0804：<br>老师长得太可爱啦，自带腮红！<br>你好呀，html&amp;css，又见面了耶！(JavaScript你也好，然而我们并不熟。)<br>所有这种编程课，我最喜欢的都是第一节——安装各种工具。<br><a id="more"></a><br>Coursera地址: <a href="https://www.coursera.org/learn/html-css-javascript-for-web-developers" target="_blank" rel="external">面向Web开发者的HTML、CSS与Javascript课程</a><br>辅助资料请上<a href="https://github.com/jhu-ep-coursera/fullstack-course4" target="_blank" rel="external">github</a></p>
<h1 id="HTML5入门"><a href="#HTML5入门" class="headerlink" title="HTML5入门"></a>HTML5入门</h1><h2 id="安装开发环境"><a href="#安装开发环境" class="headerlink" title="安装开发环境"></a>安装开发环境</h2><p>必备工具集：</p>
<ul>
<li>Github账号</li>
<li>Chrome+CDT</li>
<li>Sublime Text3 (想抛弃Atom重回ST怀抱了)</li>
<li>Git</li>
<li>Browser Sync</li>
</ul>
<p>噼里啪啦，跟着视频敲了一堆看不懂的命令符，新建了一个github仓库，但是，有点不对。之前我搭这个博客已经开通了github page，并且绑定了我的域名，但是课程案例又新建了另一个page，所以，这个新的page就自动变成我的网站二级页，还继承了favicon。呐，就是它了：<a href="http://yibeichen.me/coursera-test/">http://yibeichen.me/coursera-test/</a></p>
<p>内心默默涌起一种“我上个月怎么没学这门课”的后悔！以及，“这下学会了新建二级页，又能自己写index.html了”，开心！</p>
<p>这五个工具里，唯一没用过的就是Browser Sync，但感觉跟<code>$ hexo s</code>很相似，不过要比后者方便，真正即时同步。</p>
<h3 id="作业"><a href="#作业" class="headerlink" title="作业"></a>作业</h3><p>《Pro Git》<a href="https://git-scm.com/book/en/v2" target="_blank" rel="external">英文版</a> <a href="http://iissnan.com/progit/" target="_blank" rel="external">中文版</a> 看完前三章</p>
<h2 id="HTML基础"><a href="#HTML基础" class="headerlink" title="HTML基础"></a>HTML基础</h2><p>HTML→HyperText Markup Language 超链接文本标记语言<br>在网页开发中，HTML、CSS、JavaScript分别扮演了什么角色呢？<br>HTML 搭建网页的结构和框架 (structure)<br>CSS 决定了网页的样式 (style)<br>JavaScript 关乎网页的实现形式 (behavior)</p>
<h3 id="相关历史"><a href="#相关历史" class="headerlink" title="相关历史"></a>相关历史</h3><p>两个组织控制着HTML，一个是W3C(官方)，一个是WHATWG(民间)。<br>前一个发布了HTML5标准，后一个致力于HTML的evolving。</p>
<h3 id="几个资源"><a href="#几个资源" class="headerlink" title="几个资源"></a>几个资源</h3><ol>
<li><a href="https://www.w3.org/" target="_blank" rel="external">W3C</a> (最官方的文档)</li>
<li><a href="http://caniuse.com/" target="_blank" rel="external">Can I Use</a> (feature investigation查看主流浏览器对新html语言的支持)</li>
<li><a href="http://validator.w3.org/" target="_blank" rel="external">Markup Validation Serivice</a> (查看网页html规范)<br>测试了一下yibeichen.me，结果竟然是：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-05_10:53:46.jpg" alt="2016-08-05_10:53:46.jpg"><br>错误和警告加起来一共有16个，有得改了。不过暂时还不懂这些错在哪了。</li>
<li><a href="http://www.w3schools.com/" target="_blank" rel="external">W3Schools</a> (Browser stats resource)</li>
<li><a href="https://www.google.com" target="_blank" rel="external">Google</a></li>
</ol>
<h3 id="HTML标签"><a href="#HTML标签" class="headerlink" title="HTML标签"></a>HTML标签</h3><p>大多数标签都是有开有关的，比如<code>&lt;a&gt;&lt;/a&gt;</code>、<code>&lt;p&gt;&lt;/p&gt;</code>等等，但是有一些标签只用开不用关，比如<code>&lt;br&gt;</code>、<code>&lt;hr&gt;</code>。</p>
<h4 id="标签属性"><a href="#标签属性" class="headerlink" title="标签属性"></a>标签属性</h4><p>比如<code>&lt;p id=&quot;myId&quot;&gt;&lt;/p&gt;</code>,这里的id就是一个属性名，myId就是一个属性值。<br>注意，<code>id</code>的值是唯一的，不能定义两个相同的id值。<br>另外，双引号和单引号都是ok的。</p>
<h3 id="基本HTML文本结构"><a href="#基本HTML文本结构" class="headerlink" title="基本HTML文本结构"></a>基本HTML文本结构</h3><ol>
<li>必须以<code>&lt;!doctyp html&gt;</code>开头</li>
<li>meta标签放在head标签里，是一个开放标签，不需要关闭。比如<code>&lt;meta charset=&quot;utf-8&quot;&gt;</code></li>
<li>head标签里必须包含一个title标签</li>
<li>head标签结束后就到了body标签</li>
<li>浏览器读取网页是从上到下的顺序，所以，重要的定义要放在前面(以后写css这点很重要)</li>
</ol>
<h3 id="HTML内容模式"><a href="#HTML内容模式" class="headerlink" title="HTML内容模式"></a>HTML内容模式</h3><p><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-05_11:27:57.jpg" alt="2016-08-05_11:27:57.jpg"><br>比如，div 就是一个block-level元素，而 span 则是一个inline元素。<br>block-level元素自己要独占一行，inline则不会。<br>span可以嵌套在div里，但是div不能嵌套在span里，这就是两类元素的特性。<br>这两大类都不是HTML5里正式的内容，但是现在仍然在使用。</p>
<h2 id="HTML5基本标签"><a href="#HTML5基本标签" class="headerlink" title="HTML5基本标签"></a>HTML5基本标签</h2><h3 id="semantic-html-element"><a href="#semantic-html-element" class="headerlink" title="semantic html element"></a>semantic html element</h3><p>语义的，意味着这些标签可以帮助理解html的内容。<br>来，介绍几个：</p>
<ol>
<li>header 标签，主要用来放公司logo、标语、导航等</li>
<li>nav 标签，存放关于网站导航的内容</li>
<li>h1 标签，在h1到h6系列中，它最重要</li>
<li>section 标签</li>
<li>article 标签</li>
<li>aside 标签 (some information that relates to the main topic, i.e.,related posts)</li>
<li>footer 标签</li>
</ol>
<p>上面说的这些都是block-level元素。</p>
<h3 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h3><p>废话不说了，看代码吧，下面是无序列表，注意哦，有列表嵌套：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>Milk<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>Donuts<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>Cookies</div><div class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">li</span>&gt;</span>Chocolate<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">li</span>&gt;</span>Sugar<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">li</span>&gt;</span>Peanut Butter<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>Pepto Bismol<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>来看一看有序列表，唯一的区别是<code>&lt;ul&gt;</code>变成了<code>&lt;ol&gt;</code>：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">ol</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>Open box<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>Take out cookie<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>Make a Double Oreo</div><div class="line">        <span class="tag">&lt;<span class="name">ol</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">li</span>&gt;</span>Peel off the top part<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">li</span>&gt;</span>Place another cookie in the middle<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">li</span>&gt;</span>Put back the top part<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>Enjoy!<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h3 id="HTML-Character-Entity-References"><a href="#HTML-Character-Entity-References" class="headerlink" title="HTML Character Entity References"></a>HTML Character Entity References</h3><p>请看下图，其实不知道上面这个小标题是什么意思……惭愧<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-07_16:27:41.jpg" alt="2016-08-07_16:27:41.jpg"><br>意思就是，如果你的html文本里有<code>&lt;</code>、<code>&gt;</code>这类符号呢，需要转化一下，不然浏览器可能会解析错误，把文本解析成代码。<br>类似的reference还有很多，比如：<br>如果不想你的英文单词折行，可以在单词间加上<code>&amp;nbsp;</code><br><code>&amp;nbsp;</code>这个经常会被误用，写上好几个增加空格(我就这么干过)。如果想让两个单词之间多出空隙，最好的办法是选中其中一个单词，加上<code>margin-left(right)</code></p>
<p>最后呢，当然是要献上<a href="https://brajeshwar.github.io/entities/" target="_blank" rel="external">cheatsheet</a>啦，我自己找的。</p>
<h3 id="加超链"><a href="#加超链" class="headerlink" title="加超链"></a>加超链</h3><ol>
<li>站内链接</li>
<li>站外链接</li>
<li>锚点标签，<code>&lt;a herf=&quot;#idname&quot;&gt;#idname&lt;/a&gt;</code></li>
</ol>
<p><code>&lt;a&gt;</code>既是一个inline element也是一个block-level element，所以，a标签可以嵌套div标签</p>
<h3 id="图片展示"><a href="#图片展示" class="headerlink" title="图片展示"></a>图片展示</h3><p><code>&lt;img&gt;</code>也是一个inline element，记得定义图片的长宽。</p>
<h1 id="CSS入门"><a href="#CSS入门" class="headerlink" title="CSS入门"></a>CSS入门</h1><h2 id="Cascading-Style-Sheets-Basics-CSS基础"><a href="#Cascading-Style-Sheets-Basics-CSS基础" class="headerlink" title="Cascading Style Sheets Basics (CSS基础)"></a>Cascading Style Sheets Basics (CSS基础)</h2><p>见过<a href="http://www.csszengarden.com/" target="_blank" rel="external">这个网站</a>，刷新了我对css的认识，一直以为那些好看的网站都是靠JavaScript(很明显都是静态的啊，怎么需要劳烦js)。<br>在上面那个网站，可以看到相同的html，不同的css效果，真的是千差万别！<br>存放css的文件叫做stylesheet</p>
<h3 id="Element-Class-and-ID-Selectors"><a href="#Element-Class-and-ID-Selectors" class="headerlink" title="Element, Class, and ID Selectors"></a>Element, Class, and ID Selectors</h3><p>很简单啊，element selector就是<code>p</code>、<code>h1</code>……这种，class selector是<code>.blue(class=&quot;blue&quot;)</code>，id selector是<code>#name(id=name)</code><br>如果不同的selector共用同一个样式，它俩用逗号隔开就好了。<br>这三种selector的有效性也是递减的，就是，如果冲突了，后面的会继承前面的属性。</p>
<h3 id="Combining-Selectors"><a href="#Combining-Selectors" class="headerlink" title="Combining Selectors"></a>Combining Selectors</h3><ol>
<li><p>element with class selector</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">p</span><span class="selector-class">.highlight</span> &#123;  </div><div class="line">  <span class="attribute">font-style</span>: italic;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>child selector</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* any article element which is a direct child of a section element,i.e., any article element whose immediate parent is a section element. */</span></div><div class="line"><span class="selector-tag">section</span> &gt; <span class="selector-tag">article</span> &#123;</div><div class="line">  <span class="attribute">color</span>: green;</div><div class="line">  <span class="attribute">font-size</span>: <span class="number">24px</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>descendant selector</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* all li elements that are inside a section element. */</span></div><div class="line"><span class="selector-tag">section</span> <span class="selector-tag">li</span> &#123;</div><div class="line">  <span class="attribute">color</span>: green;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<p>2和3的区别在于，2中说的是直接的子集，3中则不限“直接”，可以是嵌套好几层的。</p>
<h3 id="Pseudo-Class-Selectors"><a href="#Pseudo-Class-Selectors" class="headerlink" title="Pseudo-Class Selectors"></a>Pseudo-Class Selectors</h3><p>有很多，说五个</p>
<ul>
<li>:link</li>
<li>:visited</li>
<li>:hover</li>
<li>:active</li>
<li>:nth-child(第一次用它，好神奇！)</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:link</span>, <span class="selector-tag">a</span><span class="selector-pseudo">:visited</span> &#123;</div><div class="line">  <span class="attribute">text-decoration</span>: none;</div><div class="line">  <span class="attribute">background-color</span>: green;</div><div class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid blue;</div><div class="line">  <span class="attribute">color</span>: black;</div><div class="line">  <span class="attribute">display</span>: block;</div><div class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</div><div class="line">  <span class="attribute">text-align</span>: center;</div><div class="line">  <span class="attribute">margin-bottom</span>: <span class="number">1px</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>, <span class="selector-tag">a</span><span class="selector-pseudo">:active</span> &#123;</div><div class="line">  <span class="attribute">background-color</span>: red;</div><div class="line">  <span class="attribute">color</span>: purple;</div><div class="line">&#125;</div><div class="line"><span class="selector-tag">header</span> <span class="selector-tag">li</span><span class="selector-pseudo">:nth-child(3)</span> &#123;</div><div class="line">  <span class="attribute">font-size</span>: <span class="number">24px</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-tag">section</span> <span class="selector-tag">div</span><span class="selector-pseudo">:nth-child(odd)</span> &#123; <span class="comment">/* 应用于奇数行 */</span></div><div class="line">  <span class="attribute">background-color</span>: gray;</div><div class="line">&#125;</div><div class="line"><span class="selector-tag">section</span> <span class="selector-tag">div</span><span class="selector-pseudo">:nth-child(4)</span><span class="selector-pseudo">:hover</span> &#123; <span class="comment">/* 应用于第四行*/</span></div><div class="line">  <span class="attribute">background-color</span>: green;</div><div class="line">  <span class="attribute">cursor</span>: pointer;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="CSS-Rules-Conflict-Resolution-and-Text-Styling"><a href="#CSS-Rules-Conflict-Resolution-and-Text-Styling" class="headerlink" title="CSS Rules Conflict Resolution and Text Styling"></a>CSS Rules Conflict Resolution and Text Styling</h2><p>css可以写在单独的文件夹里，也可以写在head里，还可以写在body中的selector后面。<br>第一种方法最推荐，第三种方法适合测试用。</p>
<h3 id="Conflict-Resolution"><a href="#Conflict-Resolution" class="headerlink" title="Conflict Resolution"></a>Conflict Resolution</h3><p>定义了很多css，冲突了怎么办呢？这就涉及到cascading algorithm<br>讲几个概念：</p>
<ul>
<li>origin precedence<br><strong>Last Declarationn Wins</strong></li>
<li>merge<br><strong>Declarationn Merge</strong> 指的是不同的属性比如字号和颜色合并</li>
<li>inheritance<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-09_17:15:11.jpg" alt="2016-08-09_17:15:11.jpg"></li>
<li>specificity<br><strong>Most Specific Selector Combination Wins</strong><br>看看下面这三张图就知道怎么打分了：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-09_17:22:29.jpg" alt="2016-08-09_17:22:29.jpg"><br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-09_17:23:05.jpg" alt="2016-08-09_17:23:05.jpg"><br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-09_17:23:24.jpg" alt="2016-08-09_17:23:24.jpg"></li>
</ul>
<p>id属性是高于class属性的。</p>
<h3 id="Styling-Text"><a href="#Styling-Text" class="headerlink" title="Styling Text"></a>Styling Text</h3><p>学到一个新样式<code>text-transform: capitalize;</code>这个样式还有很多其他属性。<br>另，字号的相对大小比如：<br><code>&lt;div style=&quot;font-size: 2em;&quot;&gt;&lt;/div&gt;</code><br>表示这个div里的字是当前设定的字体的两倍。</p>
<h2 id="The-Box-Model-and-Layout"><a href="#The-Box-Model-and-Layout" class="headerlink" title="The Box Model and Layout"></a>The Box Model and Layout</h2><h3 id="The-Box-Model"><a href="#The-Box-Model" class="headerlink" title="The Box Model"></a>The Box Model</h3><p>话说用CDT这么久，第一次知道这东西原来叫box……<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-10_21:49:13.jpg" alt="2016-08-10_21:49:13.jpg"><br>以前设定box宽度的时候，由于有padding、margin、border的存在，整个box要比设定的宽，到了CSS3时代，解决了这个问题，整个box的宽度包括了所有的东西，用一句话写就是：<code>box-sizing: border-box;</code>，但是如果把<code>border-box</code>变成<code>content-box</code>，就会变成以前那种。<br>如果你不想在同一个html里，每写一个box都定义一次<code>border-box</code>的话，把这句直接写在body里，是没用的，不会继承的。<br>于是我们要学一个新的selector：<code>*</code>，放在style的第一行。</p>
<p>当两个box并排摆在一起的时候，它俩之间的margin大小等于各自的margin-left+margin-right，但是当两个box上下摆在一起的时候，它俩之间的margin并不等于margin-top+margin-bottom，而是，等于大的那一个margin。</p>
<p>当我们给一个box限高了，里面的内容多了就会溢出来，那怎么办呢？用<code>overflow: hidden</code>，内容跑出来的部分就隐藏进去，但是这就遮住了，看不见了呀。用<code>overflow: auto</code>，内容不会跑出来，但是会多出一个滑动的按钮，可以滑动查看。这个css默认的值是<code>overflow: visible</code>，其实是没有任何变化的，content还是会跑出来。</p>
<h3 id="The-background-Property"><a href="#The-background-Property" class="headerlink" title="The background Property"></a>The background Property</h3><p>我们直接看代码吧。<br><figure class="highlight plain"><figcaption><span>&#123;</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">  width: 500px;</div><div class="line">  height: 500px;</div><div class="line">  background: url(&apos;yaakov.png&apos;) no-repeat top center;</div><div class="line">  background-color: blue;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>注意了，如果把<code>background-color: blue;</code>这句写在<code>background: url(&#39;yaakov.png&#39;) no-repeat top center;</code>的前面，是出现不了颜色的。</p>
<h3 id="Positioning-Elements-by-Floating"><a href="#Positioning-Elements-by-Floating" class="headerlink" title="Positioning Elements by Floating"></a>Positioning Elements by Floating</h3><p>讲得还蛮多，主要是怎么摆的问题，如果你在body里定义了<code>float: left;</code>，后面不想它乱跑了，可以写<code>clear: right</code>，如果不想因为上面的box变长，而下面的box被遮住，写<code>clear: both</code>。<br>还有好多，实战的时候注意下。</p>
<h3 id="Relative-and-Absolute-Element-Positioning"><a href="#Relative-and-Absolute-Element-Positioning" class="headerlink" title="Relative and Absolute Element Positioning"></a>Relative and Absolute Element Positioning</h3><p>这么说吧，如果定义的是<code>position: relative;</code>，那两个elements的位置就是相对的，不管怎么变都是相对存在的。<br>如果定义的是<code>position: absolute;</code>，那两个elements的位置就是绝对的，它俩就会重叠，因为他们彼此不知道对方的存在。<br>假如要设置某个部分为<code>position: absolute;</code>，那它的父类，应该设置为<code>position: relative;</code><br>啊，以前写好多个div摆一起的时候，被这种position折磨死了，这节课听得也不是很明白。<br>这张slide看看就好，反正我是没看懂，等要写的时候再摸索一遍吧<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-11_18:00:33.jpg" alt="2016-08-11_18:00:33.jpg"></p>
<h2 id="响应式设计入门"><a href="#响应式设计入门" class="headerlink" title="响应式设计入门"></a>响应式设计入门</h2><h3 id="Media-Queries"><a href="#Media-Queries" class="headerlink" title="Media Queries"></a>Media Queries</h3><p>其主要作用是让web适应不同的设备环境，比如大屏小屏呀，这是最基本的。<br>写法是这样<code>@media (max-width: 990px) {……}</code> 当它的值为true的时候大括号里的内容就会apply。<br><code>@media</code>可以用逻辑符号链接比如:<code>and</code>,<code>,(or)</code><br>下面这张图的意思是，定义了好几个<code>@media</code>的时候，注意不要让边界重合了。<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-11_18:15:36.jpg" alt="2016-08-11_18:15:36.jpg"><br>在网上找了一位朋友的文章，解释得很详细(因为写的是中文，哈哈。) <a href="http://www.cnblogs.com/mofish/archive/2012/05/23/2515218.html" target="_blank" rel="external">点这里</a><br>另，发现了CDT的一个新功能，点最左边那个长得像手机的图标，有惊喜！</p>
<h3 id="响应式设计"><a href="#响应式设计" class="headerlink" title="响应式设计"></a>响应式设计</h3><p>关于响应式设计，下图这个比喻好贴切！<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-11_21:34:58.jpg" alt="2016-08-11_21:34:58.jpg"><br>然后说到了网格(好像本科的时候麦哥教过960网格？)：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-11_21:36:22.jpg" alt="2016-08-11_21:36:22.jpg"><br>来看一下这段代码：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line">@<span class="keyword">media</span> (min-width: <span class="number">1200px</span>) &#123;</div><div class="line">  <span class="selector-class">.col-lg-1</span>, <span class="selector-class">.col-lg-2</span>, <span class="selector-class">.col-lg-3</span>, <span class="selector-class">.col-lg-4</span>, <span class="selector-class">.col-lg-5</span>, <span class="selector-class">.col-lg-6</span>, <span class="selector-class">.col-lg-7</span>, <span class="selector-class">.col-lg-8</span>, <span class="selector-class">.col-lg-9</span>, <span class="selector-class">.col-lg-10</span>, <span class="selector-class">.col-lg-11</span>, <span class="selector-class">.col-lg-12</span> &#123;</div><div class="line">    <span class="attribute">float</span>: left;</div><div class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid green;</div><div class="line">  &#125;</div><div class="line">  <span class="selector-class">.col-lg-1</span> &#123;</div><div class="line">    <span class="attribute">width</span>: <span class="number">8.33%</span>;</div><div class="line">  &#125;</div><div class="line">  <span class="selector-class">.col-lg-2</span> &#123;</div><div class="line">    <span class="attribute">width</span>: <span class="number">16.66%</span>;</div><div class="line">  &#125;</div><div class="line">  <span class="selector-class">.col-lg-3</span> &#123;</div><div class="line">    <span class="attribute">width</span>: <span class="number">25%</span>;</div><div class="line">  &#125;</div><div class="line">  <span class="selector-class">.col-lg-4</span> &#123;</div><div class="line">    <span class="attribute">width</span>: <span class="number">33.33%</span>;</div><div class="line">  &#125;</div><div class="line">  <span class="selector-class">.col-lg-5</span> &#123;</div><div class="line">    <span class="attribute">width</span>: <span class="number">41.66%</span>;</div><div class="line">  &#125;</div><div class="line">  <span class="selector-class">.col-lg-6</span> &#123;</div><div class="line">    <span class="attribute">width</span>: <span class="number">50%</span>;</div><div class="line">  &#125;</div><div class="line">  <span class="selector-class">.col-lg-7</span> &#123;</div><div class="line">    <span class="attribute">width</span>: <span class="number">58.33%</span>;</div><div class="line">  &#125;</div><div class="line">  <span class="selector-class">.col-lg-8</span> &#123;</div><div class="line">    <span class="attribute">width</span>: <span class="number">66.66%</span>;</div><div class="line">  &#125;</div><div class="line">  <span class="selector-class">.col-lg-9</span> &#123;</div><div class="line">    <span class="attribute">width</span>: <span class="number">74.99%</span>;</div><div class="line">  &#125;</div><div class="line">  <span class="selector-class">.col-lg-10</span> &#123;</div><div class="line">    <span class="attribute">width</span>: <span class="number">83.33%</span>;</div><div class="line">  &#125;</div><div class="line">  <span class="selector-class">.col-lg-11</span> &#123;</div><div class="line">    <span class="attribute">width</span>: <span class="number">91.66%</span>;</div><div class="line">  &#125;</div><div class="line">  <span class="selector-class">.col-lg-12</span> &#123;</div><div class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>解释一下 col指的是column, lg指的是large，上面那段是为large screen设置的，如果是为medium screen的话，lg就改成md。<br>如果你定义了大屏和中屏的话，body里的代码应该长这样：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"row"</span>&gt;</div><div class="line">  <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-lg-3 col-md-6"</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>Item 1<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></div><div class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-lg-3 col-md-6"</span>&gt;<span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Item 2<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></div><div class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-lg-3 col-md-6"</span>&gt;<span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Item 3<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></div><div class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-lg-3 col-md-6"</span>&gt;<span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Item 4<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></div><div class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-lg-3 col-md-6"</span>&gt;<span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Item 5<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></div><div class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-lg-3 col-md-6"</span>&gt;<span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Item 6<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></div><div class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-lg-3 col-md-6"</span>&gt;<span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Item 7<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></div><div class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-lg-3 col-md-6"</span>&gt;<span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Item 8<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></div><div class="line">&lt;<span class="regexp">/div&gt;</span></div></pre></td></tr></table></figure></p>
<p>按理说12网格只能写4个3，2个6，不用担心，它们会自动换行排列的。<br>另外，把这个网页放到手机上，正常应该是每行只显示一块，但很可能手机浏览器没有解读出这个网页的响应式信息，把它当做中屏来展示了，这时候就要在head里加一行：<br><code>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;</code></p>
<h2 id="Introduction-to-Twitter-Bootstrap"><a href="#Introduction-to-Twitter-Bootstrap" class="headerlink" title="Introduction to Twitter Bootstrap"></a>Introduction to Twitter Bootstrap</h2><h3 id="入门"><a href="#入门" class="headerlink" title="入门"></a>入门</h3><p>来了解一下,<a href="https://www.zhihu.com/question/19821825" target="_blank" rel="external">什么是 Twitter Bootstrap？</a> <a href="http://getbootstrap.com/" target="_blank" rel="external">官网在此</a></p>
<h3 id="The-Bootstrap-Grid-System"><a href="#The-Bootstrap-Grid-System" class="headerlink" title="The Bootstrap Grid System"></a>The Bootstrap Grid System</h3><p>啊，今天赶时间，请看下面的slide体会一下吧：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-13_16:00:03.jpg" alt="2016-08-13_16:00:03.jpg"><br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-13_16:00:27.jpg" alt="2016-08-13_16:00:27.jpg"><br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-13_16:01:28.jpg" alt="2016-08-13_16:01:28.jpg"><br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-13_16:01:06.jpg" alt="2016-08-13_16:01:06.jpg"><br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-13_16:01:28.jpg" alt="2016-08-13_16:01:28.jpg"></p>
<h2 id="作业-1"><a href="#作业-1" class="headerlink" title="作业"></a>作业</h2><p>要求如下：<a href="http://bit.ly/1SvqVyl" target="_blank" rel="external">http://bit.ly/1SvqVyl</a><br>我的作业：<a href="http://yibeichen.me/coursera_html_css_javascript/mod2_solution/">http://yibeichen.me/coursera_html_css_javascript/mod2_solution/</a><br>没想到这么小小的一个作业，竟然花了我一整天，大半天在敲敲改改，还去找配色方案了(强迫症也是没救了)，剩下个小半天全都死磕在git上，还是不太会用。今天主要是学怎么把master的内容merge到gh-pages。<br>参考文档：</p>
<ul>
<li><a href="https://www.zhihu.com/question/24156818" target="_blank" rel="external">怎么预览GitHub项目里的网页或Demo？</a></li>
<li><a href="http://www.cnblogs.com/yuanzm/p/3945814.html" target="_blank" rel="external">如何将你的github仓库部署到github pages</a></li>
</ul>
<h1 id="Coding-the-Static-Restaurant-Site"><a href="#Coding-the-Static-Restaurant-Site" class="headerlink" title="Coding the Static Restaurant Site"></a>Coding the Static Restaurant Site</h1><p>这一章是网站实战——一个餐厅的网站，从客户沟通到网站制作一整个系列的过程都讲得很清楚。</p>
<h2 id="Visit-with-the-Client-amp-Setup-Overview"><a href="#Visit-with-the-Client-amp-Setup-Overview" class="headerlink" title="Visit with the Client &amp; Setup Overview"></a>Visit with the Client &amp; Setup Overview</h2><p>给个建议：Google for ‘web development client questionnaire’<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-19_16:49:41.jpg" alt="2016-08-19_16:49:41.jpg"></p>
<h3 id="Design-Overview"><a href="#Design-Overview" class="headerlink" title="Design Overview"></a>Design Overview</h3><p><a href="https://balsamiq.com/" target="_blank" rel="external">Mockup工具——balsamiq</a></p>
<h3 id="Some-Ground-Rules-and-Overview-of-Setup"><a href="#Some-Ground-Rules-and-Overview-of-Setup" class="headerlink" title="Some Ground Rules and Overview of Setup"></a>Some Ground Rules and Overview of Setup</h3><p>记得启用browser sync，不记得怎么用的话请Google<br>如果要用一种电脑里没有的字体该怎么办？找Google！<br><a href="https://www.google.com/fonts" target="_blank" rel="external">https://www.google.com/fonts</a></p>
<h2 id="Coding-the-Navigation-Bar-of-the-Site"><a href="#Coding-the-Navigation-Bar-of-the-Site" class="headerlink" title="Coding the Navigation Bar of the Site"></a>Coding the Navigation Bar of the Site</h2><h3 id="Coding-Basics-of-Navbar-Header"><a href="#Coding-Basics-of-Navbar-Header" class="headerlink" title="Coding Basics of Navbar Header"></a>Coding Basics of Navbar Header</h3><p>又碰到两个div互相挤，怎么样把他们并排放呢？在第一个div的内容里的a标签上加一句<code>class=&quot;pull-left&quot;</code>这个是bootstrap里面自带的。<br>text-shadow，自行搜索怎么用。<br>鉴于这是一个响应式设计，如果希望在小屏不显示logo的话，还是在刚刚那个位置加<code>class=&quot;pull-left visible-md visible-lg&quot;</code>这句话的意思就是只在大屏和中屏显示logo</p>
<h3 id="Coding-Button-for-Future-Collapsible-Menu"><a href="#Coding-Button-for-Future-Collapsible-Menu" class="headerlink" title="Coding Button for Future Collapsible Menu"></a>Coding Button for Future Collapsible Menu</h3><p>来讨论一下小屏显示的menu按钮，还是直接用bootstrap，在button标签加一个<code>class=&quot;navbar-toggle collapsed&quot;</code>，不过要注意的是<code>collapsed</code>并不是bootstrap的内容，它是bootstrap的一个插件功能，意思是，当这个按钮被点击的时候，就collapsed。</p>
<h3 id="Coding-Nav-Menu-Buttons"><a href="#Coding-Nav-Menu-Buttons" class="headerlink" title="Coding Nav Menu Buttons"></a>Coding Nav Menu Buttons</h3><p>这里要用到icon font。<br>另外还有一个属性<code>class=&quot;hidden-xs&quot;</code>，代表的是，当屏幕变小(xs)的时候，这个部分会隐藏不见。</p>
<h3 id="Fixing-Navbar-Layout-Text-and-Dropdown-Menus"><a href="#Fixing-Navbar-Layout-Text-and-Dropdown-Menus" class="headerlink" title="Fixing Navbar Layout, Text, and Dropdown Menus"></a>Fixing Navbar Layout, Text, and Dropdown Menus</h3><p>这里出现一个<code>font-size: 5vw</code>，什么意思呢？<br>1vw = 1% of viewport width<br>这个单位是响应式的，可以随着屏幕宽度的变化而变化</p>
<h3 id="Coding-the-Jumbotron"><a href="#Coding-the-Jumbotron" class="headerlink" title="Coding the Jumbotron"></a>Coding the Jumbotron</h3><p>不同尺寸的屏幕下显示的图片尺寸也不同，所以要在css的不同的media queries下定义不同尺寸的背景图。<br>在html里引用图片地址的时候，用最小的那个，这样不会对浏览器加载造成太多负担。</p>
<h2 id="Coding-the-Homepage-and-the-Footer"><a href="#Coding-the-Homepage-and-the-Footer" class="headerlink" title="Coding the Homepage and the Footer"></a>Coding the Homepage and the Footer</h2><h3 id="Coding-Navigation-Tiles"><a href="#Coding-Navigation-Tiles" class="headerlink" title="Coding Navigation Tiles"></a>Coding Navigation Tiles</h3><p>来，介绍一个新工具，快速填充图片：<a href="http://placehold.it/" target="_blank" rel="external">http://placehold.it/</a> 用法如下：<br><code>&lt;img src=&quot;http://placehold.it/350x150&quot;&gt;</code><br>给图片加遮罩？css代码如下：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="selector-id">#menu-tile</span>, <span class="selector-id">#specials-tile</span>, <span class="selector-id">#map-tile</span> &#123;</div><div class="line">  <span class="attribute">height</span>: <span class="number">250px</span>;</div><div class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</div><div class="line">  <span class="attribute">margin-bottom</span>: <span class="number">15px</span>;</div><div class="line">  <span class="attribute">position</span>: relative;</div><div class="line">  <span class="attribute">border</span>: <span class="number">2px</span> solid <span class="number">#3F0C1F</span>;</div><div class="line">  <span class="attribute">overflow</span>: hidden;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>如何嵌套地图？Google提供嵌套代码，share link和embed map都要添加，记得修改宽高，和css里的保持一致。</p>
<h3 id="Coding-the-Footer"><a href="#Coding-the-Footer" class="headerlink" title="Coding the Footer"></a>Coding the Footer</h3><p><code>&lt;footer class=&quot;panel-footer&quot;&gt;</code>直接用element和class，有default样式。<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="selector-id">#testimonials</span> <span class="selector-tag">p</span><span class="selector-pseudo">:nth-child(2)</span> &#123;</div><div class="line">  <span class="attribute">margin-top</span>: <span class="number">25px</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>又用上了<code>nth-child(2)</code>这一句，意思是对testimonials的第二个p生效。</p>
<h2 id="Coding-the-Restaurant-Menu-Pages"><a href="#Coding-the-Restaurant-Menu-Pages" class="headerlink" title="Coding the Restaurant Menu Pages"></a>Coding the Restaurant Menu Pages</h2><h3 id="Coding-the-Menu-Categories"><a href="#Coding-the-Menu-Categories" class="headerlink" title="Coding the Menu Categories"></a>Coding the Menu Categories</h3><p>复制主页的index.html，头尾都不用变，更换一下main-content的内容。<br>定制了一个超小屏xxs，仿照xs来的</p>
<h3 id="Coding-the-Single-Menu-Category-Page"><a href="#Coding-the-Single-Menu-Category-Page" class="headerlink" title="Coding the Single Menu Category Page"></a>Coding the Single Menu Category Page</h3>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;0813：为什么网速这么慢，今天写不完作业下周我就不记得怎么写了！&lt;br&gt;0809：算了下，以每天一小节的速度，学完整个课程还要14天，勉勉强强赶在上学前……&lt;br&gt;0807：到目前为止，课上讲的html还在我的知识储备内。(学代码最好的办法就是去写代码呀，忘了不要紧，被逼着写一回就全想起来了。)&lt;br&gt;0805：有一种当年自学html&amp;amp;css靠的都是野路子，这才是正规军的感觉。&lt;br&gt;0804：&lt;br&gt;老师长得太可爱啦，自带腮红！&lt;br&gt;你好呀，html&amp;amp;css，又见面了耶！(JavaScript你也好，然而我们并不熟。)&lt;br&gt;所有这种编程课，我最喜欢的都是第一节——安装各种工具。&lt;br&gt;
    
    </summary>
    
    
      <category term="coursera" scheme="http://yibeichen.me/tags/coursera/"/>
    
      <category term="web development" scheme="http://yibeichen.me/tags/web-development/"/>
    
      <category term="HTML" scheme="http://yibeichen.me/tags/HTML/"/>
    
      <category term="CSS" scheme="http://yibeichen.me/tags/CSS/"/>
    
      <category term="JavaScript" scheme="http://yibeichen.me/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>Machine Learning 课程笔记 (未完)</title>
    <link href="http://yibeichen.me/2016/08/13/Machine-Learning/"/>
    <id>http://yibeichen.me/2016/08/13/Machine-Learning/</id>
    <published>2016-08-13T07:28:11.000Z</published>
    <updated>2018-02-05T14:21:27.718Z</updated>
    
    <content type="html"><![CDATA[<p>笔记完成时间：0813(逻辑回归) 0806(Octave基本操作) 0805(多元线性回归) 0804(线代复习) 0803(一元线性回归) 0801(简介)<br>0806：写个作业要看15页的文档，好难过。(做完作业觉得智商为负。转置总弄错！)<br>0804：LaTex问题待解决。<br>0803：怎么用markdown写数学公式？<br>0801：抽风，笔记用英文开始，最后还是转向了中文。<br><a id="more"></a><br>Coursera地址: <a href="https://www.coursera.org/learn/machine-learning" target="_blank" rel="external">机器学习</a></p>
<h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>Machine Learning</p>
<ul>
<li>Grew out of work in AI</li>
<li>New capability for computers</li>
</ul>
<p>Tom Mitchell provides a more <strong>modern definition</strong>: “A computer program is said to learn from experience E with respect to some class of tasks T and performance measure P, if its performance at tasks in T, as measured by P, improves with experience E.”<br>Example: playing checkers.<br>E = the experience of playing many games of checkers<br>T = the task of playing checkers.<br>P = the probability that the program will win the next game.</p>
<p>Examples:</p>
<ul>
<li>Database mining<ul>
<li>Web click data</li>
<li>medical records</li>
<li>biology</li>
<li>engineering</li>
</ul>
</li>
<li>Applications can’t program by hand<ul>
<li>Autonomous helicopter</li>
<li>handwriting recognition</li>
<li>most of Natural Language Processing(NLP)</li>
<li>Computer Vision</li>
</ul>
</li>
<li>Self-customizing programs<ul>
<li>Amazon product recommendations</li>
</ul>
</li>
<li>Understanding human learning brain(brain, real AI)</li>
</ul>
<h2 id="Supervised-Learning"><a href="#Supervised-Learning" class="headerlink" title="Supervised Learning"></a>Supervised Learning</h2><p><em>probably the most common type of ML problem</em></p>
<h3 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a>Examples</h3><h4 id="Housing-price-prediction"><a href="#Housing-price-prediction" class="headerlink" title="Housing price prediction"></a>Housing price prediction</h4><p>Given this data, you have a friend who owns a house that is 750 square feet and hoping to sell the house and they want to know how much the can get for the house.<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-01_15:33:48.jpg" alt="2016-08-01_15:33:48.jpg"></p>
<p><strong>How can the learning algorithm help you?</strong></p>
<ul>
<li>straight line through the data<br>maybe about $150,000</li>
<li>a second-order polynomial<br>closer to $200,000</li>
</ul>
<p>How to chose and how to decide do you want to fit a straight line to the data or do you want to fit the quadratic function to the data.(<strong>talk later</strong>)</p>
<p><strong>What does this mean?</strong><br>Supervised learning refers to the fact that we gave the algorithm a data set in which the “right answers” were given.</p>
<ul>
<li>we give the algorithm a data set of houses in which for every example in this data set, we told it what is the right price so what is the actual price that, that house sold for and the toss of the algorithm was to just produce more of these right answers.</li>
<li>also called <strong>a regression problem</strong> which means trying to predict a <em>continuous(not discrete)</em> value output.</li>
</ul>
<h4 id="Breast-cancer-malignant-benign"><a href="#Breast-cancer-malignant-benign" class="headerlink" title="Breast cancer (malignant, benign)"></a>Breast cancer (malignant, benign)</h4><p>Look at medical records and try to predict of a breast cancer as malignant or benign.<br>Let’s say a friend who tragically has a breast tumor, according to the size of her tumor, can you estimate what is the chance that a tumor is malignant versus benign?<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-01_16:00:36.jpg" alt="2016-08-01_16:00:36.jpg"></p>
<p><strong>a classification problem</strong></p>
<ul>
<li>refers to we’re trying to predict a <em>discrete</em> value output: zero or one, malignant or benign.</li>
<li>sometimes you can have more than two values for the two possible values for the output.<ul>
<li>e.g. there are three types of breast cancers and so you may try to predict the discrete value of zero, one, two, or three with zero being benign, one means type one cancer, two means a second type of cancers, and three means the third type.</li>
</ul>
</li>
</ul>
<p><strong>another way to plot the data</strong><br>map it down to a real line and use different symbols to denote malignant versus benign examples.<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-01_16:29:37.jpg" alt="2016-08-01_16:29:37.jpg"></p>
<p>↑↑↑we use only one feature or one attribute <em>tumor size</em><br>↓↓↓we have more than one feature, more than one attribute <em>age and tumor size</em><br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-01_16:30:57.jpg" alt="2016-08-01_16:30:57.jpg"><br>given a data set like this, the learning algorithm mighy throw the straight line through the data to try to separate out the malignant tumors from the benign ones.</p>
<p><strong>How do you deal with an infinite numbers of feature?</strong><br>an algorithm called the Support Vector Machine</p>
<ul>
<li>allow a computer to deal with an infinite numbers of features.</li>
</ul>
<h3 id="Recap"><a href="#Recap" class="headerlink" title="Recap"></a>Recap</h3><ul>
<li>Supervised learning lets you get the <em>correct</em> data</li>
<li>a regression problem–predict a continuous(not discrete) value output</li>
<li>a classification problem–predict a discrete value output</li>
</ul>
<h2 id="Unsupervised-Learning"><a href="#Unsupervised-Learning" class="headerlink" title="Unsupervised Learning"></a>Unsupervised Learning</h2><p>We’re given data that that doesn’t have any labels or that all has the same label or really no labels. And we’re not told what to do with it and what each data point is.<br>Instead we’re just told, here is a data set. Can you find some structure in the data?<br>an Unsupervised Learning algorithm might decide that the data lives in two different clusters<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-01_16:55:25.jpg" alt="2016-08-01_16:55:25.jpg"></p>
<h3 id="clustering-algorithms"><a href="#clustering-algorithms" class="headerlink" title="clustering algorithms"></a>clustering algorithms</h3><h4 id="Examples-1"><a href="#Examples-1" class="headerlink" title="Examples"></a>Examples</h4><h5 id="Google-URLs"><a href="#Google-URLs" class="headerlink" title="Google URLs"></a>Google URLs</h5><p>you click different links then you get different stories.<br>So what Google News has done is look for tens of thousands of news stories and automatically cluster them together. The news stories that are all about the same topic get displayed together.</p>
<h5 id="DNA-microarray-data"><a href="#DNA-microarray-data" class="headerlink" title="DNA microarray data"></a>DNA microarray data</h5><p> The idea is put a group of different individuals and for each of them, you measure how much they do or do not have a certain gene.<br> These colors, red, green, gray and so on, they show the degree to which different individuals do or do not have a specific gene.<br> <img src="http://oapfne1kf.bkt.clouddn.com/2016-08-01_17:03:40.jpg" alt="2016-08-01_17:03:40.jpg"><br> What you can do is run a clustering algorithm to group individuals into different categories or into different types of people.  </p>
<h4 id="Applications"><a href="#Applications" class="headerlink" title="Applications"></a>Applications</h4><ul>
<li>organize large computer clusters<br>at large data centers, figure out which machines tend to work together and if you put them together, you can make your data center work more efficiently</li>
<li>social network analysis<br>given knowledge about which friends you email the most or given your Facebook friends or your Google+ circles, can we automatically identify which are cohesive groups of friends, also which are groups of people that all know each other?</li>
<li>market segmentation<br>look at the customer data set and automatically discover market segments and group customers into different market segments so that you can automatically and more efficiently sell or market your different market segments together?</li>
<li>surprisingly astronomical data analysis<br>gives surprisingly interesting useful theories of how galaxies are born.</li>
</ul>
<h3 id="cocktail-party-problem-algorithm"><a href="#cocktail-party-problem-algorithm" class="headerlink" title="cocktail party problem algorithm"></a>cocktail party problem algorithm</h3><p>(好了，我要上中文了)<br>想象有一个鸡尾酒会，房间里到处都是人，同时交谈，声音会重叠，你可能连站在你对面的那个人说的话都听不见。<br>那么重新想象一个只有两个人1和2的鸡尾酒会，他们同时交谈，房间里有两个麦克风A和B，放在不同的位置，因为距离不同，所以两个麦克风对这两个人的录音效果也不同。可能有在麦克风A那里1的声音大2的声音小，在B那里则是1的声音小2的声音大。<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-01_17:33:12.jpg" alt="2016-08-01_17:33:12.jpg"><br>但是A和B都记录了两种声音，output的时候就会感受到声音的重叠。<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-01_17:34:07.jpg" alt="2016-08-01_17:34:07.jpg"><br>假如两个人同时用不同的语言法语和英语数数，那么output的混音就是什么都听不见了，所以我们需要把法语和英语分开输出。</p>
<p>这就是传说中的“鸡尾酒会问题算法”。<br>这么一个看上去简简单单的应用，区分两条音轨，用Java可能要写成千上万条代码。但是聪明机智锲而不舍的研究者们折腾出了下面这个，仅仅一条代码瞬间解决问题↓↓↓<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-01_17:24:09.jpg" alt="2016-08-01_17:24:09.jpg"><br>(看不懂这个公式)</p>
<h3 id="Octave"><a href="#Octave" class="headerlink" title="Octave"></a>Octave</h3><p><strong>[W,s,v] = svd((repmat(sum(x.<em>x,1), size(x,1),1).</em>x)*x’)</strong><br>用的是Octave，也就是我们这门课要用的编程环境。<br>Octave/Matlab 和 Java/C++ 高下立见是吧。(还有我的Python也被黑了)</p>
<ul>
<li>SVD(singular value decomposition)–linear algebra routine which is built into octave</li>
<li>using MATLAB to prototype is a really good way to do this</li>
</ul>
<h1 id="Linear-Regression-with-One-Variable-一元线性回归"><a href="#Linear-Regression-with-One-Variable-一元线性回归" class="headerlink" title="Linear Regression with One Variable (一元线性回归)"></a>Linear Regression with One Variable (一元线性回归)</h1><h2 id="Model-and-Cost-Function"><a href="#Model-and-Cost-Function" class="headerlink" title="Model and Cost Function"></a>Model and Cost Function</h2><h3 id="Model-Representation"><a href="#Model-Representation" class="headerlink" title="Model Representation"></a>Model Representation</h3><p>Housing Price Predict</p>
<ul>
<li>supervised learning algorithm</li>
<li>linear regression</li>
</ul>
<ol>
<li>Training set (this is your data set)</li>
<li>Notation (used throughout the course)<ul>
<li>m = number of training examples</li>
<li>x’s = input variables / features</li>
<li>y’s = output variable “target” variables<ul>
<li>(x,y) - single training example</li>
<li>(x^{i}, y^{i}) - specific example (i^{th} training example)<ul>
<li>i is an index to training set</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<p><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-03_11:50:42.jpg" alt="2016-08-03_11:50:42.jpg"><br>(把这一整张都截图下来不算侵权吧？忐忑)<br>这个函数的名字叫做hypothesis，跟科研中的“hypothesis”(假设)的含义有很大区别，反正约定俗称就这样称呼了，不用太惊讶。</p>
<p>在预测房价这个问题中，一个自变量x(房子的面积)，一个因变量y(房价)，被称为一元线性回归, univariate也是一元的意思。<br>那么，怎么来表示函数h(hypothesis的缩写)呢？<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-03_12:52:15.jpg" alt="2016-08-03_12:52:15.jpg"><br>就是一元一次函数啦：y=b+kx</p>
<h3 id="Cost-Function-成本函数"><a href="#Cost-Function-成本函数" class="headerlink" title="Cost Function (成本函数)"></a>Cost Function (成本函数)</h3><p>顾名思义，成本函数，当然是要降低成本，所以这个函数越小越好。</p>
<p>也就是，根据样本数据，拟合一条直线出来。通常，这些样本数据的分布并不是非常完美的，它们大致会落在一条直线的附近。这条直线具体长什么样，取决于h函数的参数。<br>参数选得好，h函数做预测就会比较精确。而成本函数就是用来评估参数的好坏。<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-03_13:27:49.jpg" alt="2016-08-03_13:27:49.jpg"><br>有没有觉得跟标准差的公式很相似？<br>道理是一样的，标准差也是用来描述一组数据的波动状况呀，越小表示数据越稳定。<br>所以呢，这个函数的另一个名字叫做 squared error function。</p>
<p>hθ(x)是关于变量x的函数，J(θ1)是关于参数θ的函数。<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-03_2016-08-03_14:59:51.jpg" alt="2016-08-03_2016-08-03_14:59:51.jpg"><br>对于每一个θ1，都有一个对应的J(θ1)曲线<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-03_15:00:09.jpg" alt="2016-08-03_15:00:09.jpg"><br>而我们的目标就是找到一个θ1，使得J(θ1)最小化，这张图上的最小值是θ1=1，我们就可以用这个θ1=1来设定我们的拟合函数h。</p>
<p>上面这个案例是简化了算法，将θ0设定为0，接下来就回到原始的复杂数据上，来感受一下更普遍一点的线性回归。<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-03_19:21:13.jpg" alt="2016-08-03_19:21:13.jpg"><br>这下我们有了两个参数θ0,θ1，J(θ0,θ1)的图形就不再是一条线了，而是下面这种三维曲面图：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-03_19:25:25.jpg" alt="2016-08-03_19:25:25.jpg"><br>不过，为了便于理解，接下来还是用轮廓图讲解：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-03_19:28:36.jpg" alt="2016-08-03_19:28:36.jpg"><br>右边图中的椭圆，就是J(θ0,θ1)值相同的所有点的集合。<br>同心圆最中间那个圈的中心，就是函数J的最小值。</p>
<h2 id="Parameter-Learning"><a href="#Parameter-Learning" class="headerlink" title="Parameter Learning"></a>Parameter Learning</h2><h3 id="Gradient-Descent-梯度下降"><a href="#Gradient-Descent-梯度下降" class="headerlink" title="Gradient Descent (梯度下降)"></a>Gradient Descent (梯度下降)</h3><p>这种算法在机器学习中应用得很广，不仅仅是一元线性回归，下面这个就是常用的做法：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-03_21:06:28.jpg" alt="2016-08-03_21:06:28.jpg"><br>假设有个函数J(不一定是线性回归)，要求它的成本函数，通常是要先设定θ0,θ1，把它们都初始为0，然后一点点改变这两个参数，使得成本函数的值最低，图形如下：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-03_21:06:55.jpg" alt="2016-08-03_21:06:55.jpg"><br>为了更好地理解梯度下降，你可以把图上的这两个高点想象成公园的两座小山，你站在其中一座山的某一点上，环顾四周，问自己：“假如要以最快的速度下山，我该走哪个方向呢？”你找到了一个方向，往前走了一步，现在你站在新的起点上，再一次问自己刚刚那个相同的问题。然后又迈出了一步……如此重复这几个步骤，直到你抵达局部最低点。<br>这个算法的有趣之处在于，如果你的起点偏离了一些，你得到的局部最优解也是不同的。</p>
<p>接下来是梯度下降算法的定义：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-03_21:22:28.jpg" alt="2016-08-03_21:22:28.jpg"><br>这张图特意保留了笔记，助于日后唤醒记忆。<br>α 指的是learning rate，它控制着我们更新参数θj的幅度。<br>α 旁边的那串是导数项(derivative term)<br>要注意的是赋值的时候要同步更新 <strong>simultaneous update</strong><br>做课间练习的时候我还错了！明明右边的算法是错的，我还是用了它……</p>
<p>接下来讲了偏导数，不懂，没关系，课程还是可以继续下去！<br>至于导数，现学：就是求曲线上一点的切线的斜率，如果斜率为正，那就是正导数。下面这两个图就是一个正导数和一个负导数：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-03_21:39:01.jpg" alt="2016-08-03_21:39:01.jpg"></p>
<p>接下来看看α的大小对梯度下降的影响：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-03_21:41:31.jpg" alt="2016-08-03_21:41:31.jpg"><br>如果它的值过大，θ1会跑得很快，可能永远也找不到最优解。<br>如果它的值过小，θ1跑得会慢一点，但肯定不会错过最低点。</p>
<p>假如我们初始化的θ1已经是最低点了，再用梯度下降这个公式会怎么样呢？<br>保持不变，因为导数为0了呀。<br>正是由于导数的存在，所以在越接近最低点的时候θ1的值变化得越小，因为斜率越小呀，所以不用总是改变α的值。</p>
<h3 id="Gradient-Descent-For-Linear-Regression"><a href="#Gradient-Descent-For-Linear-Regression" class="headerlink" title="Gradient Descent For Linear Regression"></a>Gradient Descent For Linear Regression</h3><p>先复习一下这两个算法，如何将梯度下降应用到线性回归的成本函数中呢？最重要的部分是导数那块：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-03_21:51:46.jpg" alt="2016-08-03_21:51:46.jpg"><br>来，让我们推导一下：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-03_21:54:22.jpg" alt="2016-08-03_21:54:22.jpg"><br>再代入一下：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-03_21:58:42.jpg" alt="2016-08-03_21:58:42.jpg"><br>还记得吗？梯度下降的图形有两个山头，所以它有好几个局部最优解，但是成本函数的图形是一个 <strong>凸函数</strong>，又称 <strong>弓形函数</strong>，只有一个全局最优解。所以呢，用梯度下降来计算成本函数，只会得到一个全局最优解。</p>
<p>两种算法结合在一起构成的新的算法，就是线性回归算法，又称为批量梯度下降 <strong>“Batch” Gradient Descent</strong>。<br>“批量”意味着，下降过程中用到了所有样本数据。<br>也有一些其他的梯度下降方法，并不会用到所有的数据，而只是用了这些数据的子集。以后的课程会介绍。</p>
<p>线性代数中有一种称为正规方程 <strong>normal equations</strong> 的方法，可以不用梯度下降，也能求出J的最小值。不过，梯度下降更适用于large data。</p>
<h1 id="Linear-Algebra-Review"><a href="#Linear-Algebra-Review" class="headerlink" title="Linear Algebra Review"></a>Linear Algebra Review</h1><h2 id="Matrices-and-Vectors-矩阵和向量"><a href="#Matrices-and-Vectors-矩阵和向量" class="headerlink" title="Matrices and Vectors (矩阵和向量)"></a>Matrices and Vectors (矩阵和向量)</h2><h3 id="矩阵"><a href="#矩阵" class="headerlink" title="矩阵"></a>矩阵</h3><p>矩阵可以理解为一个二维数组，矩阵的维度计算：行数乘以列数，比如4X2矩阵(R4X2,注意数字是上标)。<br>如何来表示一个特定的矩阵元素呢？以下图为例：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-04_18:39:42.jpg" alt="2016-08-04_18:39:42.jpg"><br>所以，A11=1402, A12=191, A43=undefined (注意，数字是下标)</p>
<h3 id="向量"><a href="#向量" class="headerlink" title="向量"></a>向量</h3><p>向量是一个nX1的矩阵，n是行数，1是列数，向量的维度计算以行数为参考，比如4维向量(R4,数字是上标)。<br>向量内的元素引用公式为：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-04_CodeCogsEqn.png" alt="2016-08-04_CodeCogsEqn.png"><br>({y}^{i}={i}^{th}$)<br>通常有两种向量索引表示方法：1-索引和0-索引，如下图：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-04_18:57:29.jpg" alt="2016-08-04_18:57:29.jpg"><br>很像Python里的数组，用的是0-indexed。<br>在数学上，用1-indexed比较多，在机器学习中0-indexed则更广泛些。</p>
<p>最后，在矩阵和向量的使用过程中，通常会用大写字母来表示矩阵，用小写字母表示数字或向量。</p>
<h2 id="Addition-and-Scalar-Multiplication-加法和标量乘法"><a href="#Addition-and-Scalar-Multiplication-加法和标量乘法" class="headerlink" title="Addition and Scalar Multiplication (加法和标量乘法)"></a>Addition and Scalar Multiplication (加法和标量乘法)</h2><h3 id="矩阵加法"><a href="#矩阵加法" class="headerlink" title="矩阵加法"></a>矩阵加法</h3><p>两个矩阵相加，就是把两个矩阵里的元素逐个相加，只有两个维度相同的矩阵才可以相加。</p>
<h3 id="标量乘法"><a href="#标量乘法" class="headerlink" title="标量乘法"></a>标量乘法</h3><p>scalar指的是real number，也就是说，一个实数和一个矩阵相乘，就是把矩阵中的每个元素都和这个实数相乘。除法也是同理。乘除前后的矩阵维度是不变的。</p>
<h3 id="综合运算-combination-of-operands"><a href="#综合运算-combination-of-operands" class="headerlink" title="综合运算(combination of operands)"></a>综合运算(combination of operands)</h3><p>也很简单啦，和实数的综合运算规律一样：先乘除后加减。</p>
<h2 id="Matrix-Vector-Multiplication-矩阵向量乘法"><a href="#Matrix-Vector-Multiplication-矩阵向量乘法" class="headerlink" title="Matrix Vector Multiplication(矩阵向量乘法)"></a>Matrix Vector Multiplication(矩阵向量乘法)</h2><p>来看一个例子，一个3X2的矩阵和一个2X1向量相乘会得到一个3*1向量。<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-04_19:38:23.jpg" alt="2016-08-04_19:38:23.jpg"><br>注意了，这里讲的是一个m x n矩阵和一个n x 1矩阵(n维向量)相乘，得到一个m维向量。<br>具体做法是：把矩阵A的第一行元素和向量x里对应的元素相乘后相加，得到向量y的第一个元素，再把矩阵第二行元素和向量x对应的元素相乘后相加，得到向量y的第二个元素……以此类推。<br>来看一下前几节课说的房价预测的案例，怎么用矩阵向量乘法来快速计算呢？如下图：<img src="http://oapfne1kf.bkt.clouddn.com/2016-08-04_19:48:35.jpg" alt="2016-08-04_19:48:35.jpg"><br>把它们弄成矩阵和向量，就可以很容易地用计算机语言比如Octave(Python也可以)来实现了：<br><figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:, <span class="number">1000</span>,</div><div class="line">  prediction(<span class="built_in">i</span>):……</div></pre></td></tr></table></figure></p>
<p>上面这行代码可能是Octave的，总之这样写代码很简洁高效。</p>
<h2 id="Matrix-Matrix-Multiplication-矩阵和矩阵相乘"><a href="#Matrix-Matrix-Multiplication-矩阵和矩阵相乘" class="headerlink" title="Matrix Matrix Multiplication (矩阵和矩阵相乘)"></a>Matrix Matrix Multiplication (矩阵和矩阵相乘)</h2><p>矩阵和矩阵相乘，可以把第二个矩阵拆分为多个向量，就变成了矩阵和向量相乘，最后把得到的向量组合成矩阵：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-04_19:57:46.jpg" alt="2016-08-04_19:57:46.jpg"><br>注意，相乘的两个矩阵是有特点的，前一个矩阵的列数等于后一个矩阵的行数。<br>再用房价预测的案例，当有多个假设函数的时候，怎么用矩阵和矩阵乘法来计算：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-04_20:02:28.jpg" alt="2016-08-04_20:02:28.jpg"><br>一次矩阵计算就可以得到12个预测结果，而且很多编程语言都有丰富的线性代数库，用起来非常方便。</p>
<h2 id="Matrix-Multiplication-Properties"><a href="#Matrix-Multiplication-Properties" class="headerlink" title="Matrix Multiplication Properties"></a>Matrix Multiplication Properties</h2><p>介绍一些关于矩阵乘法的特性：</p>
<ol>
<li>乘法交换律对矩阵并不适用。(《上帝掷骰子吗？》讲到了是薛定谔还是谁？就是通过矩阵的交换乘法发现了量子的特征？啊呀，不记得了。)</li>
<li>矩阵符合乘法结合律。</li>
</ol>
<h3 id="单位矩阵-identity-matrix"><a href="#单位矩阵-identity-matrix" class="headerlink" title="单位矩阵 (identity matrix)"></a>单位矩阵 (identity matrix)</h3><p>这样来理解吧，在实数乘法中，1乘以任何数都等于任何数，所以1就是一个identity，而在矩阵界也有这样的数：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-04_20:24:45.jpg" alt="2016-08-04_20:24:45.jpg"><br>看看这个销魂的板书，这种单位矩阵的特点就是，对角线都是1，其他部分全部是0.</p>
<h2 id="Inverse-and-Transpose-求倒和转置"><a href="#Inverse-and-Transpose-求倒和转置" class="headerlink" title="Inverse and Transpose (求倒和转置)"></a>Inverse and Transpose (求倒和转置)</h2><h3 id="求倒运算"><a href="#求倒运算" class="headerlink" title="求倒运算"></a>求倒运算</h3><p>实数界除了0以外的数都有倒数，那么矩阵界呢？<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-04_20:28:58.jpg" alt="2016-08-04_20:28:58.jpg"><br>注意，只有方阵才有导数，如果方阵的所有元素都是0，也是没有倒数的，矩阵和它的倒数相乘得到的是单位矩阵，所以其实是根据单位矩阵来推算矩阵倒数，很多编程软件都有求逆矩阵的软件库。</p>
<p>另外，对于那些没有倒数的矩阵，他们被称为奇异(singular)矩阵或者退化(degenerate)矩阵。</p>
<h3 id="转置运算"><a href="#转置运算" class="headerlink" title="转置运算"></a>转置运算</h3><p>最直观的理解就是，沿着矩阵的对角线画一条线，再以这条线为轴将矩阵翻转。来继续看一看销魂的板书吧：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-04_20:38:21.jpg" alt="2016-08-04_20:38:21.jpg"><br>如何检验转置运算的对错？看第一个和最后一个元素，它俩是不变的。</p>
<h1 id="Linear-Regression-with-Multiple-Variables"><a href="#Linear-Regression-with-Multiple-Variables" class="headerlink" title="Linear Regression with Multiple Variables"></a>Linear Regression with Multiple Variables</h1><h2 id="Multivariate-Linear-Regression-多元线性回归"><a href="#Multivariate-Linear-Regression-多元线性回归" class="headerlink" title="Multivariate Linear Regression (多元线性回归)"></a>Multivariate Linear Regression (多元线性回归)</h2><h3 id="Multiple-Features-多变量"><a href="#Multiple-Features-多变量" class="headerlink" title="Multiple Features (多变量)"></a>Multiple Features (多变量)</h3><p>上一个案例：房价预测，只有一个变量是x(房子的面积)。现在，变成多变量就是x1(房间面积)、x2(房子楼层)、x3(房子的年数)……<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-05_21:15:45.jpg" alt="2016-08-05_21:15:45.jpg"><br>这个图很好看懂吧？多个变量可以凑成一个向量。<br>为了帮助理解，上标表示第几行，下标表示第几列。<br>那么函数怎么表示呢？一个变量是一元一次函数，多个变量当然就是多元一次函数啦。<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-05_21:24:06.jpg" alt="2016-08-05_21:24:06.jpg"><br>图上第一行就是这个多元一次函数，手写部分是简化这个函数的步骤，还记得上节课说的转置运算吗？这个函数最终被简化为矩阵θ的倒数和矩阵x的乘积。<br>注意，这里引进了x_0，并设定它等于1.</p>
<h3 id="Gradient-Descent-for-Multiple-Variables"><a href="#Gradient-Descent-for-Multiple-Variables" class="headerlink" title="Gradient Descent for Multiple Variables"></a>Gradient Descent for Multiple Variables</h3><p>这节自然就是要讲用梯度下降来解决多元线性回归问题了。<br>首先，我们来看一下从一元变成多元，成本函数发生了什么样的变化：<br>注意，多个参数和多个变量都被写成了向量的形式。<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-05_21:30:28.jpg" alt="2016-08-05_21:30:28.jpg"><br>接下来再看看梯度下降的公式有什么变化：<br>仔细看一下会发现，左右两边其实是一样的，运算的规则没有什么区别。<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-05_2016-08-05_2016-08-05_2016-08-05_2016-08-05_2016-08-05_2016-08-05_2016-08-05_2016-08-05_21:33:11.jpg" alt="2016-08-05_2016-08-05_2016-08-05_2016-08-05_2016-08-05_2016-08-05_2016-08-05_2016-08-05_2016-08-05_21:33:11.jpg"></p>
<h3 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h3><p>来，我们讲一讲梯度下降在实例中的应用</p>
<h4 id="Feature-Scaling-特征缩放"><a href="#Feature-Scaling-特征缩放" class="headerlink" title="Feature Scaling (特征缩放)"></a>Feature Scaling (特征缩放)</h4><p>这到底是什么呢？<br>这么说吧，它的目标就是要确保多个不同的特征(变量)在一个相似的范围内。<br>比如房价预测问题中，有两个变量x1(房间面积0-2000㎡)、x2(房间数量1-5)，这两个变量的取值相差太大了，这样画出来的成本函数就是那种非常细长的椭圆，再用梯度下降来算的话，会特别特别得慢。<br>那特征缩放是怎么做呢？<br>把x1除以2000、x2除以5，使得这两个变量的范围都在[0，1]，这样的话，画出的成本函数图就比较圆了，梯度下降就会更快。</p>
<p>通常，我们把各个变量的范围通过特征缩放，控制在[-1,1]左右，上下有误差没关系，只要各个变量之间的差别不大就行。<br>这也是有公式可以用的，注意公式里出现的两个数，一个是平均值，一个是极差。<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-05_22:03:22.jpg" alt="2016-08-05_22:03:22.jpg"></p>
<h4 id="Learning-Rate-学习率α"><a href="#Learning-Rate-学习率α" class="headerlink" title="Learning Rate (学习率α)"></a>Learning Rate (学习率α)</h4><p>还记得吧，α是梯度下降那个公式里的，所以这一小节主要讲两点：</p>
<ol>
<li>如何确保梯度下降是正确运行的，也就是debugging</li>
<li>如何选择α的值</li>
</ol>
<p>下面这张图提供了两种方法来检验梯度下降是否正确：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-05_22:12:59.jpg" alt="2016-08-05_22:12:59.jpg"></p>
<ol>
<li>看左边，以迭代的步数(不同的案例这个数是不同的)为横坐标，J(θ)的值为纵坐标，画出图形，正确的情况就是，每一次梯度下降都会使J(θ)减小，当图形无限接近x轴的时候，差不多就是求出最优解的时候了。如果图形是上升的曲线，差不多你的梯度下降就是错的了。</li>
<li>看右边，用的是公式，如果每次迭代J(θ)的值减少的量小于10^{-3}，那么差不多就是快求出解了，但是这个问题在于10^{-3}这个数很难界定。</li>
</ol>
<p>所以呢，当我们发现梯度下降不太对的时候，就可以考虑换一下α的值了。比如，上图的图形如果是上升的，α的值就应该调小一点。<br>同样，如果图形是”W”型的曲线，α的值也应该调小。<br>当然啦，α太小了就会变得很慢很慢，图形的坡度也会变小。</p>
<p>建议：挑选α的值可以隔3倍试一试。比如：<br>……, 0.001, 0.003, 0.01, 0.03, 0.1, 0.3, 1, ……</p>
<h3 id="Features-and-Polynomial-多项式-Regression"><a href="#Features-and-Polynomial-多项式-Regression" class="headerlink" title="Features and Polynomial (多项式) Regression"></a>Features and Polynomial (多项式) Regression</h3><p>首先，我们来讲怎么选择特征。<br>还是拿房价预测的例子吧，假如有两个变量，一个是房子临街的宽度，一个是房子的深度，但在设函数的时候，我们可以把变量定为宽度和深度的乘积，这样就变成了一个一元线性回归问题。</p>
<p>多项式指的是什么呢？其实就是多次啦。<br>假如有一个案例只有一个变量，但是你发现用一次函数或者二次函数都不能很好地拟合这个数据集，那么你可以用三次函数，这样你就有了x、x²、x³，然后你可以重新定义一个有三个变量的函数，这三个变量分别就是x_1=x、x_2=x²、x_3=x³.不过要注意的是，这样一来三个变量的取值范围可能差别会很大，在梯度下降的时候别忘了缩放。<br>除了多项式，你还可以用根号呀，用一个变量表示x，另一个变量表示x的平方根，不过同样也要注意取值范围。</p>
<p>讲了这么多，其实是想说明，碰到回归问题不是只有一元线性回归这一种做法，有很多解决问题的方案，注意变换看问题的角度。</p>
<h2 id="Computing-Parameters-Analytically"><a href="#Computing-Parameters-Analytically" class="headerlink" title="Computing Parameters Analytically"></a>Computing Parameters Analytically</h2><h3 id="Normal-Equation-正规方程"><a href="#Normal-Equation-正规方程" class="headerlink" title="Normal Equation (正规方程)"></a>Normal Equation (正规方程)</h3><p>在这之前，我们讲的都是用梯度下降求最优解，可能要迭代很多次才能收敛到一个最小值，而正规方程则提供了一种新方法，一步求得最优解。<br>先考虑一下实数情况下，J(θ)是关于θ的一元二次函数，怎么求最解呢？微积分的方法是求θ的导数，再把导数置0，就可以求出答案了。<br>那假如θ是一个向量呢，难道要把所有θ的导数都求出来置0吗？这样也可以，但是好麻烦。</p>
<p>那正规方程怎么弄呢？构造向量，转置运算！<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-06_11:58:45.jpg" alt="2016-08-06_11:58:45.jpg"><br>看见上图最后一行的公式了吧，是不是有熟悉的T出现了？下面的图解释了一下怎么转置：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-06_12:01:59.jpg" alt="2016-08-06_12:01:59.jpg"><br>我们再回过头看看公式，到底是什么意思呢？<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-06_12:05:59.jpg" alt="2016-08-06_12:05:59.jpg"><br>X的转置乘以X，再对乘积取导数，然后又乘以X的转置，再乘以y。<br>其实还是很好理解的对吧。</p>
<p>既然正规方程看上去简洁很多，那是不是就全部用它求解呢？我们来看一下梯度下降和正规方程的对比：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-06_12:12:17.jpg" alt="2016-08-06_12:12:17.jpg"><br>总结一下，当n大于1万的时候，我们用梯度下降，小于1万我们用正规方程。这说的是线性回归，当涉及到其他更复杂的回归问题的时候，正规方程可能没这么好用，还是梯度下降更方便。</p>
<h3 id="Normal-Equation-Noninvertibility-正规方程不可逆性"><a href="#Normal-Equation-Noninvertibility-正规方程不可逆性" class="headerlink" title="Normal Equation Noninvertibility (正规方程不可逆性)"></a>Normal Equation Noninvertibility (正规方程不可逆性)</h3><p><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-06_CodeCogsEqn.png" alt="2016-08-06_CodeCogsEqn.png"><br>不可逆的问题考虑的是，括号里的乘积得到的矩阵是不可逆的怎么办呢？这样的矩阵被称为奇异或退化矩阵(前面说求倒运算的时候也提到过)。<br>我们来看一下，什么情况下，X的转置和X的乘积是不可逆的：</p>
<ol>
<li>数据中有冗余的变量。比如，房价预测的问题中，一个变量是平方英尺为单位的面积，另一个则是平方米为单位的面积。</li>
<li>变量太多了。比如，变量比样本量还多，数据只有10个，变量却有100个。这时候就要删除一些变量了。这个问题还可以通过regularization的方法来解决，以后会讲到。</li>
</ol>
<p>所以，如果发现你得到一个不可逆的矩阵，那就回过头去检查上面两种情况，不过通常，不可逆矩阵出现的概率很小。Octave里有两个函数<code>pinv()</code>和<code>inv()</code>，可以用来求倒数。</p>
<h1 id="Octave-Tutorial"><a href="#Octave-Tutorial" class="headerlink" title="Octave Tutorial"></a>Octave Tutorial</h1><h2 id="Basic-Operations"><a href="#Basic-Operations" class="headerlink" title="Basic Operations"></a>Basic Operations</h2><p><code>%%</code>在Octave里表示注释<br><figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div></pre></td><td class="code"><pre><div class="line"><span class="comment">%% Change Octave prompt  </span></div><div class="line">PS1(<span class="string">'&gt;&gt; '</span>);</div><div class="line"><span class="comment">%% Change working directory in windows example:</span></div><div class="line">cd <span class="string">'c:/path/to/desired/directory name'</span></div><div class="line"><span class="comment">%% Note that it uses normal slashes and does not use escape characters for the empty spaces.</span></div><div class="line"></div><div class="line"><span class="comment">%% elementary operations</span></div><div class="line"><span class="number">5</span>+<span class="number">6</span></div><div class="line"><span class="number">3</span><span class="number">-2</span></div><div class="line"><span class="number">5</span>*<span class="number">8</span></div><div class="line"><span class="number">1</span>/<span class="number">2</span></div><div class="line"><span class="number">2</span>^<span class="number">6</span></div><div class="line"><span class="number">1</span> == <span class="number">2</span>  <span class="comment">% false</span></div><div class="line"><span class="number">1</span> ~= <span class="number">2</span>  <span class="comment">% true.  note, not "!="</span></div><div class="line"><span class="number">1</span> &amp;&amp; <span class="number">0</span></div><div class="line"><span class="number">1</span> || <span class="number">0</span></div><div class="line">xor(<span class="number">1</span>,<span class="number">0</span>)</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">%% variable assignment</span></div><div class="line">a = <span class="number">3</span>; <span class="comment">% semicolon suppresses output</span></div><div class="line">b = <span class="string">'hi'</span>;</div><div class="line">c = <span class="number">3</span>&gt;=<span class="number">1</span>;</div><div class="line"></div><div class="line"><span class="comment">% Displaying them:</span></div><div class="line">a = <span class="built_in">pi</span></div><div class="line"><span class="built_in">disp</span>(a)</div><div class="line"><span class="built_in">disp</span>(sprintf(<span class="string">'2 decimals: %0.2f'</span>, a))</div><div class="line"><span class="built_in">disp</span>(sprintf(<span class="string">'6 decimals: %0.6f'</span>, a))</div><div class="line">format long</div><div class="line">a</div><div class="line">format short</div><div class="line">a</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">%%  vectors and matrices</span></div><div class="line">A = [<span class="number">1</span> <span class="number">2</span>; <span class="number">3</span> <span class="number">4</span>; <span class="number">5</span> <span class="number">6</span>]</div><div class="line"></div><div class="line">v = [<span class="number">1</span> <span class="number">2</span> <span class="number">3</span>]</div><div class="line">v = [<span class="number">1</span>; <span class="number">2</span>; <span class="number">3</span>]</div><div class="line">v = [<span class="number">1</span>:<span class="number">0.1</span>:<span class="number">2</span>]  <span class="comment">% from 1 to 2, with stepsize of 0.1. Useful for plot axes</span></div><div class="line">v = <span class="number">1</span>:<span class="number">6</span>        <span class="comment">% from 1 to 6, assumes stepsize of 1 (row vector)</span></div><div class="line"></div><div class="line">C = <span class="number">2</span>*<span class="built_in">ones</span>(<span class="number">2</span>,<span class="number">3</span>)  <span class="comment">% same as C = [2 2 2; 2 2 2]</span></div><div class="line">w = <span class="built_in">ones</span>(<span class="number">1</span>,<span class="number">3</span>)    <span class="comment">% 1x3 vector of ones</span></div><div class="line">w = <span class="built_in">zeros</span>(<span class="number">1</span>,<span class="number">3</span>)</div><div class="line">w = <span class="built_in">rand</span>(<span class="number">1</span>,<span class="number">3</span>)  <span class="comment">% drawn from a uniform distribution</span></div><div class="line">w = <span class="built_in">randn</span>(<span class="number">1</span>,<span class="number">3</span>) <span class="comment">% drawn from a normal distribution (mean=0, var=1)</span></div><div class="line">w = <span class="number">-6</span> + <span class="built_in">sqrt</span>(<span class="number">10</span>)*(<span class="built_in">randn</span>(<span class="number">1</span>,<span class="number">10000</span>));  <span class="comment">% (mean = -6, var = 10) - note: add the semicolon</span></div><div class="line">hist(w)     <span class="comment">% plot histogram using 10 bins (default)</span></div><div class="line">hist(w,<span class="number">50</span>)  <span class="comment">% plot histogram using 50 bins</span></div><div class="line"><span class="comment">% note: if hist() crashes, try "graphics_toolkit('gnu_plot')"</span></div><div class="line"></div><div class="line">I = <span class="built_in">eye</span>(<span class="number">4</span>)    <span class="comment">% 4x4 identity matrix</span></div><div class="line"></div><div class="line"><span class="comment">% help function</span></div><div class="line">help <span class="built_in">eye</span></div><div class="line">help <span class="built_in">rand</span></div><div class="line">help help</div></pre></td></tr></table></figure></p>
<h2 id="Moving-Data-Around"><a href="#Moving-Data-Around" class="headerlink" title="Moving Data Around"></a>Moving Data Around</h2><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">%% dimensions</div><div class="line">sz = size(A) % <span class="number">1</span>x2 matrix: [(<span class="built_in">number</span> <span class="keyword">of</span> rows) (<span class="built_in">number</span> <span class="keyword">of</span> columns)]</div><div class="line">size(A,<span class="number">1</span>)  % <span class="built_in">number</span> <span class="keyword">of</span> rows</div><div class="line">size(A,<span class="number">2</span>)  % <span class="built_in">number</span> <span class="keyword">of</span> cols</div><div class="line"><span class="built_in">length</span>(v)  % size <span class="keyword">of</span> longest dimension</div><div class="line"></div><div class="line"></div><div class="line">%% loading data</div><div class="line">pwd    % show current <span class="built_in">directory</span> (current path)</div><div class="line">cd <span class="string">'C:\Users\ang\Octave files'</span>   % change <span class="built_in">directory</span></div><div class="line">ls     % list <span class="built_in">files</span> <span class="keyword">in</span> current <span class="built_in">directory</span></div><div class="line"><span class="built_in">load</span> q1y.dat    % alternatively, <span class="built_in">load</span>(<span class="string">'q1y.dat'</span>)</div><div class="line"><span class="built_in">load</span> q1x.dat</div><div class="line">who    % list variables <span class="keyword">in</span> workspace</div><div class="line">whos   % list variables <span class="keyword">in</span> workspace (<span class="keyword">detailed</span> view)</div><div class="line"><span class="built_in">clear</span> q1y       % <span class="built_in">clear</span> <span class="keyword">command</span> <span class="title">without</span> <span class="title">any</span> <span class="title">args</span> <span class="title">clears</span> <span class="title">all</span> <span class="title">vars</span></div><div class="line">v = q1x(<span class="number">1</span>:<span class="number">10</span>);  % <span class="keyword">first</span> <span class="number">10</span> elements <span class="keyword">of</span> q1x (counts down <span class="keyword">the</span> columns)</div><div class="line">save hello.mat v;   % save <span class="built_in">variable</span> v <span class="keyword">into</span> <span class="built_in">file</span> hello.mat</div><div class="line">save hello.txt v -ascii; % save <span class="keyword">as</span> ascii</div><div class="line">% fopen, fread, fprintf, fscanf also work  [[<span class="keyword">not</span> needed <span class="keyword">in</span> class]]</div><div class="line"></div><div class="line">%% indexing</div><div class="line">A(<span class="number">3</span>,<span class="number">2</span>)  % indexing is (row,col)</div><div class="line">A(<span class="number">2</span>,:)  % <span class="built_in">get</span> <span class="keyword">the</span> <span class="number">2</span>nd row.</div><div class="line">        % <span class="string">":"</span> means every <span class="keyword">element</span> along that dimension</div><div class="line">A(:,<span class="number">2</span>)  % <span class="built_in">get</span> <span class="keyword">the</span> <span class="number">2</span>nd col</div><div class="line">A([<span class="number">1</span> <span class="number">3</span>],:) % print all  <span class="keyword">the</span> elements <span class="keyword">of</span> rows <span class="number">1</span> <span class="keyword">and</span> <span class="number">3</span></div><div class="line"></div><div class="line">A(:,<span class="number">2</span>) = [<span class="number">10</span>; <span class="number">11</span>; <span class="number">12</span>]     % change <span class="keyword">second</span> column</div><div class="line">A = [A, [<span class="number">100</span>; <span class="number">101</span>; <span class="number">102</span>]]; % append column vec</div><div class="line">A(:) % Select all elements <span class="keyword">as</span> <span class="keyword">a</span> column vector.</div><div class="line"></div><div class="line">% Putting data together</div><div class="line">A = [<span class="number">1</span> <span class="number">2</span>; <span class="number">3</span> <span class="number">4</span>; <span class="number">5</span> <span class="number">6</span>]</div><div class="line">B = [<span class="number">11</span> <span class="number">12</span>; <span class="number">13</span> <span class="number">14</span>; <span class="number">15</span> <span class="number">16</span>] % same dims <span class="keyword">as</span> A</div><div class="line">C = [A B]  % concatenating A <span class="keyword">and</span> B matrices side <span class="keyword">by</span> side</div><div class="line">C = [A, B] % concatenating A <span class="keyword">and</span> B matrices side <span class="keyword">by</span> side</div><div class="line">C = [A; B] % Concatenating A <span class="keyword">and</span> B top <span class="keyword">and</span> bottom</div></pre></td></tr></table></figure>
<h2 id="Computing-on-Data"><a href="#Computing-on-Data" class="headerlink" title="Computing on Data"></a>Computing on Data</h2><figure class="highlight maxima"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">%%</span> initialize variables</div><div class="line">A = [<span class="number">1</span> <span class="number">2</span>;<span class="number">3</span> <span class="number">4</span>;<span class="number">5</span> <span class="number">6</span>]</div><div class="line">B = [<span class="number">11</span> <span class="number">12</span>;<span class="number">13</span> <span class="number">14</span>;<span class="number">15</span> <span class="number">16</span>]</div><div class="line">C = [<span class="number">1</span> <span class="number">1</span>;<span class="number">2</span> <span class="number">2</span>]</div><div class="line">v = [<span class="number">1</span>;<span class="number">2</span>;<span class="number">3</span>]</div><div class="line"></div><div class="line"><span class="symbol">%%</span> <span class="built_in">matrix</span> operations</div><div class="line">A * C  <span class="symbol">%</span> <span class="built_in">matrix</span> multiplication</div><div class="line">A .* B <span class="symbol">%</span> element-wise multiplication</div><div class="line"><span class="symbol">%</span> A .* C  <span class="keyword">or</span> A * B gives <span class="built_in">error</span> - wrong <span class="built_in">dimensions</span></div><div class="line">A .^ <span class="number">2</span> <span class="symbol">%</span> element-wise square of each element <span class="keyword">in</span> A</div><div class="line"><span class="number">1</span>./v   <span class="symbol">%</span> element-wise reciprocal</div><div class="line"><span class="built_in">log</span>(v)  <span class="symbol">%</span> <span class="built_in">functions</span> like this operate element-wise on vecs <span class="keyword">or</span> matrices</div><div class="line"><span class="built_in">exp</span>(v)</div><div class="line"><span class="built_in">abs</span>(v)</div><div class="line"></div><div class="line">-v  <span class="symbol">%</span> -<span class="number">1</span>*v</div><div class="line"></div><div class="line">v + ones(<span class="built_in">length</span>(v), <span class="number">1</span>)  </div><div class="line"><span class="symbol">%</span> v + <span class="number">1</span>  <span class="symbol">%</span> same</div><div class="line"></div><div class="line">A'  <span class="symbol">%</span> <span class="built_in">matrix</span> <span class="built_in">transpose</span></div><div class="line"></div><div class="line"><span class="symbol">%%</span> misc useful <span class="built_in">functions</span></div><div class="line"></div><div class="line"><span class="symbol">%</span> <span class="built_in">max</span>  (<span class="keyword">or</span> <span class="built_in">min</span>)</div><div class="line">a = [<span class="number">1</span> <span class="number">15</span> <span class="number">2</span> <span class="number">0.5</span>]</div><div class="line">val = <span class="built_in">max</span>(a)</div><div class="line">[val,<span class="literal">ind</span>] = <span class="built_in">max</span>(a) <span class="symbol">%</span> val -  maximum element of the <span class="built_in">vector</span> a <span class="keyword">and</span> index - index value where maximum occur</div><div class="line">val = <span class="built_in">max</span>(A) <span class="symbol">%</span> <span class="keyword">if</span> A <span class="built_in">is</span> <span class="built_in">matrix</span>, returns <span class="built_in">max</span> from each column</div><div class="line"></div><div class="line"><span class="symbol">%</span> <span class="built_in">compare</span> <span class="built_in">values</span> <span class="keyword">in</span> a <span class="built_in">matrix</span> &amp; find</div><div class="line">a &lt; <span class="number">3</span> <span class="symbol">%</span> checks which <span class="built_in">values</span> <span class="keyword">in</span> a are less than <span class="number">3</span></div><div class="line">find(a &lt; <span class="number">3</span>) <span class="symbol">%</span> gives location of elements less than <span class="number">3</span></div><div class="line">A = magic(<span class="number">3</span>) <span class="symbol">%</span> generates a magic <span class="built_in">matrix</span> - <span class="keyword">not</span> much used <span class="keyword">in</span> ML algorithms</div><div class="line">[r,c] = find(A&gt;=<span class="number">7</span>)  <span class="symbol">%</span> <span class="built_in">row</span>, column <span class="built_in">indices</span> <span class="keyword">for</span> <span class="built_in">values</span> matching comparison</div><div class="line"></div><div class="line"><span class="symbol">%</span> <span class="built_in">sum</span>, prod</div><div class="line"><span class="built_in">sum</span>(a)</div><div class="line">prod(a)</div><div class="line"><span class="built_in">floor</span>(a) <span class="symbol">%</span> <span class="keyword">or</span> ceil(a)</div><div class="line"><span class="built_in">max</span>(rand(<span class="number">3</span>),rand(<span class="number">3</span>))</div><div class="line"><span class="built_in">max</span>(A,[],<span class="number">1</span>) -  maximum along <span class="built_in">columns</span>(defaults to <span class="built_in">columns</span> - <span class="built_in">max</span>(A,[]))</div><div class="line"><span class="built_in">max</span>(A,[],<span class="number">2</span>) - maximum along rows</div><div class="line">A = magic(<span class="number">9</span>)</div><div class="line"><span class="built_in">sum</span>(A,<span class="number">1</span>)</div><div class="line"><span class="built_in">sum</span>(A,<span class="number">2</span>)</div><div class="line"><span class="built_in">sum</span>(<span class="built_in">sum</span>( A .* eye(<span class="number">9</span>) ))</div><div class="line"><span class="built_in">sum</span>(<span class="built_in">sum</span>( A .* flipud(eye(<span class="number">9</span>)) ))</div><div class="line"></div><div class="line"></div><div class="line"><span class="symbol">%</span> Matrix inverse (pseudo-inverse)</div><div class="line">pinv(A)        <span class="symbol">%</span> inv(A'*A)*A'</div></pre></td></tr></table></figure>
<h2 id="Plotting-Data"><a href="#Plotting-Data" class="headerlink" title="Plotting Data"></a>Plotting Data</h2><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">%% plotting</div><div class="line">t = [<span class="number">0</span>:<span class="number">0</span>.<span class="number">01</span>:<span class="number">0</span>.<span class="number">98</span>]<span class="comment">;</span></div><div class="line">y1 = sin(<span class="number">2</span>*pi*<span class="number">4</span>*t)<span class="comment">;</span></div><div class="line">plot(t,y1)<span class="comment">;</span></div><div class="line">y2 = cos(<span class="number">2</span>*pi*<span class="number">4</span>*t)<span class="comment">;</span></div><div class="line">hold on<span class="comment">;  % "hold off" to turn off</span></div><div class="line">plot(t,y2,<span class="string">'r'</span>)<span class="comment">;</span></div><div class="line">xlabel(<span class="string">'time'</span>)<span class="comment">;</span></div><div class="line">ylabel(<span class="string">'value'</span>)<span class="comment">;</span></div><div class="line">legend(<span class="string">'sin'</span>,<span class="string">'cos'</span>)<span class="comment">;</span></div><div class="line">title(<span class="string">'my plot'</span>)<span class="comment">;</span></div><div class="line">print -dpng <span class="string">'myPlot.png'</span></div><div class="line"><span class="keyword">close; </span>          % <span class="keyword">or, </span> <span class="string">"close all"</span> to <span class="keyword">close </span>all figs</div><div class="line">figure(<span class="number">1</span>)<span class="comment">; plot(t, y1);</span></div><div class="line">figure(<span class="number">2</span>)<span class="comment">; plot(t, y2);</span></div><div class="line">figure(<span class="number">2</span>), clf<span class="comment">;  % can specify the figure number</span></div><div class="line"><span class="keyword">subplot(1,2,1); </span> % <span class="keyword">Divide </span>plot into <span class="number">1</span>x2 grid, access <span class="number">1</span>st element</div><div class="line">plot(t,y1)<span class="comment">;</span></div><div class="line"><span class="keyword">subplot(1,2,2); </span> % <span class="keyword">Divide </span>plot into <span class="number">1</span>x2 grid, access <span class="number">2</span>nd element</div><div class="line">plot(t,y2)<span class="comment">;</span></div><div class="line">axis([<span class="number">0</span>.<span class="number">5</span> <span class="number">1</span> -<span class="number">1</span> <span class="number">1</span>])<span class="comment">;  % change axis scale</span></div><div class="line"></div><div class="line">%% <span class="keyword">display </span>a matrix (<span class="keyword">or </span>image)</div><div class="line">figure<span class="comment">;</span></div><div class="line">imagesc(magic(<span class="number">15</span>)), colorbar, colormap gray<span class="comment">;</span></div><div class="line">% comma-chaining function calls.  </div><div class="line">a=<span class="number">1</span>,<span class="keyword">b=2,c=3</span></div><div class="line">a=<span class="number">1</span><span class="comment">;b=2;c=3;</span></div></pre></td></tr></table></figure>
<h2 id="Control-Statements-for-while-if-statement"><a href="#Control-Statements-for-while-if-statement" class="headerlink" title="Control Statements: for, while, if statement"></a>Control Statements: for, while, if statement</h2><figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">v = <span class="built_in">zeros</span>(<span class="number">10</span>,<span class="number">1</span>);</div><div class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:<span class="number">10</span>,</div><div class="line">    v(<span class="built_in">i</span>) = <span class="number">2</span>^<span class="built_in">i</span>;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"><span class="comment">% Can also use "break" and "continue" inside for and while loops to control execution.</span></div><div class="line"></div><div class="line"><span class="built_in">i</span> = <span class="number">1</span>;</div><div class="line"><span class="keyword">while</span> <span class="built_in">i</span> &lt;= <span class="number">5</span>,</div><div class="line">  v(<span class="built_in">i</span>) = <span class="number">100</span>;</div><div class="line">  <span class="built_in">i</span> = <span class="built_in">i</span>+<span class="number">1</span>;</div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="built_in">i</span> = <span class="number">1</span>;</div><div class="line"><span class="keyword">while</span> true,</div><div class="line">  v(<span class="built_in">i</span>) = <span class="number">999</span>;</div><div class="line">  <span class="built_in">i</span> = <span class="built_in">i</span>+<span class="number">1</span>;</div><div class="line">  <span class="keyword">if</span> <span class="built_in">i</span> == <span class="number">6</span>,</div><div class="line">    <span class="keyword">break</span>;</div><div class="line">  <span class="keyword">end</span>;</div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> v(<span class="number">1</span>)==<span class="number">1</span>,</div><div class="line">  <span class="built_in">disp</span>(<span class="string">'The value is one!'</span>);</div><div class="line"><span class="keyword">elseif</span> v(<span class="number">1</span>)==<span class="number">2</span>,</div><div class="line">  <span class="built_in">disp</span>(<span class="string">'The value is two!'</span>);</div><div class="line"><span class="keyword">else</span></div><div class="line">  <span class="built_in">disp</span>(<span class="string">'The value is not one or two!'</span>);</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<h2 id="Functions"><a href="#Functions" class="headerlink" title="Functions"></a>Functions</h2><p>首先，你在写字板上写了一个函数，保存格式为“functionName.m”<br>比如：<br><figure class="highlight delphi"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">y</span> = <span class="title">squareThisNumber</span><span class="params">(x)</span></span></div><div class="line"><span class="title">y</span> = <span class="title">x</span>^2;</div></pre></td></tr></table></figure></p>
<p>然后，让Octave运行这个函数，有两种做法：</p>
<ol>
<li><p>用cd设置函数的位置，这样Octave才能找到它</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">% Navigate <span class="built_in">to</span> <span class="built_in">directory</span>:</div><div class="line">   cd /path/<span class="built_in">to</span>/<span class="function"><span class="keyword">function</span></span></div><div class="line"></div><div class="line">   % Call <span class="keyword">the</span> <span class="function"><span class="keyword">function</span>:</span></div><div class="line">   functionName(args)</div></pre></td></tr></table></figure>
</li>
<li><p>用路径搜索的命令，这个属于高级一点的，不会用也没关系</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">% To <span class="built_in">add</span> <span class="keyword">the</span> path <span class="keyword">for</span> <span class="keyword">the</span> current session <span class="keyword">of</span> Octave:</div><div class="line">    addpath(<span class="string">'/path/to/function/'</span>)</div><div class="line">% To remember <span class="keyword">the</span> path <span class="keyword">for</span> future sessions <span class="keyword">of</span> Octave, <span class="keyword">after</span> executing addpath above, also <span class="built_in">do</span>:</div><div class="line">    savepath</div></pre></td></tr></table></figure>
</li>
</ol>
<p>Octave有个优势在于，可以定义一个函数，返回多个值或参数<br><figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="params">[y1, y2]</span> = <span class="title">squareandCubeThisNo</span><span class="params">(x)</span></span></div><div class="line">    y1 = x^<span class="number">2</span></div><div class="line">    y2 = x^<span class="number">3</span></div></pre></td></tr></table></figure></p>
<p>上面这个函数的调用方式如下：<br><code>[a,b] = squareandCubeThisNo(x)</code></p>
<h2 id="Vectorization"><a href="#Vectorization" class="headerlink" title="Vectorization"></a>Vectorization</h2><p>向量化是一种很方便的运算方式，代码写得更少，出错也少，举个例子<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-06_CodeCogsEqn-1.png" alt="2016-08-06_CodeCogsEqn-1.png"><br>这个求和函数，正常的做法可能是用if语句写循环，类似这种：<br><figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">prediction = <span class="number">0.0</span>;</div><div class="line"><span class="keyword">for</span> <span class="built_in">j</span> = <span class="number">1</span>:n+<span class="number">1</span>,</div><div class="line">  prediction += theta(<span class="built_in">j</span>) * x(<span class="built_in">j</span>);</div><div class="line"><span class="keyword">end</span>;</div></pre></td></tr></table></figure></p>
<p>但是，把它向量化，设定两个向量θ和x，函数就可以表示为θ的转置乘以x，用代码写出来就是：<br><code>prediction = theta&#39; * x;</code></p>
<h2 id="作业"><a href="#作业" class="headerlink" title="作业"></a>作业</h2><p>主要是考察了成本函数和梯度下降，其实有两种做法：</p>
<ol>
<li>用向量解</li>
<li>不用向量，普通解法</li>
</ol>
<p>用向量的优势在于，一句代码就可以，但涉及向量的转置，以及向量乘法不符合交换律，所以我做错了很多遍，现在还是糊涂的。<br>先看computeCost这个<br>正确答案是<br><code>J = 1/(2*m)*sum((X*theta - y).^2);</code><br>不好意思，这个没用向量，不过我用向量写的是<br><code>J = 1/(2*m)*(theta&#39;*X - y)^2);</code><br>首先，我的问题在于平方前没加“.”，然后转置运算错了，至今没有弄清楚到底应该转谁！<br>听说这样写也行：<br><code>J = 1/(2*m)*sum((theta&#39;*X&#39;-y&#39;).^2);</code><br>这里转置了三次呀！为我的智商捉急。</p>
<p>再看gradientDescent这个<br>正确答案1：<br><figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">gradJ = X'*(<span class="name">X*theta</span> - y)/m<span class="comment">;</span></div><div class="line">theta = theta - alpha*gradJ<span class="comment">;</span></div></pre></td></tr></table></figure></p>
<p>正确答案2：<br><figure class="highlight gcode"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">temp<span class="number">1</span> = theta<span class="comment">(1)</span> - <span class="comment">(alpha / m)</span> * sum<span class="comment">((X * theta - y)</span>.* X<span class="comment">(:,1)</span>);  </div><div class="line">temp<span class="number">2</span> = theta<span class="comment">(2)</span> - <span class="comment">(alpha / m)</span> * sum<span class="comment">((X * theta - y)</span>.* X<span class="comment">(:,2)</span>);  </div><div class="line">theta<span class="comment">(1)</span> = temp<span class="number">1</span>;  </div><div class="line">theta<span class="comment">(2)</span> = temp<span class="number">2</span>;</div></pre></td></tr></table></figure></p>
<p>答案1用了向量，答案2则是普通解法。<br>很不幸，我还是转置错了，等等，为什么这个向量就没用sum求和呢？刚才cost怎么就得用sum呢！</p>
<p>另外，还有好几道选做的多元线性回归题目，没做，可以等全学完了再回头做做玩玩。</p>
<h1 id="Logistic-Regression-逻辑回归"><a href="#Logistic-Regression-逻辑回归" class="headerlink" title="Logistic Regression (逻辑回归)"></a>Logistic Regression (逻辑回归)</h1><h2 id="Classification-and-Representation"><a href="#Classification-and-Representation" class="headerlink" title="Classification and Representation"></a>Classification and Representation</h2><h3 id="分类问题"><a href="#分类问题" class="headerlink" title="分类问题"></a>分类问题</h3><p>比如：是不是垃圾邮件、肿瘤是良性还是恶性的……<br>这类问题中，我们想要预测的y，有两个值{0,1}，其中0：“Negative Class”(负类)，1：“Positive Class”(正类)<br>之后我们会讨论多分类问题，y有多个值{0，1，2，3……}，不过目前我们还是讨论二元分类问题。<br>先来说一下为什么线性回归不适合这种分类问题，看下图：<br>样本拟合的直线很可能会因为一个额外的样本量而发生改变，比如从红色线移到蓝色线，直线改变了，拟合结果也就不准确了。<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-08_17:20:24.jpg" alt="2016-08-08_17:20:24.jpg"><br>还有一点是，通常分类问题中y = 0 or 1，但用线性回归可能会出现h<em>θ(x)&gt;1 or &lt;0<br>所以呢，逻辑回归出场了，它的取值就可以保证0&lt;=h</em>θ(x)&lt;=1</p>
<h3 id="Hypothesis-Representation"><a href="#Hypothesis-Representation" class="headerlink" title="Hypothesis Representation"></a>Hypothesis Representation</h3><p>逻辑回归中的函数长这样：<br>看右边的图，两边无限接近于0到1，因为图像长得像S，所以又被称为Sigmid函数，跟Logistic函数是一个意思啦，可以换着用。<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-08_17:28:46.jpg" alt="2016-08-08_17:28:46.jpg"><br>公式如下：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-08_CodeCogsEqn.png" alt="2016-08-08_CodeCogsEqn.png"><br>其实这个函数的意思呢，是表示一个概率，比如病人的肿瘤是恶性(y=1)的可能性有多少？带进去算一算，差不多0.7吧(注意，那他的肿瘤是良性的概率就是1-0。7)。这句话写成数学公式就可以表示为：h_θ(x)= P(y=1|x,θ)，后面这就是个概率公式啊！看图↓<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-08_17:32:26.jpg" alt="2016-08-08_17:32:26.jpg"></p>
<h3 id="Decision-Boundary-决策边界"><a href="#Decision-Boundary-决策边界" class="headerlink" title="Decision Boundary (决策边界)"></a>Decision Boundary (决策边界)</h3><p>刚刚我们在例子里用公式，其实预测的是y=1的概率，那么到底应该什么时候预测y=1什么时候预测y=0呢？(总觉得这俩都差不多，一定是我没搞懂！)图中给了一个解决方案，当h_θ(x)&gt;=0.5就预测y=1的，反之则预测y=0.<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-08_17:52:19.jpg" alt="2016-08-08_17:52:19.jpg"><br>根据上面这个公式及理论，来看看下面这个例子：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-08_17:59:47.jpg" alt="2016-08-08_17:59:47.jpg"><br>看到坐标轴上的线了吗，那个就是决策边界，是根据参数和假设函数算出来的。这个图看上去好像那条线是根据样本数据的分布画出来的，事实上，把样本数据去掉也是一样的，它是算出来的，不是看到数据在图上的分布画的。(感觉我解释得有点艰难……)<br>再来看一个更复杂一点的案例，这次决策边界不是线性的了。<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-08_18:06:59.jpg" alt="2016-08-08_18:06:59.jpg"><br>看到了吧，由于参数的选择，最后得到的是一个圆，所以就可以预测圆里面的是y=0，圆外面的是y=1.<br>还有更复杂的，图形画出来就更诡异了：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-08_18:07:58.jpg" alt="2016-08-08_18:07:58.jpg"><br>上面这两个案例都是多项式，前面我们讲过的。</p>
<h2 id="Logistic-Regression-Model"><a href="#Logistic-Regression-Model" class="headerlink" title="Logistic Regression Model"></a>Logistic Regression Model</h2><h3 id="成本函数"><a href="#成本函数" class="headerlink" title="成本函数"></a>成本函数</h3><p><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-08_20:29:27.jpg" alt="2016-08-08_20:29:27.jpg"><br>看到了吗，图上用了一个函数嵌套，当我们考察里面这个函数cost的时候，看它的图形，就可以判断可不可以用梯度下降，当图形是凸形的时候，先降后升，才能找到一个全局最优解。<br>上面说的是线性回归的成本函数，来看看逻辑回归的，我们需要分类讨论下：</p>
<ol>
<li>当y=1的时候，函数图像如下(这个是根据对数函数的图像来的)，这个图形的意思是：当h<em>θ(x)=1，y=1，所以成本为0啊，预测准确了呀，但是当h</em>θ(x)=0的时候y还等于1，那就是你跟病人说你的肿瘤是良性的没问题，但实际上人家就是恶性的，你的预测错了，所以成本就非常之大，趋向无穷大！<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-08_20:38:27.jpg" alt="2016-08-08_20:38:27.jpg"></li>
<li>当y=0的时候，图像如下，跟上面的道理是一样的<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-08_20:47:42.jpg" alt="2016-08-08_20:47:42.jpg"><h3 id="简化成本函数和梯度下降"><a href="#简化成本函数和梯度下降" class="headerlink" title="简化成本函数和梯度下降"></a>简化成本函数和梯度下降</h3>首先，我们来看一下成本函数推导：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-10_2016-08-10_15:30:56.jpg" alt="2016-08-10_2016-08-10_15:30:56.jpg"><br>再来看一下正式的公式：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-10_15:32:35.jpg" alt="2016-08-10_15:32:35.jpg"><br>接下来看看梯度下降：<br>仔细观察这张图就会发现逻辑回归和线性回归的梯度下降公式似乎是一样的，的确长一样，不过这里的h_θ(x)不一样了。同样推荐向量化和特征缩放。<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-10_15:34:15.jpg" alt="2016-08-10_15:34:15.jpg"><h3 id="Advanced-Optimization-高级优化"><a href="#Advanced-Optimization-高级优化" class="headerlink" title="Advanced Optimization (高级优化)"></a>Advanced Optimization (高级优化)</h3>通常呢，要优化J_(θ)(图上写的那两个)的值，我们需要写一些代码来不断更新参数的值，比如在梯度下降中是这样的：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-10_15:44:33.jpg" alt="2016-08-10_15:44:33.jpg"><br>但除了梯度下降之外，还有一些其他更高级的优化方法，它们的有点就是不用更新α的值，但是它们相对也复杂很多，不过，使用这个算法并不用完全理解它们的内在运作方式。<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-10_2016-08-10_15:45:00.jpg" alt="2016-08-10_2016-08-10_15:45:00.jpg"><br>来看一下怎么用：<br>右边的function开始那几段是写在.m文件里给Octave调用的，下面的options那几段是要输入在Octave里的。要注意的是，有一句初始化θ的命令，θ必须是d维的向量，d大于等于2.<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-10_15:52:25.jpg" alt="2016-08-10_15:52:25.jpg"><br>现在说一下怎么应用到逻辑回归问题中去，就是代码怎么写的问题啦，注意一下gradient的下标<h2 id="Multiclass-Classification"><a href="#Multiclass-Classification" class="headerlink" title="Multiclass Classification"></a>Multiclass Classification</h2>这一节是讲怎么将逻辑回归应用到多分类问题中，涉及到“一对多”(one-vs-all)的分类算法。<br>先来看三个例子：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-10_2016-08-10_2016-08-10_16:00:27.jpg" alt="2016-08-10_2016-08-10_2016-08-10_16:00:27.jpg"><br>下图是二元问题和多分类问题training set的图示：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-10_16:06:06.jpg" alt="2016-08-10_16:06:06.jpg"><br>二元问题可以画一条线，那三元问题怎么办呢？分成三个二元问题：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-10_16:12:31.jpg" alt="2016-08-10_16:12:31.jpg"><br>这样我们就得到三个分类器了，那对于出现一个新的x，到底用哪个分类器预测呢？<br>把x代入到这些分类器中，选择概率最大的那个。(很好，我听得稀里糊的)<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-10_16:12:31.jpg" alt="2016-08-10_16:12:31.jpg"><h1 id="Regularization"><a href="#Regularization" class="headerlink" title="Regularization"></a>Regularization</h1><h2 id="Solving-the-Problem-of-Overfitting"><a href="#Solving-the-Problem-of-Overfitting" class="headerlink" title="Solving the Problem of Overfitting"></a>Solving the Problem of Overfitting</h2><h3 id="The-Problem-of-Overfitting-过度拟合问题"><a href="#The-Problem-of-Overfitting-过度拟合问题" class="headerlink" title="The Problem of Overfitting (过度拟合问题)"></a>The Problem of Overfitting (过度拟合问题)</h3>先看线性回归问题中的过度拟合<br>下图第三个图就是过度拟合的例子，现有的多项式似乎很好地拟合了所有training set中的数据，但它波动太大了，很难确定它是不是能正确预测training set外的数据。而图二就刚好，图一则是欠拟合。所以，过度拟合一般发生在特征过多的情况下……就是下面那一大段英文啦。<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-10_16:29:58.jpg" alt="2016-08-10_16:29:58.jpg"><br>逻辑回归中的过度拟合道理也是相似的<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-10_16:34:40.jpg" alt="2016-08-10_16:34:40.jpg"><br>那么过度拟合的问题该怎么解决呢？两个办法</li>
</ol>
<ul>
<li>减少特征的量，因为这是导致过度拟合的原因啊，但是删除某些特征也就意味着失去了某些信息</li>
<li>用正则化的方法(也就是这一节要讲的方法)，不减少特征，但使每一项的参数值变小，也就减小了每个特征的影响，但保证了其完整性。</li>
</ul>
<h3 id="成本函数-1"><a href="#成本函数-1" class="headerlink" title="成本函数"></a>成本函数</h3><p>这里说的是正则化的成本函数，它有两个目标：</p>
<ul>
<li>充分拟合training set</li>
<li>降低参数θ的值，使拟合函数趋于简单</li>
</ul>
<p><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-12_15:59:41.jpg" alt="2016-08-12_15:59:41.jpg"><br>上面的成本函数，比线性回归的多了一项，所以，要求得最小值，意味着两项的值都要很小，从而降低了θ的值。而λ 是正则化参数(regularization parameter)。<br>如果λ非常大，会发生什么呢？<br>所有的θ都会被惩罚，变得很小，那就不能很好地拟合训练集了，变成了underfitting</p>
<h3 id="Regularized-Linear-Regression-正则化线性回归"><a href="#Regularized-Linear-Regression-正则化线性回归" class="headerlink" title="Regularized Linear Regression (正则化线性回归)"></a>Regularized Linear Regression (正则化线性回归)</h3><p>再来看看正则化的梯度下降。<br>这张图中，把θ_0分离开了，因为在成本函数中，我们要惩罚的是θ_j，而j是从1开始的。<br>所以从θ_1开始算起，在原来梯度下降的公式上又加了一项，如下图：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-12_16:14:01.jpg" alt="2016-08-12_16:14:01.jpg"><br>公式整理如下：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-12_16:18:03.jpg" alt="2016-08-12_16:18:03.jpg"><br>其中，下面这项始终是＜1的，这就一步一步降低了θ_j的值。<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-12_2016-08-12_16:18:42.jpg" alt="2016-08-12_2016-08-12_16:18:42.jpg"><br>接下来把梯度下降的公式向量化：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-12_16:21:21.jpg" alt="2016-08-12_16:21:21.jpg"><br>λ后面的是一个(n+1)(n+1)维的矩阵，长得很像单位矩阵，但是它的第一个元素是0不是1.</p>
<h3 id="Regularized-Logistic-Regression-正则化逻辑回归"><a href="#Regularized-Logistic-Regression-正则化逻辑回归" class="headerlink" title="Regularized Logistic Regression (正则化逻辑回归)"></a>Regularized Logistic Regression (正则化逻辑回归)</h3><p>来复习一下，逻辑回归的成本函数：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-12_16:40:29.jpg" alt="2016-08-12_16:40:29.jpg"><br>把它正则化，则是要加上下面这一项：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-12_16:41:06.jpg" alt="2016-08-12_16:41:06.jpg"><br>再来看一下，代码里是怎么做的：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-12_16:44:41.jpg" alt="2016-08-12_16:44:41.jpg"><br>用的还是<code>fminunc</code></p>
<h2 id="作业-1"><a href="#作业-1" class="headerlink" title="作业"></a>作业</h2><p>声明一下，并不是独立完成的，参考了许多位大神的代码，致谢！</p>
<h3 id="先说ex2"><a href="#先说ex2" class="headerlink" title="先说ex2"></a>先说ex2</h3><p>第一步是画图，不会用plotData，于是用了<code>help plot</code>，勉强写了几句，但是不成功，折腾了半天意识到：</p>
<ul>
<li>Octave不在乎空格，但是在乎全角半角，一切标点都要用英文的</li>
<li>只要用了<code>;</code>，换不换行都不重要</li>
</ul>
<p>最后的答案是：<br><figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">pos=find(<span class="name">y==1</span>)<span class="comment">;</span></div><div class="line">neg=find(<span class="name">y==0</span>)<span class="comment">;</span></div><div class="line">plot(<span class="name">X</span>(<span class="name">pos</span>,<span class="number">1</span>),X(<span class="name">pos</span>,<span class="number">2</span>),'k+')<span class="comment">;</span></div><div class="line">plot(<span class="name">X</span>(<span class="name">neg</span>,<span class="number">1</span>),X(<span class="name">neg</span>,<span class="number">2</span>),'ko','MarkerFaceColor', 'm')<span class="comment">;</span></div></pre></td></tr></table></figure></p>
<p>给圆点加了颜色，不然不好看，plot还有很多其他属性property-value，比如：<br>“linestyle”,”linewidth”, “color”, “marker”, “markersize”, “markeredgecolor”,”markerfacecolor”</p>
<p>尴尬，折腾半天回去看pdf才发现，这一段已经写好了……<br><figure class="highlight gams"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">% Find Indices of <span class="keyword">Positive</span> <span class="keyword">and</span> <span class="keyword">Negative</span> Examples</div><div class="line">pos = find(y==<span class="number">1</span>); neg = find(y == <span class="number">0</span>);</div><div class="line">% Plot Examples</div><div class="line"><span class="function"><span class="title">plot</span>(<span class="params">X(pos, 1</span>)</span>, X(pos, <span class="number">2</span>), <span class="string">'k+'</span>,<span class="string">'LineWidth'</span>, <span class="number">2</span>, ...</div><div class="line">     <span class="string">'MarkerSize'</span>, <span class="number">7</span>);</div><div class="line"><span class="function"><span class="title">plot</span>(<span class="params">X(neg, 1</span>)</span>, X(neg, <span class="number">2</span>), <span class="string">'ko'</span>, <span class="string">'MarkerFaceColor'</span>, <span class="string">'y'</span>, ...</div><div class="line">     <span class="string">'MarkerSize'</span>, <span class="number">7</span>);</div></pre></td></tr></table></figure></p>
<p>还是直接贴代码+解释吧<br>sigmoid.m里该填的代码：<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">g = (<span class="number">1</span> + e.^(<span class="number">-1</span> *z)).^(<span class="number">-1</span>);</div></pre></td></tr></table></figure></p>
<p>这句就是把数学公式改成程序语言。<br>costFunction.m里该填的代码：<br><figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">h=sigmoid(<span class="name">X*theta</span>)<span class="comment">;</span></div><div class="line">J=1/m*(<span class="name">-1*y</span>'*log(<span class="name">h</span>)-(<span class="number">1</span>-y')*log(1-h));</div><div class="line">grad=1/m*(<span class="name">h-y</span>)'*X<span class="comment">;</span></div></pre></td></tr></table></figure></p>
<p>这是用程序语言把三个函数分别表示出来，拟合函数、成本函数、梯度下降<br>predict.m里该填的代码：<br><figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">h=sigmoid(X*theta);</div><div class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:m</div><div class="line">    <span class="keyword">if</span> h(<span class="built_in">i</span>)&gt;=<span class="number">0.5</span></div><div class="line">       p(<span class="built_in">i</span>)=<span class="number">1</span>;</div><div class="line">    <span class="keyword">else</span></div><div class="line">       p(<span class="built_in">i</span>)=<span class="number">0</span>;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line"><span class="keyword">end</span>;</div></pre></td></tr></table></figure></p>
<p>对着代码解释就是很轻松啊，然而当初想的时候，差点被折腾死，<code>i</code>是我随便用的一个，估计用其他字母也都可以。<code>1：m</code>这句有点像Python里面的list的用法。</p>
<h3 id="接下来是ex2-reg"><a href="#接下来是ex2-reg" class="headerlink" title="接下来是ex2_reg"></a>接下来是ex2_reg</h3><p>这个涉及到了正则化，只用补充一个costFunctionReg.m的代码：<br><figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">h=sigmoid(X*theta);</div><div class="line">J=<span class="number">1</span>/m*(-y'*<span class="built_in">log</span>(h)-(<span class="number">1</span>-y')*<span class="built_in">log</span>(<span class="number">1</span>-h))+lambda/(<span class="number">2</span>*m)*(theta(<span class="number">2</span>:<span class="keyword">end</span>)'*theta(<span class="number">2</span>:<span class="keyword">end</span>));</div><div class="line">grad=<span class="number">1</span>/m*[(h-y)<span class="string">'*X]+lambda/m*theta'</span>;</div><div class="line">grad(<span class="number">1</span>)=grad(<span class="number">1</span>)-lambda/m*theta(<span class="number">1</span>);</div></pre></td></tr></table></figure></p>
<p>就是这个，折腾了我半天，总提示我syntax error。看到<code>theta(2:end)&#39;*theta(2:end)</code>了吗，本来我写的是平方，但是显然向量只能写成两个相乘的方式，平方不行。<br>另外，先定义grad，再定义grad(1)，后面等于前面的减去一项。<br>转置的问题还是不太清楚，为什么<code>grad=1/m*[(h-y)&#39;*X]+lambda/m*theta&#39;;</code>这里的theta要转置！<br>PS：整整一周啊！陷入对智商的重大怀疑中，其实老师讲的已经很易懂了……</p>
<h1 id="Neural-Networks-Representation"><a href="#Neural-Networks-Representation" class="headerlink" title="Neural Networks: Representation"></a>Neural Networks: Representation</h1><h2 id="Motivations"><a href="#Motivations" class="headerlink" title="Motivations"></a>Motivations</h2><h3 id="Non-linear-Hypotheses"><a href="#Non-linear-Hypotheses" class="headerlink" title="Non-linear Hypotheses"></a>Non-linear Hypotheses</h3><p>为什么有了线性回归和逻辑回归算法还要学神经网络算法？<br>主要适用于非线性问题，为了准确描述此类问题通常需要用到多项式，如果特征很多，多项式会变得非常非常长。<br>比如说计算机识别图像这个案例。和人眼不同，计算机看到的图像是一堆像素，所以这个识别图像问题到计算机这就变成了：给你一组汽车的图片作为training set，训练出一个分类器，再给你一张照片，判断它是不是汽车。只不过，这里的x是像素……超级多的像素。<br>感受一下下面这张图：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-18_16:01:27.jpg" alt="2016-08-18_16:01:27.jpg"></p>
<h3 id="Neurons-and-the-Brain"><a href="#Neurons-and-the-Brain" class="headerlink" title="Neurons and the Brain"></a>Neurons and the Brain</h3><p>神经网络算法源于人们想拥有一种模仿大脑的算法。<br>视频里举了很多例子，比如传感器、声纳等等。</p>
<h2 id="Neural-Networks"><a href="#Neural-Networks" class="headerlink" title="Neural Networks"></a>Neural Networks</h2><h3 id="Model-Representation-I"><a href="#Model-Representation-I" class="headerlink" title="Model Representation I"></a>Model Representation I</h3>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;笔记完成时间：0813(逻辑回归) 0806(Octave基本操作) 0805(多元线性回归) 0804(线代复习) 0803(一元线性回归) 0801(简介)&lt;br&gt;0806：写个作业要看15页的文档，好难过。(做完作业觉得智商为负。转置总弄错！)&lt;br&gt;0804：LaTex问题待解决。&lt;br&gt;0803：怎么用markdown写数学公式？&lt;br&gt;0801：抽风，笔记用英文开始，最后还是转向了中文。&lt;br&gt;
    
    </summary>
    
    
      <category term="coursera" scheme="http://yibeichen.me/tags/coursera/"/>
    
      <category term="machine learning" scheme="http://yibeichen.me/tags/machine-learning/"/>
    
  </entry>
  
  <entry>
    <title>Introduction to Classical Music 课程笔记 (未完)</title>
    <link href="http://yibeichen.me/2016/08/09/Introduction-to-Classical-Music/"/>
    <id>http://yibeichen.me/2016/08/09/Introduction-to-Classical-Music/</id>
    <published>2016-08-09T13:41:53.000Z</published>
    <updated>2016-08-10T13:43:53.000Z</updated>
    
    <content type="html"><![CDATA[<p>我用的教材是Craig Wright的<a href="https://www.amazon.cn/%E8%81%86%E5%90%AC%E9%9F%B3%E4%B9%90-%E5%85%8B%E9%9B%B7%E6%A0%BC%E2%80%A2%E8%8E%B1%E7%89%B9/dp/B007TQNEYW/ref=sr_1_1?ie=UTF8&amp;qid=1470288686&amp;sr=8-1&amp;keywords=%E8%81%86%E5%90%AC%E9%9F%B3%E4%B9%90" target="_blank" rel="external">《聆听音乐》</a>，Craig Wright就是这门课的老师，老先生真是儒雅有风度。不过，他推荐的是：<a href="https://www.amazon.com/Essential-Listening-Digital-Downloads-Printed/dp/1285856791/ref=sr_1_2?ie=UTF8&amp;qid=1470288731&amp;sr=8-2&amp;keywords=CRAIG+WRIGHT" target="_blank" rel="external">《The Essential Listening to Music》</a>，但是这本没有中文版，不太方便使用。</p>
<p>7月20日开始记笔记，断断续续更新中。<br>刚开始扒英文字幕当笔记，很快就发现，这些英文我是不会再看第二眼了，于是改成中文，但笔记量也因此少了很多。第三周开始，感觉记笔记已经有点困难了，担心会半途而废，啊，笔记可以少记，课一定要听完呀！<br><a id="more"></a><br>Coursera地址: <a href="https://www.coursera.org/learn/introclassicalmusic" target="_blank" rel="external">古典音乐导论</a><br>Spotify playlist: <a href="https://open.spotify.com/embed?uri=spotify:user:gauravkumar87:playlist:6sPZCTmf5razbg3CfCXsuF" target="_blank" rel="external">点这里</a></p>
<h1 id="What-Is-Music"><a href="#What-Is-Music" class="headerlink" title="What Is Music?"></a>What Is Music?</h1><h2 id="Why-we-Like-What-we-Like"><a href="#Why-we-Like-What-we-Like" class="headerlink" title="Why we Like What we Like"></a>Why we Like What we Like</h2><h3 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h3><p>Art is life, art is another life, a life of imagination.</p>
<blockquote>
<p>Music is what feelings sound like. —— Victor Hugo</p>
</blockquote>
<p>It’s very difficult to hate someone who passionately loves the same music that you do.</p>
<h3 id="Popular-Music-and-Classic-Music-Compared"><a href="#Popular-Music-and-Classic-Music-Compared" class="headerlink" title="Popular Music and Classic Music Compared"></a>Popular Music and Classic Music Compared</h3><p>Five important way</p>
<ul>
<li>P often uses electric instruments, electric guitars and electric keyboards<br>  C uses acoustic instruments, instruments generating sounds from natural materials</li>
<li>P often includes lyrics that describe the emotion of the music<br>  C is usually purely instrumental</li>
<li>P tends to have a strong beat<br>  C may be more subdued</li>
<li>P is often short and repetitious<br>  C is longer</li>
<li>P is often performed without music notation<br>  C is often performed  with a score</li>
</ul>
<h3 id="Music-and-Emotions"><a href="#Music-and-Emotions" class="headerlink" title="Music and Emotions"></a>Music and Emotions</h3><p>You can’t see it. You can’t touch it or feel it. You can’t hold it in your hand. But it can touch you, it can grab you, it can move you to cry or move you to dance with joy.<br>Music is the poetry of the air.<br>Classic object, timeless  music.(ad for a classic watch)</p>
<h3 id="How-Do-We-Hear-Music-Sound-Waves-and-the-Ear"><a href="#How-Do-We-Hear-Music-Sound-Waves-and-the-Ear" class="headerlink" title="How Do We Hear Music? Sound Waves and the Ear"></a>How Do We Hear Music? Sound Waves and the Ear</h3><p>Music is the rational organization of sounds and silences passing through time.</p>
<p>We have large sound waves, and smaller sound waves. Large ones generate low pitches. Small ones generate high pitches. </p>
<p>A very long string creates an equally long sound and a low sound.<br>The low note on the piano is vibrating at about 30 times per second while the highest note on the piano is vibrating about 4,000 times per second. </p>
<h4 id="how-we-process-musical-information"><a href="#how-we-process-musical-information" class="headerlink" title="how we process musical information"></a>how we process musical information</h4><p>sound wave enter the inner ear → electro chemical implies (occurs in a small organ —— the basilar membrane (tonotopic))<br>filaments, called cilia are activated by particular sound waves → send a signal to brain<br>sound goes to the brain → through first the primary auditory nerve → to the left and right side of the cortex (the processing of sound occurs → respond to particular frequencies)</p>
<p>How we hear the sound and how we feel about the music (the limbic system, including the amygdala) are the responsibilities of different parts of the brain.</p>
<p>Music is like candy for the mind.</p>
<h3 id="Music-Thrills-Us-Music-Chills-Us"><a href="#Music-Thrills-Us-Music-Chills-Us" class="headerlink" title="Music Thrills Us, Music Chills Us"></a>Music Thrills Us, Music Chills Us</h3><p><strong>We have a direct physiological response to music</strong><br>Most of us are musical maniacs. We can’t get enough of music. And we respond to it very deeply.<br>You may cry when you listen to music. You may get chills.<br>Neuroscientists have shown that there is a scientific reason for these chills.</p>
<p>At the moment of the chills, there is a radical shift in blood flow in certain key spots of the brain, sometimes more, sometimes less blood flows in the frontal cortex, in the amygdala and in the hippocampus, for example. </p>
<h3 id="Why-We-Like-What-We-Like-It’s-Nurture"><a href="#Why-We-Like-What-We-Like-It’s-Nurture" class="headerlink" title="Why We Like What We Like? It’s Nurture"></a>Why We Like What We Like? It’s Nurture</h3><p>How do we get the musical expectations (template) that we have when we come to listen to a piece of music.<br>Two ways through nurture and through nature.<br><strong>By nurture</strong><br>The culture you grow up decides the kind of music you hear and like</p>
<h3 id="It’s-Nurture-The-Syntax-of-Western-Music"><a href="#It’s-Nurture-The-Syntax-of-Western-Music" class="headerlink" title="It’s Nurture: The Syntax of Western Music"></a>It’s Nurture: The Syntax of Western Music</h3><p>Language and music work the same way<br><strong>some rules</strong></p>
<ul>
<li>Leading Tone: Pulls toward the Home Pitch or Tonic</li>
<li>Large Leap: A large leap is reversed by the following pitch (Big leap, always back in the opposite direction)</li>
<li>Harmony: The Harmony must fit with the Melody</li>
<li>Chord Progression: The harmonies usually return hame to tonic</li>
</ul>
<p><strong>sum up</strong><br>Every culture around the world establishes a norm, a template for what the music of that culture should sound like, how it should go. These are not physical attributes of the music, they are cultural. They are human and they are local and they are somewhat arbitrary. </p>
<h3 id="Why-We-Like-What-We-Like-It’s-Nature"><a href="#Why-We-Like-What-We-Like-It’s-Nature" class="headerlink" title="Why We Like What We Like? It’s Nature"></a>Why We Like What We Like? It’s Nature</h3><p>Universal principals about the physics and the acoustic of sound:</p>
<ul>
<li>the overtone series, which does indeed involve good vibrations.</li>
</ul>
<p>In Indonesian gamelan music, Chinese music, every music, classical or pop. We all have the same overtones and therefore the basic notion of consonances. We all have the same basic notion of consonance. Because when I play these fundamental notes, this fundamental. </p>
<p><strong>Also sprach Zarathustra《查拉图斯特拉如是说》</strong><br>It’s a big piece for a western symphony orchestra. The name is German and it sounds very impressive, very intimidating. It’s about the dawn of a superman, a superhero who is equated with the rising of the sun and the advent of the new age. </p>
<p><strong>How it depict</strong></p>
<ol>
<li>Start with low rumblings down underneath to suggest primordial slime. </li>
<li>Then the sound of the trumpet. </li>
<li>Since time immemorial, the trumpet has been associated with the military, the army, with royalty, with power, with the hero. </li>
<li>And this powerful sound is moving upwards. </li>
<li>It reaches a midway point and then seems to fall back as if the super hero is not quite equal to the task. </li>
<li>Then he tries again, but is now able to reach.</li>
<li>And hold onto the sought after goal. </li>
<li>Eventually we move onto the end, to the conclusion of this opening section where we end with this, a chord progression. </li>
<li>Remember, a syntax tells us we’ve got to go home. </li>
</ol>
<h1 id="How-Music-Works-it’s-Magic"><a href="#How-Music-Works-it’s-Magic" class="headerlink" title="How Music Works, it’s Magic"></a>How Music Works, it’s Magic</h1><h2 id="We’ve-All-Got-Rhythm"><a href="#We’ve-All-Got-Rhythm" class="headerlink" title="We’ve All Got Rhythm"></a>We’ve All Got Rhythm</h2><h3 id="Beat-Meter-and-Rhythm"><a href="#Beat-Meter-and-Rhythm" class="headerlink" title="Beat, Meter, and Rhythm"></a>Beat, Meter, and Rhythm</h3><h4 id="Rhythm"><a href="#Rhythm" class="headerlink" title="Rhythm"></a>Rhythm</h4><p>Well we’ve all got rhythm. Rhythm, along with melody, harmony, tone, color, texture and form, are the essential elements of music.<br><em>We’ll be exploring these elements in our next several sessions.</em><br>We’ll start with rhythm, because rhythm provides a framework, a framework in time in which sounds, pitches, can rest. </p>
<blockquote>
<p>“Classical music is music  without Africa”—— Brian Eno</p>
</blockquote>
<p>↓ ↓ ↓<br>music without a strong rhythmic profile → in most part he is right<br>but here’s an example of classical music in which there is a pretty clear beat<br>↓ ↓ ↓<br>Pomp and Circumstance March (Edward Elgar) → a graduation ceremony</p>
<p>classic music often has a suppressed beat, or the sound of the beat is weak</p>
<h4 id="Grouping-Beats"><a href="#Grouping-Beats" class="headerlink" title="Grouping Beats"></a>Grouping Beats</h4><p>In music, we group the endless flow of beats to make sense of them. </p>
<h4 id="Meter"><a href="#Meter" class="headerlink" title="Meter"></a>Meter</h4><p>When we group beats into regularly recurring units, we create meter in music. Meter is simply a pattern of regularly recurring beats. The lines that separate the groups are called bar lines or measure lines. </p>
<p>Each unit constitutes a bar or a measure.<br>Bar lines tend to make western music on a grid.<br>Other cultures don’t have this kind of grid, and as a result their music is a good deal more flexible. </p>
<p><strong> What are the two axes, or coordinates, of music? </strong><br>Pitch and duration (otherwise said, sound and time)</p>
<h3 id="Introduction-to-Musical-Notation"><a href="#Introduction-to-Musical-Notation" class="headerlink" title="Introduction to Musical Notation"></a>Introduction to Musical Notation</h3><p>Western music is the only musical culture that uses musical notation in a controlling way.<br>那么它们是怎么形成的呢？<br>公元900年左右，一群修道院里的音乐家们决定要把音乐记录在纸上（they try to capture and freeze sound onto paper）</p>
<p>The musical scribes are trying to represent the high and low flow of the music by graphic symbols.<br>They look like worms, squiggling across the page, but they’re called, these little aggregates are called neumes, neumes that represented a collection of pitches.<br>If the voice produced a high pitch, they wrote a visually higher symbol.<br>Eventually, these neumes were separated into individual discrete pitches called <strong>notae</strong>, hence our word note, a symbol for a pitch.<br>But these notes, originally, were only indicators of pitch, not duration. </p>
<p>……好难懂，上中文！<br>最开始的时候，只有全音符，后来出了二分音符，再后来出了四分音符，然后八分音符，十六分音符……越来越复杂</p>
<p>Musical notation signs placed higher vertically represent high sounding pitches. Lower signs mean lower sounding pitches.<br>Notation that gets increasingly darker with more flags on it represents that that music is moving faster up and down, left to right.<br>Darker means faster.<br><strong>Whiter Slower, Darker Faster</strong></p>
<h3 id="Rhythm-What-is-It"><a href="#Rhythm-What-is-It" class="headerlink" title="Rhythm: What is It?"></a>Rhythm: What is It?</h3><p>Rhythm is the organization of time into compelling patterns of long and short sounds. </p>
<p>duple meter → 强弱、强弱、强弱<br>triple meter → 强弱弱、强弱弱、强弱弱<br>一般都是通过伴奏声部来区分节拍的，有的时候并没有专门的演奏beat的人，这就要靠“听”来理解了。<br>Well, our ear, actually our brain, digest this complex of information and extrapolates it from it a basic structural framework underlying the music. So kinda platonic mental reality over arching structure that no one actually hears. No one actually sees but it’s there. </p>
<h3 id="Hearing-the-Downbeat-Feeling-the-Emotion"><a href="#Hearing-the-Downbeat-Feeling-the-Emotion" class="headerlink" title="Hearing the Downbeat, Feeling the Emotion"></a>Hearing the Downbeat, Feeling the Emotion</h3><p>bass(left hand)  melody(right hand)</p>
<h4 id="syncopation-切分音"><a href="#syncopation-切分音" class="headerlink" title="syncopation (切分音)"></a>syncopation (切分音)</h4><p>源自希腊词根syncope，意思是cut off, compress</p>
<h4 id="downbeat-强拍"><a href="#downbeat-强拍" class="headerlink" title="downbeat 强拍"></a>downbeat 强拍</h4><p>The most stressed and always the first sound of every measure. It’s called the downbeat among other reasons, because the conductor’s hand always goes down with the first beat in every measure.<br>Composers tell us where the downbeat is. Through duration, through accent, through range, and through change of harmony.</p>
<p>Most frequently, <strong>chord</strong>(和弦) changes come on the downbeat.</p>
<h3 id="Tempo-and-How-We-Feel-About-It"><a href="#Tempo-and-How-We-Feel-About-It" class="headerlink" title="Tempo (and How We Feel About It)"></a>Tempo (and How We Feel About It)</h3><p>Tempo - one last thing that has to do with duration in music</p>
<p>some tempos, such as Adagio and Andante, are often related to our bodies: Adagio can be compared to a slow heartbeat, while Andante is often compared to a slow walking tempo.</p>
<p>Cognitive psychologists have done studies that show that we respond emotionally much more favorably to music that is every so slightly off the beat, ever so slightly off pitch now and then. <em>Next time you listen to your favorite pop singer, just listen to how he or she can be slightly off pitch at one moment or slightly off tempo at one moment, and then pull it back on.</em> That moment of intentional imperfection of the beat or the pitch, that adds emotional intensity to our musical experience.</p>
<p>Predictably, reality is on the beat. Art is slightly off the beat, slightly off beat.<br>Art makes reality a lot more exciting.</p>
<h2 id="Melody-is-the-Star"><a href="#Melody-is-the-Star" class="headerlink" title="Melody is the Star"></a>Melody is the Star</h2><h3 id="What-is-Melody"><a href="#What-is-Melody" class="headerlink" title="What is Melody?"></a>What is Melody?</h3><p>When we listen to music, most of us hear music only as the melody. We don’t focus on the inner parts or the bass.<br>There may be an acoustical reason for this. High pitches may be more easy to perceive than lower and potentially murkier ones.</p>
<h3 id="Melodic-Notation-and-Scales"><a href="#Melodic-Notation-and-Scales" class="headerlink" title="Melodic Notation and Scales"></a>Melodic Notation and Scales</h3><h4 id="Notation"><a href="#Notation" class="headerlink" title="Notation"></a>Notation</h4><p>这一段讲的是五线谱是如何“进化”的</p>
<h4 id="Scale（音阶）"><a href="#Scale（音阶）" class="headerlink" title="Scale（音阶）"></a>Scale（音阶）</h4><p>Scale in music is simply a pattern of adjacent pitches going up or down the keyboard. Different cultures have different scales.<br>Much of Chinese music is written in a five note scale, so called pentatonic scale（五声音阶）.<br>Melodies in western music, are written in scales of seven pitches.</p>
<p> 为什么钢琴键长得这么不规律？<br> 要追溯到柏拉图和亚里士多德时代。They privileged mathematics above all else, and as a result, we end up with seven pitches in our scale.（看不懂这句）<br><strong>Why seven notes？</strong><br>因为古希腊时代的人非常着迷于用数学解释一切东西，尤其是音乐。但是视频里解释了半天，还是没弄懂为什么是一个八度内有七个音。早期的七个音和现代钢琴的白键相同，后来又插入了黑键的五个音。<br>We end up here within an octave, we end up with 12 equal pitches. But we still use this term of seven note scale, cuz we have seven notes within the scale of the major scale and seven notes within the scale of the minor scale.</p>
<h3 id="Major-and-Minor-Scales-大调音阶和小调音阶"><a href="#Major-and-Minor-Scales-大调音阶和小调音阶" class="headerlink" title="Major and Minor Scales (大调音阶和小调音阶)"></a>Major and Minor Scales (大调音阶和小调音阶)</h3><p>Octave duplication. The eighth note is the same as the first.</p>
<p>All major scales sound the same way because they have the same pattern of whole and half steps. All minor scales sound the same way for the same reason.</p>
<p>The major and minor scales involve two different sequences of intervals. Again, an interval of music is simply the distance from one pitch to another. In each major and minor scale there are five adjacent intervals that we call whole tones（全音） and two intervals of half tones（半音） or half steps.</p>
<p>大调音阶的全音、半音排列顺序是1-1-1/2-1-1-1-1/2<br>小调音阶的全音、半音排列顺序是1-1/2-1-1-1/2-1-1</p>
<h3 id="The-Chromatic-Scale-半音阶"><a href="#The-Chromatic-Scale-半音阶" class="headerlink" title="The Chromatic Scale (半音阶)"></a>The Chromatic Scale (半音阶)</h3><p>与在每个八度内仅仅使用七个音的大、小调音阶相反，半音阶需要使用全部12个音。<br>源于希腊词cbroma，意思是“色彩”——增加了五个音确实丰富了旋律的色彩。<br>所有12个音高的间距都是半音。</p>
<p>很少有作品是完全用半音阶写的，欧文·柏林的《白色的圣诞》是以半音阶开始随后进入大调。</p>
<p>Chromaticism adds richness, variety, and often tension to the music. Or it releases tension from the music.</p>
<h3 id="How-We-Feel-About-the-Music-Mode-and-Mood"><a href="#How-We-Feel-About-the-Music-Mode-and-Mood" class="headerlink" title="How We Feel About the Music: Mode and Mood"></a>How We Feel About the Music: Mode and Mood</h3><p>Scales in music provide an oral context for us. They tell us where we are in the melody. Oddly, most of the time when we listen to music, we aren’t aware of this scale. Particularly those two little half steps that are in the scale.<br>But a scale provides something akin to a global positioning system for us. A musical GPS for recognizing where we are in a melody.</p>
<p>Major happy, minor sad. Decided by culture instead of physics.<br>大调听上去是明亮、愉快和乐观的，而小调听起来则是暗淡、悲观甚至不祥的。<br>但是，在波兰发现了很多欢快的舞曲是用小调写的，所以这是nurture而不是nature。</p>
<h4 id="mode"><a href="#mode" class="headerlink" title="mode"></a>mode</h4><p>The first interval of a third in the scale is very important in determining the mode, major versus minor. If we change the mode from major to minor, we change the mood of the music entirely.<br>比如，插入一个降号，完成从大调到小调的转变。</p>
<h3 id="Melodic-Structure-The-Tonic"><a href="#Melodic-Structure-The-Tonic" class="headerlink" title="Melodic Structure: The Tonic"></a>Melodic Structure: The Tonic</h3><p>如何写出优秀的音乐作品呢？不是靠魔法，也没有公式或法则，但优秀的作品的确有一些共通(commonalities)之处。</p>
<p>All melodies have a sense of tonality(调性), they are organized around a primary pitch or tone. That primary pitch is called the tonic(主调).</p>
<p>All melodies begin and end on the tonic.</p>
<h3 id="Modulation-转调-Changing-the-Tonic-of-the-Key"><a href="#Modulation-转调-Changing-the-Tonic-of-the-Key" class="headerlink" title="Modulation(转调): Changing the Tonic (of the Key)"></a>Modulation(转调): Changing the Tonic (of the Key)</h3><p>很多流行音乐几乎从头到尾都只用一个调(朗朗上口呀)，但是古典音乐会变调，因为古典音乐都很长，如果一成不变很快就会让人听睡着的。<br>转调使音乐有了一种有力度的运动感。<br>转调很难被听出来。</p>
<p>一个流行音乐不变调的例子：《I get around》（The Beach Boys）但是到了结尾的时候给了一个deceptive cadence。</p>
<h3 id="Phrase-Structure-in-Music-乐句结构-Beethoven’s-Ode-to-Joy-欢乐颂"><a href="#Phrase-Structure-in-Music-乐句结构-Beethoven’s-Ode-to-Joy-欢乐颂" class="headerlink" title="Phrase Structure in Music(乐句结构): Beethoven’s Ode to Joy (欢乐颂)"></a>Phrase Structure in Music(乐句结构): Beethoven’s Ode to Joy (欢乐颂)</h3><p>前后呼应的两个句子被称为前句(antecedent)和后句(consequent phrases)<br>Antecedent and consequent phrase structure is endemic to melody in all Western music.<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-01_22:07:07.jpg" alt="2016-08-01_22:07:07.jpg"></p>
<p>然后分析了一下为什么《欢乐颂》是个名曲，曲调其实很简单，但是贝多芬的高明之处在哪里呢？<br>四个乐句依次分析：</p>
<ul>
<li>第二句在最后一小节同第一句稍有不同，降了一个音</li>
<li>第三个乐句末，展现了贝多芬的功力——<strong>syncopation</strong><br>This should, you would think, be a half note and this would start on the down beat over here, but he brings, in effect, the sound of the down beat in a beat early. Gives it a little bit of pep there at that particular point.</li>
<li>第四句是第二句的复制<br>All pieces, classical or pop, one way or the other end on the tonic.</li>
</ul>
<h2 id="The-Harmony-of-Music-and-Life"><a href="#The-Harmony-of-Music-and-Life" class="headerlink" title="The Harmony of Music (and Life)"></a>The Harmony of Music (and Life)</h2><h3 id="Harmony-A-Distinctly-Western-Phenomenon"><a href="#Harmony-A-Distinctly-Western-Phenomenon" class="headerlink" title="Harmony: A Distinctly Western Phenomenon"></a>Harmony: A Distinctly Western Phenomenon</h3><p>旋律在上，和声在下。和弦(chord)伴随和声在下。<br>和弦分为协和和弦(consonance)和不协和和弦(dissonance)，西方音乐中最基本的和弦是三和弦(triad)，由三个音高组成。<br>在所有的和弦中，最重要的是主音(tonic)，也就是主和弦；其次重要的是属和弦(dominant)，它总是建立在音阶的第五音上；在属和弦的下方是下属和弦(subdominant)，建立在音阶第四级音上。<br>和弦之间彼此“拉”着前进，最终全部倾向于强有力的主和弦。</p>
<h3 id="Chord-Progressions-和声进行-and-Cadences-终止"><a href="#Chord-Progressions-和声进行-and-Cadences-终止" class="headerlink" title="Chord Progressions (和声进行) and Cadences (终止)"></a>Chord Progressions (和声进行) and Cadences (终止)</h3><p>和弦的变化通常是为了配合旋律的，所以和弦的行进目的很明确，一个进行到下一个，朝着主和弦前进。<br>和声进行的尾声，我们称之为终止(cadence)。有一种称为伪终止(deceptive cadence)，让你误以为已经到了basic tonic，其实是把你代入到了其他地方。还有一种是pause cadence，音乐在某个地方暂停了，但又暗示我们该继续前进。</p>
<h3 id="Melody-and-Harmony-Working-Together"><a href="#Melody-and-Harmony-Working-Together" class="headerlink" title="Melody and Harmony Working Together"></a>Melody and Harmony Working Together</h3><p>老师演奏了一段普契尼的歌剧，讲的是Peter asked The Father to show mercy on him? 差不多是这样一个圣经故事吧。一边演奏一边提示，哪里是正格终止，哪里是伪终止等等，通过这段音乐来展现旋律和和声的配合，音乐之美。<br>当我们聆听一段音乐的时候，同时存在着三种聆听方式：</p>
<ul>
<li>analytical → what’s going on?</li>
<li>technical → how well are they doing it?</li>
<li>emotional → how do I feel about the music and the performance of it？</li>
</ul>
<h3 id="Major-and-Minor-Triads"><a href="#Major-and-Minor-Triads" class="headerlink" title="Major and Minor Triads"></a>Major and Minor Triads</h3><p>大三弦和小三弦，比如：CEG是大三弦，而CEbG就是小三弦，E降了半个音。<br>在音调上的差别也很明显，大三弦比小三弦音调更高，更有力度，有一种上升的感觉。<br>这次欣赏的是John Adams的《Black Gondolas》。</p>
<p>在贝多芬的《月光曲》中，他不是同时演奏三和弦，而是在时间上先后演奏，这种破碎的或断续的三和弦被称为琶音(arpeggio)，词根arpa源自意大利文，意思是”竖琴”，因为在竖琴演奏中，就是先后演奏和弦中的所有音而不是同时。<br>琶音听起来更加活跃。</p>
<h3 id="Hearing-the-Harmony"><a href="#Hearing-the-Harmony" class="headerlink" title="Hearing the Harmony"></a>Hearing the Harmony</h3><p>通常我们听音乐，听的都是旋律，那听和声就意味着要听base。<br>所有不断重复的和声、旋律、节奏，都称之为ostinato，这是一个意大利词，意思是固执的东西。<br>两首试听：《Duke of Earl》、《Canon》<br>第三首是Bach的乐曲，只有和声，没有旋律，而且不是重复的和声，Bach把这些和弦变成了琶音。100年后，有个法国作曲家，为这段和声加上了旋律，amazing！它俩配合得很棒。Bach的这部分手稿现藏于耶鲁大学的图书馆。</p>
<h1 id="The-Sound-of-Music"><a href="#The-Sound-of-Music" class="headerlink" title="The Sound of Music"></a>The Sound of Music</h1><h2 id="Tone-Color"><a href="#Tone-Color" class="headerlink" title="Tone Color"></a>Tone Color</h2><h3 id="Why-Do-Instruments-Sound-Differently-One-From-Another"><a href="#Why-Do-Instruments-Sound-Differently-One-From-Another" class="headerlink" title="Why Do Instruments Sound Differently, One From Another?"></a>Why Do Instruments Sound Differently, One From Another?</h3><p>这节课我听了两遍，写几个关键词吧<br>amplitude<br>overtone<br>pitch<br>volume<br>synthesizer<br>好了，把笔记写成这样是因为真的不知道该怎么写了。<br>为什么不同的乐器音色不同呢？因为他们的材质不同呀，这事声学上的概念了，这节课讲的是音乐上的东西，但是，说不定讲声学，我听得更懂些。</p>
<h3 id="Musorgsky-Makes-a-Wagon-Move-in-Music"><a href="#Musorgsky-Makes-a-Wagon-Move-in-Music" class="headerlink" title="Musorgsky Makes a Wagon Move in Music"></a>Musorgsky Makes a Wagon Move in Music</h3><p>Musorgsky是俄罗斯的作曲家。<br>怎么样让音乐展现出一幅图景呢？怎样让音乐动起来？<br>视频中放了Musorgsky的一首曲子，首先从最低音的乐器开始，然后到高音乐器最后再回到低音乐器。crescendo<br>低音代表的是长波长，持续的时间久，高音代表短波长，持续时间短。</p>
<h3 id="The-Four-Families-of-Instruments"><a href="#The-Four-Families-of-Instruments" class="headerlink" title="The Four Families of Instruments"></a>The Four Families of Instruments</h3><p>这一节请参看教材48页，非常详细。<br>四大乐器家族：弦乐、木管、铜管和打击乐<br>先说弦乐：</p>
<ul>
<li>小提琴violin</li>
<li>中提琴viola</li>
<li>大提琴cello</li>
<li>低音提琴double bass</li>
</ul>
<p>在Spotify上找了一下马友友的音乐，好听！</p>
<iframe src="https://embed.spotify.com/?uri=spotify%3Aalbum%3A3Nq0LrPYIXzWTPvXevNx0Z" width="300" height="180" frameborder="0" allowtransparency="true"></iframe>

<p>木管乐器：</p>
<ul>
<li>长笛flute</li>
<li>短笛piccolo</li>
<li>单簧管clarinet</li>
<li>低音单簧管bass clarinet</li>
<li>双簧管oboe</li>
<li>英国管English horn</li>
<li>大管bassoon</li>
<li>低音大管contrabassoon</li>
<li>萨克斯管saxophone</li>
</ul>
<p>铜管乐器：</p>
<ul>
<li>小号trumpet</li>
<li>长号trombone</li>
<li>法国号French horn</li>
<li>大号tuba</li>
</ul>
<p>打击乐percussion：<br>没有可以辨别的音高，主要是为其他乐器的音响增添色彩。</p>
<ul>
<li>定音鼓timpani</li>
<li>小军鼓snare drum</li>
<li>低音鼓bass drum</li>
<li>钹cymbals</li>
<li>木琴xylophone</li>
<li>钟琴glockenspiel</li>
<li>钢片琴celesta</li>
</ul>
<h3 id="Building-a-Symphony-Orchestra"><a href="#Building-a-Symphony-Orchestra" class="headerlink" title="Building a Symphony Orchestra"></a>Building a Symphony Orchestra</h3><p>请看这张图，慢慢欣赏：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-07_18:29:51.jpg" alt="2016-08-07_18:29:51.jpg"><br>指挥家的乐队总谱真的好复杂……<br>视频里耶鲁大学的本科生演奏了贝多芬的第三交响曲Eroica。</p>
<h2 id="Texture-Form-and-Style"><a href="#Texture-Form-and-Style" class="headerlink" title="Texture, Form, and Style"></a>Texture, Form, and Style</h2><p>在这一节里，充分感受到音乐和绘画、建筑等艺术之间的相似。</p>
<h3 id="Musical-Texture-音乐的织体"><a href="#Musical-Texture-音乐的织体" class="headerlink" title="Musical Texture (音乐的织体)"></a>Musical Texture (音乐的织体)</h3><p>分三种：</p>
<ul>
<li>单音 monophony</li>
<li>复调 polyphony (最复杂)</li>
<li>主调 homophony</li>
</ul>
<p>卡农(canon)是一个音乐术语，不是一个人也不是一首曲子的名字……</p>
<h3 id="Musical-Form-音乐曲式"><a href="#Musical-Form-音乐曲式" class="headerlink" title="Musical Form (音乐曲式)"></a>Musical Form (音乐曲式)</h3><p>作曲家运用一下四种手法创造曲式：</p>
<ul>
<li>陈述 statement</li>
<li>反复 repetition</li>
<li>对比 contrast</li>
<li>变奏 variation</li>
</ul>
<p><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-09_20:57:46.jpg" alt="2016-08-09_20:57:46.jpg"><br>曲式共有五种：</p>
<ul>
<li>分节歌形式 strophic form</li>
<li>主题与变奏 theme and variations</li>
<li>二部曲式 binary form</li>
<li>三部曲式 ternary form</li>
<li>回旋曲式 rondo form<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-09_21:29:51.jpg" alt="2016-08-09_21:29:51.jpg"><br>  音乐和建筑的相通之处：<br>  <img src="http://oapfne1kf.bkt.clouddn.com/2016-08-09_21:30:13.jpg" alt="2016-08-09_21:30:13.jpg"></li>
</ul>
<h3 id="Musical-Style"><a href="#Musical-Style" class="headerlink" title="Musical Style"></a>Musical Style</h3><p>八种风格，中间有重叠：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-09_21:37:42.jpg" alt="2016-08-09_21:37:42.jpg"></p>
<h1 id="Music-Back-in-the-Day"><a href="#Music-Back-in-the-Day" class="headerlink" title="Music Back in the Day"></a>Music Back in the Day</h1><h2 id="Music-in-the-Middle-Ages"><a href="#Music-in-the-Middle-Ages" class="headerlink" title="Music in the Middle Ages"></a>Music in the Middle Ages</h2><p>中世纪，西欧是当时的中心，法国是中心的中心。</p>
<blockquote>
<p>All art in the Middle Ages was functional art.<br>                《The Waning of the Middle Ages》</p>
</blockquote>
<p>比如所有的雕塑都有自己存在的目的，伟人的雕塑是为了彰显他们exemplary life，耶稣的雕塑是为了inspire the viewer to a greater devotion；音乐也是一样，赞美诗offered an opportunity for the reflection, of the message of Christ, the Christian message.</p>
<h3 id="Gregorian-Chant-格里高利圣咏"><a href="#Gregorian-Chant-格里高利圣咏" class="headerlink" title="Gregorian Chant (格里高利圣咏)"></a>Gregorian Chant (格里高利圣咏)</h3><p>也称素歌plainsong，是一大批无伴奏的声乐曲，它有一种无限的、来世的性质，没有规律没有节拍不能跟着拍手跺脚或跳舞，所有人都在同度齐唱，被认为是单音音乐，没有乐器伴奏。<br>音节式syllabic singing：歌词的每个音阶只唱一个或两个音<br>花腔式melismatic singing：歌词的一个音节唱很多音<br>有时，一个音节式段落会让位于花腔式段落。<br>圣咏的两个功用：<br>It is firstly a medium for a projection of sacred texts. And secondly a vehicle for spiritual contemplation.</p>
<blockquote>
<p>It communicated the message of the church, it allowed for the transmission of the word of god, as they the faithful understood the word and understood God. And it transmitted the theology, the message of the church. Chant then, was a medium for the broadcast, literally, the broadcast of the word, in a resonant acoustical environment, such as a stone or stucco church, one can project, one can impel a text better.<br>Chant also allowed for a period of reflection upon the subject of the preceding reading. A sermon or a passage of scripture would be followed by a reflective chant. Time for contemplation. This music for reflection upon a preceding religious theme, was generally melismatic. Now melismatic chant is one in which there are many notes for just one syllable of text. And in melismatic chant, the range tends to be a lot broader, it’s more virtuosic. So simple chanting for readings, that’s syllabic chant. More complex chant for moments of personal feeling and reflection, that’s melismatic chant.</p>
</blockquote>
<h3 id="Hildergard-Von-Bingen"><a href="#Hildergard-Von-Bingen" class="headerlink" title="Hildergard Von Bingen"></a>Hildergard Von Bingen</h3><p>宾根的希德加是格里高利圣咏最卓越的贡献者之一<br>她在自己的一生中表现出作为剧作家、诗人、音乐家、生物学家、药理学家和幻想家的卓越才智和想象力。<br>事实上，她才是第一位“文艺复兴的人”。</p>
<h3 id="早期的复调音乐"><a href="#早期的复调音乐" class="headerlink" title="早期的复调音乐"></a>早期的复调音乐</h3><p>以法国巴黎和兰斯的圣母院最为出名。<br>其中的代表人物是纪尧姆·德·马肖，他既是作曲家也是抒情诗人，最著名的作品是《圣母弥撒曲》。</p>
<h3 id="宫廷舞蹈音乐"><a href="#宫廷舞蹈音乐" class="headerlink" title="宫廷舞蹈音乐"></a>宫廷舞蹈音乐</h3><p>和宗教音乐相对应的就是世俗音乐了secular music。<br>当时的流行音乐都是一些不识字的人创作的，因为识字的是教士他们都去作圣咏了，所以流行音乐被创作了但是不能记录下来。<br>很好，这节课光顾着看视频了，什么都没记下来，来不及呀。视频里是通过一张张中世纪的插图来讲解音乐的，老师请来了他的好朋友，另一位老师，两位都超级有魅力，互相斗外语(没说法语吧应该，我没听到呀，千万别是我没听懂)。另外，要被艺术之美感动哭了。<br>参考教材P85.</p>
<h2 id="Music-in-the-Renaissance"><a href="#Music-in-the-Renaissance" class="headerlink" title="Music in the Renaissance"></a>Music in the Renaissance</h2>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;我用的教材是Craig Wright的&lt;a href=&quot;https://www.amazon.cn/%E8%81%86%E5%90%AC%E9%9F%B3%E4%B9%90-%E5%85%8B%E9%9B%B7%E6%A0%BC%E2%80%A2%E8%8E%B1%E7%89%B9/dp/B007TQNEYW/ref=sr_1_1?ie=UTF8&amp;amp;qid=1470288686&amp;amp;sr=8-1&amp;amp;keywords=%E8%81%86%E5%90%AC%E9%9F%B3%E4%B9%90&quot;&gt;《聆听音乐》&lt;/a&gt;，Craig Wright就是这门课的老师，老先生真是儒雅有风度。不过，他推荐的是：&lt;a href=&quot;https://www.amazon.com/Essential-Listening-Digital-Downloads-Printed/dp/1285856791/ref=sr_1_2?ie=UTF8&amp;amp;qid=1470288731&amp;amp;sr=8-2&amp;amp;keywords=CRAIG+WRIGHT&quot;&gt;《The Essential Listening to Music》&lt;/a&gt;，但是这本没有中文版，不太方便使用。&lt;/p&gt;
&lt;p&gt;7月20日开始记笔记，断断续续更新中。&lt;br&gt;刚开始扒英文字幕当笔记，很快就发现，这些英文我是不会再看第二眼了，于是改成中文，但笔记量也因此少了很多。第三周开始，感觉记笔记已经有点困难了，担心会半途而废，啊，笔记可以少记，课一定要听完呀！&lt;br&gt;
    
    </summary>
    
    
      <category term="music" scheme="http://yibeichen.me/tags/music/"/>
    
      <category term="coursera" scheme="http://yibeichen.me/tags/coursera/"/>
    
  </entry>
  
  <entry>
    <title>Hexo插件测试 (未完)</title>
    <link href="http://yibeichen.me/2016/08/04/Test-for-Plugins/"/>
    <id>http://yibeichen.me/2016/08/04/Test-for-Plugins/</id>
    <published>2016-08-04T14:34:12.000Z</published>
    <updated>2016-08-04T14:45:34.000Z</updated>
    
    <content type="html"><![CDATA[<p>测试了几个插件：<br>0804(网易云音乐代码嵌套) 0730(Spotify代码嵌套)</p>
<p>玩心起了就折腾一下，不过，玩物总会丧志。<br><a id="more"></a></p>
<h1 id="音乐插件"><a href="#音乐插件" class="headerlink" title="音乐插件"></a>音乐插件</h1><h2 id="代码嵌套"><a href="#代码嵌套" class="headerlink" title="代码嵌套"></a>代码嵌套</h2><h3 id="Spotify"><a href="#Spotify" class="headerlink" title="Spotify"></a>Spotify</h3><p>网站提供的代码如下：<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="selector-tag">iframe</span> src=<span class="string">"https://embed.spotify.com/?uri=spotify%3Atrack%3A3v8PlUFGQQDBIk1J86waCo"</span> <span class="attribute">width</span>=<span class="string">"300"</span> height=<span class="string">"380"</span> frameborder=<span class="string">"0"</span> allowtransparency=<span class="string">"true"</span>&gt;</div><div class="line">&lt;/iframe&gt;</div></pre></td></tr></table></figure></p>
<p>效果如图：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-07-30_14:48:19.jpg" alt="2016-07-30_14:48:19.jpg"><br>没开VPN是显示不出来的。<br>看着挺美，但是问题在于，点击会跳转到Spotify官网，不能当前页播放。</p>
<h3 id="网易云音乐"><a href="#网易云音乐" class="headerlink" title="网易云音乐"></a>网易云音乐</h3><p>打开网页版网易云音乐，进入歌曲播放页面，可以看到代码嵌套，可以设置播放框宽度，以及是否自动播放，代码如下：<br><figure class="highlight maxima"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;iframe frameborder=<span class="string">"no"</span> <span class="built_in">border</span>=<span class="string">"0"</span> marginwidth=<span class="string">"0"</span> marginheight=<span class="string">"0"</span> <span class="built_in">width</span>=<span class="string">"330"</span> <span class="built_in">height</span>=<span class="string">"86"</span> src=<span class="string">"http://music.163.com/outchain/player?type=2&amp;id=63875&amp;auto=1&amp;height=66"</span>&gt;&lt;/iframe&gt;</div></pre></td></tr></table></figure></p>
<p>效果如图：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-08-04_22:43:21.jpg" alt="2016-08-04_22:43:21.jpg"><br>体验请戳→<a href="http://yibeichen.me/2016/08/04/An-Illusion/">《黄粱一梦》</a><br>暂时不知道怎么改宽度。<br>颜值不敌Spotify，但是还算实用。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;测试了几个插件：&lt;br&gt;0804(网易云音乐代码嵌套) 0730(Spotify代码嵌套)&lt;/p&gt;
&lt;p&gt;玩心起了就折腾一下，不过，玩物总会丧志。&lt;br&gt;
    
    </summary>
    
    
      <category term="Hexo" scheme="http://yibeichen.me/tags/Hexo/"/>
    
      <category term="plugin" scheme="http://yibeichen.me/tags/plugin/"/>
    
  </entry>
  
  <entry>
    <title>黄粱一梦</title>
    <link href="http://yibeichen.me/2016/08/04/An-Illusion/"/>
    <id>http://yibeichen.me/2016/08/04/An-Illusion/</id>
    <published>2016-08-04T13:24:20.000Z</published>
    <updated>2016-08-04T14:21:26.000Z</updated>
    
    <content type="html"><![CDATA[<p>“黄粱一梦二十年”，应该是陈升的《牡丹亭》，网易云音乐找不到这首，只有一首《黄粱一梦二十年》，都行都行，有这句就好。</p>
<p>哇塞，我怎么想到了这么一个伤春悲秋的题目？其实，跟一梦黄粱一点关系都没有，是某件事情突然让我想到了”illusion”这个词，再一想，中文里最门当户对的词语就是“黄粱一梦”啦。</p>
<p>为了这个题目，特意去搜索了一下怎么给hexo添加音乐，原来这么简单！之前我是有多懒啊天。<br><a id="more"></a></p>
<p><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="http://music.163.com/outchain/player?type=2&id=63875&auto=1&height=66"></iframe><br>（为什么播放框被拉这么长，好难看。）</p>
<p>事情是这样的。</p>
<p>我现在用的是11寸的Air，好小啊！<br>当时买的时候，根本没有考虑过要做编程，只是想着方便携带，方便码字。<br>结果呢，现在开始敲代码了。<br>想象一下，这么小的屏幕，一边放编辑器，一边放浏览器，天哪，根本摆不下。<br>默默想起当年某厂的前端同事们，一人都是俩显示屏，一横一竖，帅呆了。竖着的那个专门拿来敲代码，横着的那个查看渲染效果，每次从他们的工位旁经过(每次都是故意绕路)，看着一行行五颜六色的代码刷刷刷地落下来，羡慕得不行。</p>
<p>自然是心痒了，想买个外接显示屏。<br>上网比较了一下，Dell的某系列真是太棒了！具体参数就不说了，因为我也没弄懂，光顾着发痴了。总之就是理想中的爱人呀，颜值才华俱佳，然而最便宜也要2000+，什么27寸5000+的我就当没看见。</p>
<p>某天跟我妈小小地试探了一下，结果被无情轰回来，想都别想。<br>怎么办，我是轻易说放弃的人吗？不买就不买嘛！哼！我拿iPad当外接显示屏。<br>一番比较之后，选中了duet。这个app实在太精明了，Mac版免费，但iPad版付费，怎么办？1000块我没有，难道还没有100块吗，于是花了123买了它。<br>从此呢，就变成Air敲代码，iPad查看网页效果。</p>
<p>下午发了一门新的课程笔记，结果发现课程名太长，发出来折行了，不好看，动了折腾NexT页面宽度的心思。<br>把宽度从700px调到了900px。<br>iPad太小了，看不出效果，于是把Chrome拽回到了Air上。<br>天哪！<br>怎么这么美，这么宽敞，这么大屏，一瞬间感觉我的Air从11寸变成了27寸。</p>
<p>很好。<br>很快就反应过来，这是幻觉，心理学上肯定对此有一整套的解释和论证，反正不是什么新鲜事。<br>不过呢，既然我没钱买外接显示屏，但又真的非常需要一个，用这种方式欺骗一下自己也是可以的，视觉上的假象大概是可以安慰一下大脑中的神经吧。</p>
<p>所以，就从“幻觉”到了“illusion”，又到了“黄粱一梦”，然后是“黄粱一梦二十年”，最后就是“陈升和《牡丹亭》”。</p>
<p>这篇文章好像没什么用，是谁说的来着，既然要在互联网上写东西，拜托写点有用的吧。反正我不同意这句，因为我常写些没用的，总不能自己打脸吧。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;“黄粱一梦二十年”，应该是陈升的《牡丹亭》，网易云音乐找不到这首，只有一首《黄粱一梦二十年》，都行都行，有这句就好。&lt;/p&gt;
&lt;p&gt;哇塞，我怎么想到了这么一个伤春悲秋的题目？其实，跟一梦黄粱一点关系都没有，是某件事情突然让我想到了”illusion”这个词，再一想，中文里最门当户对的词语就是“黄粱一梦”啦。&lt;/p&gt;
&lt;p&gt;为了这个题目，特意去搜索了一下怎么给hexo添加音乐，原来这么简单！之前我是有多懒啊天。&lt;br&gt;
    
    </summary>
    
    
      <category term="nonsense" scheme="http://yibeichen.me/tags/nonsense/"/>
    
  </entry>
  
  <entry>
    <title>一个玩笑之一个变量的线性回归</title>
    <link href="http://yibeichen.me/2016/08/03/A-Joke/"/>
    <id>http://yibeichen.me/2016/08/03/A-Joke/</id>
    <published>2016-08-03T04:15:16.000Z</published>
    <updated>2016-08-04T14:02:51.000Z</updated>
    
    <content type="html"><![CDATA[<p>抽空写两句玩笑话，不过，我的笑点素来很奇怪，可能一点也不好笑。<br><a id="more"></a><br>今天学ML，讲到linear regression with one variable，直译就是“一个变量的线性回归”。</p>
<p>笔记里写下这几个字的时候，觉得有点不对劲，脑洞一大就会想到“一个女人一生中的二十四个小时”、“一个陌生女子的来信”、“一个村庄里的中国”、“一桩事先张扬的凶杀案”……</p>
<p>这联想到的都是什么呀？</p>
<p>这可是严肃的数学问题！</p>
<p>查了一下，对应的术语是“一元线性回归”。砰，瞬间回到高中课堂：“同学们，今天我们来讲一元二次方程/一元二次函数/一元二次不等式……”这才对嘛，这才是一个正确的名称对应一个正当的联想。</p>
<p>好吧，看看“一个变量的”和“一元”，越看越觉得前面那个实在太蠢了，可是又好萌呀。就好比，有个小学生吭哧吭哧说了一长串，你用一个成语，四个字，就概括了意思。干净，利落，帅气！可是就没有第一个萌呀。想象一下那个小学生丰富的面部表情，一边说上句一边歪着头想下一句，一只眼看着你，一只眼往回收，疯狂运转脑细胞。多可爱呀。</p>
<p>有一回夜间散步，自言自语，为白天跟别人争论的事情气愤，他怎么能那么想呢。想了一大串安慰自己不要生气的话，人家又不是我呀，怎么能懂，越想越激动，走路都要跳起来了。突然，有几个字掉下来，“夏虫不可语冰”。天哪，古人真是神，就这么六个字，完全破开了心结。不过，倒也觉得有一盆凉水泼下来，瞬间就冷静了，被一股理性击中，从蹦蹦跳跳的小学生变成了成年人。<br>真是好无聊，一下子就严肃了起来，刚才虽然蠢，可是有孩子气的可爱呀。</p>
<p>“一个变量的线性回归”，越想越觉得萌。</p>
<hr>
<p>我应该建个“分类”页，开一栏叫做“胡言乱语”，这篇就摆第一个。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;抽空写两句玩笑话，不过，我的笑点素来很奇怪，可能一点也不好笑。&lt;br&gt;
    
    </summary>
    
    
      <category term="nonsense" scheme="http://yibeichen.me/tags/nonsense/"/>
    
  </entry>
  
  <entry>
    <title>记一次失败的尝试</title>
    <link href="http://yibeichen.me/2016/07/31/A-Failed-Try/"/>
    <id>http://yibeichen.me/2016/07/31/A-Failed-Try/</id>
    <published>2016-07-31T08:21:07.000Z</published>
    <updated>2016-08-04T13:18:45.000Z</updated>
    
    <content type="html"><![CDATA[<p>这篇文章是关于为Hexo添加站内搜索的，很不幸，失败了，所以这篇文章也没有什么参考价值，引以为戒好了。<br><a id="more"></a><br>尝试了两种方法：Swiftype Search 和Local Search，严格说来也不能算失败，但是结果实在不能令人满意。</p>
<p>一个一个说：</p>
<h1 id="Swiftype"><a href="#Swiftype" class="headerlink" title="Swiftype"></a>Swiftype</h1><p>分两步：</p>
<h2 id="Swiftype内设置"><a href="#Swiftype内设置" class="headerlink" title="Swiftype内设置"></a>Swiftype内设置</h2><ul>
<li>注册账号</li>
<li>添加搜索引擎（官网上有清晰的引导）</li>
<li>自定义搜索引擎样式</li>
<li>获取key</li>
</ul>
<h2 id="Hexo内设置"><a href="#Hexo内设置" class="headerlink" title="Hexo内设置"></a>Hexo内设置</h2><p>在站点_config.yml添加 <code>Swiftype_key: yourswiftypekey</code></p>
<p>按理说这样设置以后就ok了，结果网站的menu变成了这样：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-07-31_16:30:14.jpg" alt="2016-07-31_16:30:14.jpg"><br>WHAT!!!<br>为什么会有两个搜索！TELL ME WHY!!!</p>
<p>其实最开始是没有搜索框的，只有“搜索”这个菜单，为了把文字换成搜索框，我就去折腾NexT的配置文件了，找到一个Swiftype.swig,把里面的代码换成了网站提供的，事实上没有什么差别，唯一不同的地方就是swig本来是没有key的。然后，网页就同时出现了搜索框和“搜索”字样。</p>
<p>好了，我现在不想要搜索框了，只要一个“搜索”就ok啊，然而，无论我怎么改，把swig改回去，在Swiftype里把engine删了重设又删又重设，都没有一点用。</p>
<p>算了算了，我不要这个了，改成Local Search，OK？</p>
<h1 id="Local-Search"><a href="#Local-Search" class="headerlink" title="Local Search"></a>Local Search</h1><p>安装插件<br><code>$ npm install hexo-generator-search --save</code></p>
<p>在站点的_config.yml中增加<br><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">search:</div><div class="line">  path: search.<span class="keyword">xml</span></div><div class="line">  <span class="title">field</span>: post</div></pre></td></tr></table></figure></p>
<p>效果如图：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-07-31_16:47:55.jpg" alt="2016-07-31_16:47:55.jpg"></p>
<p>搜索框长这么难看就算了，搜索结果还不精确。似乎只能抓取首页的，其他页面比如“工具”的内容就没办法检索到，以cheatsheet为例：<br><img src="http://oapfne1kf.bkt.clouddn.com/2016-07-31_16:51:13.jpg" alt="2016-07-31_16:51:13.jpg"></p>
<p>样式我不会改，可能要修改node_modules内的文件，看不懂。</p>
<h1 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h1><p>好了，就是这样一个悲伤的故事。<br>我只想要一个简单实用又好看（要求高？）的搜索啊！</p>
<p>折腾了整整一天，竟然就是这个结果。</p>
<hr>
<p>妹妹：姐姐你不休息一会呀？<br>我：玩的时候为什么要休息？<br>妹妹：你不是在工作吗？<br>我：我没在工作，我在玩……</p>
<p>玩物丧志，懂？</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;这篇文章是关于为Hexo添加站内搜索的，很不幸，失败了，所以这篇文章也没有什么参考价值，引以为戒好了。&lt;br&gt;
    
    </summary>
    
    
      <category term="Hexo" scheme="http://yibeichen.me/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title>7 Steps to Mastering Machine Learning With Python</title>
    <link href="http://yibeichen.me/2016/07/30/Seven-Steps-Machine-Learning-Python/"/>
    <id>http://yibeichen.me/2016/07/30/Seven-Steps-Machine-Learning-Python/</id>
    <published>2016-07-30T09:49:46.000Z</published>
    <updated>2016-07-30T10:22:35.000Z</updated>
    
    <content type="html"><![CDATA[<p>8月份准备学习machine learning，试了一下用Google搜索“machine learning tutorial”，找到了一篇不错的文章，拿来存着。<br><a id="more"></a><br>原文链接：<a href="http://www.kdnuggets.com/2015/11/seven-steps-machine-learning-python.html" target="_blank" rel="external">http://www.kdnuggets.com/2015/11/seven-steps-machine-learning-python.html</a></p>
<blockquote>
<p>There are many Python machine learning resources freely available online. Where to begin? How to proceed? Go from zero to Python machine learning hero in 7 steps!<br><strong>By <a href="http://www.kdnuggets.com/author/matt-mayo" target="_blank" rel="external">Matthew Mayo</a>, KDnuggets.</strong></p>
</blockquote>
<p>Getting started. Two of the most de-motivational words in the English language. The first step is often the hardest to take, and when given too much choice in terms of direction it can often be debilitating.</p>
<p>Where to begin?</p>
<p>This post aims to take a newcomer from minimal knowledge of machine learning in Python all the way to knowledgeable practitioner in 7 steps, all while using freely available materials and resources along the way. The prime objective of this outline is to help you wade through the numerous free options that are available; there are many, to be sure, but which are the best? Which complement one another? What is the best order in which to use selected resources?</p>
<p>Moving forward, I make the assumption that you are not an expert in:</p>
<ul>
<li>Machine learning</li>
<li>Python</li>
<li>Any of Python’s machine learning, scientific computing, or data analysis libraries</li>
</ul>
<p>It would probably be helpful to have some basic understanding of one or both of the first 2 topics, but even that won’t be necessary; some extra time spent on the earlier steps should help compensate.</p>
<h1 id="Step-1-Basic-Python-Skills"><a href="#Step-1-Basic-Python-Skills" class="headerlink" title="Step 1: Basic Python Skills"></a>Step 1: Basic Python Skills</h1><p>If we intend to leverage Python in order to perform machine learning, having some base understanding of Python is crucial. Fortunately, due to its widespread popularity as a general purpose programming language, as well as its adoption in both scientific computing and machine learning, coming across beginner’s tutorials is not very difficult. Your level of experience in both Python and programming in general are crucial to choosing a starting point.</p>
<p>First, you need Python installed. Since we will be using scientific computing and machine learning packages at some point, I suggest that you <a href="http://docs.continuum.io/anaconda/install" target="_blank" rel="external">install Anaconda</a>. It is an industrial-strength Python implementation for Linux, OSX, and Windows, complete with the required packages for machine learning, including numpy, scikit-learn, and matplotlib. It also includes iPython Notebook, an interactive environment for many of our tutorials. I would suggest Python 2.7, for no other reason than it is still the dominant installed version.</p>
<p>learn-pythonIf you have no knowledge of programming, my suggestion is to start with the following free online book, then move on to the subsequent materials:</p>
<ul>
<li><a href="http://learnpythonthehardway.org/book/" target="_blank" rel="external">Python The Hard Way</a> by Zed A. Shaw</li>
</ul>
<p>If you have experience in programming but not with Python in particular, or if your Python is elementary, I would suggest one or both of the following:</p>
<ul>
<li><a href="https://www.youtube.com/playlist?list=PLfZeRfzhgQzTMgwFVezQbnpc1ck0I6CQl" target="_blank" rel="external">Google Developers Python Course </a>(highly recommended for visual learners)</li>
<li><a href="http://www.engr.ucsb.edu/~shell/che210d/python.pdf" target="_blank" rel="external">An Introduction to Python for Scientific Computing</a> (from UCSB Engineering) by M. Scott Shell (a great scientific Python intro ~60 pages)</li>
</ul>
<p>And for those looking for a 30 minute crash course in Python, here you go:</p>
<ul>
<li><a href="http://learnxinyminutes.com/docs/python/" target="_blank" rel="external">Learn X in Y Minutes (X = Python)</a></li>
</ul>
<p>Of course, if you are an experienced Python programmer you will be able to skip this step. Even if so, I suggest keeping the very readable <a href="https://www.python.org/doc/" target="_blank" rel="external">Python documentation</a> handy.</p>
<h1 id="Step-2-Foundational-Machine-Learning-Skills"><a href="#Step-2-Foundational-Machine-Learning-Skills" class="headerlink" title="Step 2: Foundational Machine Learning Skills"></a>Step 2: Foundational Machine Learning Skills</h1><p>KDnuggets’ own Zachary Lipton has pointed out that there is a lot of variation in what people consider a “data scientist.” This actually is a reflection of the field of machine learning, since much of what data scientists do involves using machine learning algorithms to varying degrees. Is it necessary to intimately understand kernel methods in order to efficiently create and gain insight from a support vector machine model? Of course not. Like almost anything in life, required depth of theoretical understanding is relative to practical application. Gaining an intimate understanding of machine learning algorithms is beyond the scope of this article, and generally requires substantial amounts of time investment in a more academic setting, or via intense self-study at the very least.</p>
<p>The good news is that you don’t need to possess a PhD-level understanding of the theoretical aspects of machine learning in order to practice, in the same manner that not all programmers require a theoretical computer science education in order to be effective coders.</p>
<p>Andrew Ng’s Coursera course often gets rave reviews for its content; my suggestion, however, is to browse the course notes compiled by a former student of the online course’s previous incarnation. Skip over the Octave-specific notes (a Matlab-like language unrelated to our Python pursuits). Be warned that these are not “official” notes, but do seem to capture the relevant content from Andrew’s course material. Of course, if you have the time and interest, now would be the time to take <a href="https://www.coursera.org/learn/machine-learning" target="_blank" rel="external">Andrew Ng’s Machine Learning course on Coursera</a>.</p>
<ul>
<li><a href="http://www.holehouse.org/mlclass/" target="_blank" rel="external">Unofficial Andrew Ng course notes</a></li>
</ul>
<p>There all sorts of video lectures out there if you prefer, alongside Ng’s course mentioned above. I’m a fan of Tom Mitchell, so here’s a link to his recent lecture videos (along with Maria-Florina Balcan), which I find particularly approachable:</p>
<ul>
<li><a href="http://www.cs.cmu.edu/~ninamf/courses/601sp15/lectures.shtml" target="_blank" rel="external">Tom Mitchell Machine Learning Lectures</a></li>
</ul>
<p>You don’t need all of the notes and videos at this point. A valid strategy involves moving forward to particular exercises below, and referencing applicable sections of the above notes and videos when appropriate. For example, when you come across an exercise implementing a regression model below, read the appropriate regression section of Ng’s notes and/or view Mitchell’s regression videos at that time.</p>
<h1 id="Step-3-Scientific-Python-Packages-Overview"><a href="#Step-3-Scientific-Python-Packages-Overview" class="headerlink" title="Step 3: Scientific Python Packages Overview"></a>Step 3: Scientific Python Packages Overview</h1><p>Alright. We have a handle on Python programming and understand a bit about machine learning. Beyond Python there are a number of open source libraries generally used to facilitate practical machine learning. In general, these are the main so-called scientific Python libraries we put to use when performing elementary machine learning tasks (there is clearly subjectivity in this):</p>
<ul>
<li><a href="http://www.numpy.org/" target="_blank" rel="external">numpy</a> - mainly useful for its N-dimensional array objects</li>
<li><a href="http://pandas.pydata.org/" target="_blank" rel="external">pandas</a> - Python data analysis library, including structures such as dataframes</li>
<li><a href="http://matplotlib.org/" target="_blank" rel="external">matplotlib</a> - 2D plotting library producing publication quality figures</li>
<li><a href="http://scikit-learn.org/stable/" target="_blank" rel="external">scikit-learn</a> - the machine learning algorithms used for data analysis and data mining tasks</li>
</ul>
<p>A good approach to learning these is to cover this material:</p>
<ul>
<li><a href="http://www.scipy-lectures.org/" target="_blank" rel="external">Scipy Lecture Notes</a> by Gaël Varoquaux, Emmanuelle Gouillart, and Olav Vahtras</li>
</ul>
<p>This pandas tutorial is good, and to the point:</p>
<ul>
<li><a href="http://pandas.pydata.org/pandas-docs/stable/10min.html" target="_blank" rel="external">10 Minutes to Pandas</a></li>
</ul>
<p>You will see some other packages in the tutorials below, including, for example, Seaborn, which is a data visualization library based on matplotlib. The aforementioned packages are (again, subjectively) the core of a wide array of machine learning tasks in Python; however, understanding them should let you adapt to additional and related packages without confusion when they are referenced in the following tutorials.</p>
<h1 id="Step-4-Getting-Started-with-Machine-Learning-in-Python"><a href="#Step-4-Getting-Started-with-Machine-Learning-in-Python" class="headerlink" title="Step 4: Getting Started with Machine Learning in Python"></a>Step 4: Getting Started with Machine Learning in Python</h1><p>Python. Check.<br>Machine learning fundamentals. Check.<br>Numpy. Check.<br>Pandas. Check.<br>Matplotlib. Check.</p>
<p>The time has come. Let’s start implementing machine learning algorithms with Python’s de facto standard machine learning library, scikit-learn.</p>
<p>Many of the following tutorials and exercises will be driven by the iPython (Jupyter) Notebook, which is an interactive environment for executing Python. These iPython notebooks can optionally be viewed online or downloaded and interacted with locally on your own computer.</p>
<ul>
<li><a href="http://cs231n.github.io/ipython-tutorial/" target="_blank" rel="external">iPython Notebook Overview</a> from Stanford</li>
</ul>
<p>Also note that the tutorials below are from a number of online sources. All Notebooks have been attributed to the authors; if, for some reason, you find that someone has not been properly credited for their work, <a href="https://twitter.com/mattmayo13" target="_blank" rel="external">please let me know</a> and the situation will be rectified ASAP. In particular, I would like to tip my hat to <a href="http://www.astro.washington.edu/users/vanderplas/" target="_blank" rel="external">Jake VanderPlas</a>, <a href="http://www.randalolson.com/" target="_blank" rel="external">Randal Olson</a>, <a href="http://donnemartin.com/" target="_blank" rel="external">Donne Martin</a>, <a href="https://twitter.com/justmarkham" target="_blank" rel="external">Kevin Markham</a>, and <a href="http://www.colinraffel.com/" target="_blank" rel="external">Colin Raffel</a> for their fantastic freely-available resources.</p>
<p>Our first tutorials for getting our feet wet with scikit-learn follow. I suggest doing all of these in order before moving to the following steps.</p>
<p>A general introduction to scikit-learn, Python’s most-used general purpose machine learning library, covering the k-nearest neighbors algorithm:</p>
<ul>
<li><a href="http://nbviewer.ipython.org/github/donnemartin/data-science-ipython-notebooks/blob/master/scikit-learn/scikit-learn-intro.ipynb" target="_blank" rel="external">An Introduction to scikit-learn</a> by Jake VanderPlas</li>
</ul>
<p>A more in-depth and expanded introduction, including a starter project with a well-known dataset from start to finish:</p>
<ul>
<li><a href="http://nbviewer.ipython.org/github/rhiever/Data-Analysis-and-Machine-Learning-Projects/blob/master/example-data-science-notebook/Example%20Machine%20Learning%20Notebook.ipynb" target="_blank" rel="external">Example Machine Learning Notebook</a> by Randal Olson</li>
</ul>
<p>A focus on strategies for evaluating different models in scikit-learn, covering train/test dataset splits:</p>
<ul>
<li><a href="https://github.com/justmarkham/scikit-learn-videos/blob/master/05_model_evaluation.ipynb" target="_blank" rel="external">Model Evaluation</a> by Kevin Markham</li>
</ul>
<h1 id="Step-5-Machine-Learning-Topics-with-Python"><a href="#Step-5-Machine-Learning-Topics-with-Python" class="headerlink" title="Step 5: Machine Learning Topics with Python"></a>Step 5: Machine Learning Topics with Python</h1><p>With a foundation having been laid in scikit-learn, we can move on to some more in-depth explorations of the various common, and useful, algorithms. We start with k-means clustering, one of the most well-known machine learning algorithms. It is a simple and often effective method for solving unsupervised learning problems:</p>
<ul>
<li><a href="https://github.com/jakevdp/sklearn_pycon2015/blob/master/notebooks/04.2-Clustering-KMeans.ipynb" target="_blank" rel="external">k-means Clustering</a> by Jake VanderPlas</li>
</ul>
<p>Next, we move back toward classification, and take a look at one of the most historically popular classification methods:</p>
<ul>
<li><a href="http://thegrimmscientist.com/2014/10/23/tutorial-decision-trees/" target="_blank" rel="external">Decision Trees</a> via <a href="http://thegrimmscientist.com/" target="_blank" rel="external">The Grimm Scientist</a></li>
</ul>
<p>From classification, we look at continuous numeric prediction:</p>
<ul>
<li><a href="http://nbviewer.ipython.org/github/donnemartin/data-science-ipython-notebooks/blob/master/scikit-learn/scikit-learn-linear-reg.ipynb" target="_blank" rel="external">Linear Regression</a> by Jake VanderPlas</li>
</ul>
<p>We can then leverage regression for classification problems, via logistic regression:</p>
<ul>
<li><a href="http://nbviewer.ipython.org/github/justmarkham/gadsdc1/blob/master/logistic_assignment/kevin_logistic_sklearn.ipynb" target="_blank" rel="external">Logistic Regression</a> by Kevin Markham</li>
</ul>
<h1 id="Step-6-Advanced-Machine-Learning-Topics-with-Python"><a href="#Step-6-Advanced-Machine-Learning-Topics-with-Python" class="headerlink" title="Step 6: Advanced Machine Learning Topics with Python"></a>Step 6: Advanced Machine Learning Topics with Python</h1><p>We’ve gotten our feet wet with scikit-learn, and now we turn our attention to some more advanced topics. First up are support vector machines, a not-necessarily-linear classifier relying on complex transformations of data into higher dimensional space.</p>
<ul>
<li><a href="https://github.com/jakevdp/sklearn_pycon2015/blob/master/notebooks/03.1-Classification-SVMs.ipynb" target="_blank" rel="external">Support Vector Machines</a> by Jake VanderPlas</li>
</ul>
<p>Next, random forests, an ensemble classifier, are examined via a Kaggle Titanic Competition walk-through:</p>
<ul>
<li><a href="https://github.com/jakevdp/sklearn_pycon2015/blob/master/notebooks/03.1-Classification-SVMs.ipynb" target="_blank" rel="external">Kaggle Titanic Competition (with Random Forests)</a> by Donne Martin</li>
</ul>
<p>Dimensionality reduction is a method for reducing the number of variables being considered in a problem. Principal Component Analysis is a particular form of unsupervised dimensionality reduction:</p>
<ul>
<li><a href="https://github.com/jakevdp/sklearn_pycon2015/blob/master/notebooks/04.1-Dimensionality-PCA.ipynb" target="_blank" rel="external">Dimensionality Reduction</a> by Jake VanderPlas</li>
</ul>
<p>Before moving on to the final step, we can take a moment to consider that we have come a long way in a relatively short period of time.</p>
<p>Using Python and its machine learning libraries, we have covered some of the most common and well-known machine learning algorithms (k-nearest neighbors, k-means clustering, support vector machines), investigated a powerful ensemble technique (random forests), and examined some additional machine learning support tasks (dimensionality reduction, model validation techniques). Along with some foundational machine learning skills, we have started filling a useful toolkit for ourselves.</p>
<p>We will add one more in-demand tool to that kit before wrapping up.</p>
<h1 id="Step-7-Deep-Learning-in-Python"><a href="#Step-7-Deep-Learning-in-Python" class="headerlink" title="Step 7: Deep Learning in Python"></a>Step 7: Deep Learning in Python</h1><p>Deep learning is everywhere! Deep learning builds on neural network research going back several decades, but recent advances dating to the past several years have dramatically increased the perceived power of, and general interest in, deep neural networks. If you are unfamiliar with deep learning, <a href="http://www.kdnuggets.com/?s=deep+learning" target="_blank" rel="external">KDnuggets has many articles</a> detailing the numerous recent innovations, accomplishments, and accolades of the technology.</p>
<p>This final step does not purport to be a deep learning clinic of any sort; we will take a look at a few simple network implementations in 2 of the leading contemporary Python deep learning libraries. For those interested in digging deeper into deep learning, I recommend starting with the following free online book:</p>
<ul>
<li><a href="http://neuralnetworksanddeeplearning.com/" target="_blank" rel="external">Neural Networks and Deep Learning</a> by <a href="http://michaelnielsen.org/" target="_blank" rel="external">Michael Nielsen</a></li>
</ul>
<h2 id="Theano"><a href="#Theano" class="headerlink" title="Theano"></a><a href="http://deeplearning.net/software/theano/" target="_blank" rel="external">Theano</a></h2><p>Theano is the first Python deep learning library we will look at. From the authors:</p>
<blockquote>
<p>Theano is a Python library that allows you to define, optimize, and evaluate mathematical expressions involving multi-dimensional arrays efficiently.</p>
</blockquote>
<p>The following introductory tutorial on deep learning in Theano is lengthy, but it is quite good, very descriptive, and heavily-commented:</p>
<ul>
<li><a href="http://nbviewer.ipython.org/github/craffel/theano-tutorial/blob/master/Theano%20Tutorial.ipynb" target="_blank" rel="external">Theano Deep Learning Tutorial</a> by <a href="http://www.colinraffel.com/" target="_blank" rel="external">Colin Raffel</a></li>
</ul>
<h2 id="Caffe"><a href="#Caffe" class="headerlink" title="Caffe"></a><a href="http://caffe.berkeleyvision.org/" target="_blank" rel="external">Caffe</a></h2><p>The other library we will test drive is Caffe. Again, from the authors:</p>
<blockquote>
<p>Caffe is a deep learning framework made with expression, speed, and modularity in mind. It is developed by the Berkeley Vision and Learning Center (BVLC) and by community contributors.</p>
</blockquote>
<p>This tutorial is the cherry on the top of this article. While we have undertaken a few interesting examples above, none likely compete with the following, which is implementing <a href="http://googleresearch.blogspot.ch/2015/06/inceptionism-going-deeper-into-neural.html" target="_blank" rel="external">Google’s #DeepDream</a> using Caffe. Enjoy this one! After understanding the tutorial, play around with it to get your processors dreaming on their own.</p>
<ul>
<li><a href="https://github.com/google/deepdream/blob/master/dream.ipynb" target="_blank" rel="external">Dreaming Deep with Caffe</a> via <a href="https://github.com/google" target="_blank" rel="external">Google’s GitHub</a></li>
</ul>
<p>I didn’t promise it would be quick or easy, but if you put the time in and follow the above 7 steps, there is no reason that you won’t be able to claim reasonable proficiency and understanding in a number of machine learning algorithms and their implementation in Python using its popular libraries, including some of those on the cutting edge of current deep learning research.</p>
<p>Bio: <a href="https://twitter.com/mattmayo13" target="_blank" rel="external">Matthew Mayo</a> is a computer science graduate student currently working on his thesis parallelizing machine learning algorithms. He is also a student of data mining, a data enthusiast, and an aspiring machine learning scientist.</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;8月份准备学习machine learning，试了一下用Google搜索“machine learning tutorial”，找到了一篇不错的文章，拿来存着。&lt;br&gt;
    
    </summary>
    
    
      <category term="Python" scheme="http://yibeichen.me/tags/Python/"/>
    
      <category term="machine learning" scheme="http://yibeichen.me/tags/machine-learning/"/>
    
  </entry>
  
  <entry>
    <title>Python for Everybody 系列课程总结</title>
    <link href="http://yibeichen.me/2016/07/30/Python-for-Everybody/"/>
    <id>http://yibeichen.me/2016/07/30/Python-for-Everybody/</id>
    <published>2016-07-30T08:52:06.000Z</published>
    <updated>2016-07-30T09:46:53.000Z</updated>
    
    <content type="html"><![CDATA[<p>没错，PY4E就是Python for Everybody的缩写。<br>6.14注册了第一门课，7.30学完了第四门课，还剩最后一个毕业项目，但是因为没有花钱买这个系列课程，所以没有资格参与这个项目。<br>总之呢，这一段Python之路可以暂告一个段落啦，接下来会探索新的Python学习之路。<br><a id="more"></a><br>这个系列是coursera上的<a href="https://www.coursera.org/specializations/python" target="_blank" rel="external">专项课程</a>，一共有五门课：</p>
<ul>
<li><a href="https://www.coursera.org/learn/python" target="_blank" rel="external">Programming for Everybody (Getting Started with Python)</a></li>
<li><a href="https://www.coursera.org/learn/python-data" target="_blank" rel="external">Python Data Structures</a></li>
<li><a href="https://www.coursera.org/learn/python-network-data" target="_blank" rel="external">Using Python to Access Web Data</a></li>
<li><a href="https://www.coursera.org/learn/python-databases" target="_blank" rel="external">Using Databases with Python</a></li>
<li>Capstone Project(毕业项目：使用 Python 获取并处理数据，并用可视化方式展现数据)</li>
</ul>
<p>配套教材有中文版本：<br><a href="http://oapfne1kf.bkt.clouddn.com/Python%20for%20Informatics.epub" target="_blank" rel="external">http://oapfne1kf.bkt.clouddn.com/Python%20for%20Informatics.epub</a><br>教材一共15章，专项课程也是围绕这15章展开的。</p>
<p>虽然是6.14注册的第一门课，但最开始是一周学一次，7.12才学完了第一门。自第二门课开始，差不多每天学习一周的量，于是就以每周一门课的速度，在7月学完了后三门。</p>
<p>从学习速度上也可以看出来，课程不难，当然了，也可以说是作业不太难，前一部分有那么几章是磕磕绊绊折腾了大半天或者一整天才做完，而且听课不是很认真，前两门课都没有做过笔记，一直到第10章才醒悟该写点什么。</p>
<p>整体上来看，从这一系列课还是学到了不少，其中最重要(至少对现阶段的我最重要)的是：</p>
<ul>
<li>借鉴别人的代码没问题，但要弄清楚为什么要这么写</li>
<li>在没有能力写一整串原创代码的时候，拿范例来修修补补也很有帮助</li>
<li>动手写代码要比看书看视频更助于理解</li>
<li>Keep exercising!</li>
</ul>
<p><a href="https://online.dr-chuck.com/" target="_blank" rel="external">Dr. Chunk</a>（整个专项课程都是由他授课）特别幽默，有一次扮成Severus Snape，弄了个分院帽和魔杖来上课。每周的Bonus Hours也特别有意思。总之是个很棒的课程！</p>
<p>另外，也是为了记录课程笔记才萌发了搭这个博客的想法，也算是有点进步了，终于有那么一次能把想法付诸实践。</p>
<p>Keep moving，Python之路还很长。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;没错，PY4E就是Python for Everybody的缩写。&lt;br&gt;6.14注册了第一门课，7.30学完了第四门课，还剩最后一个毕业项目，但是因为没有花钱买这个系列课程，所以没有资格参与这个项目。&lt;br&gt;总之呢，这一段Python之路可以暂告一个段落啦，接下来会探索新的Python学习之路。&lt;br&gt;
    
    </summary>
    
    
      <category term="coursera" scheme="http://yibeichen.me/tags/coursera/"/>
    
      <category term="Python" scheme="http://yibeichen.me/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>PY4E Chapter 15（Databases and Visualization）</title>
    <link href="http://yibeichen.me/2016/07/30/PY4E-Chapter-15/"/>
    <id>http://yibeichen.me/2016/07/30/PY4E-Chapter-15/</id>
    <published>2016-07-30T06:57:44.000Z</published>
    <updated>2016-07-30T09:46:32.000Z</updated>
    
    <content type="html"><![CDATA[<p>听完最后这章，只想说，有些事实在是因缘际会，怎么这么巧！<br>假如事件A和事件B有一定的关联，而我先碰到了A，那大概就注定会碰到B吧。</p>
<p>讲了三个例子</p>
<ul>
<li>Geocoding</li>
<li>Page Rank and Web Searching</li>
<li>Gmane - Mailing Lists</li>
</ul>
<p>其实一个都没听懂，毕竟太复杂了。<br>最后的课程作业超级简单，把提供好的代码下载到本地，运行一下，截图上传，peer-grade。<br><a id="more"></a><br><strong>Retrieving GEOData and Visualize the Map</strong><br><img src="http://oapfne1kf.bkt.clouddn.com/2016-07-30_15:55:31.jpg" alt="2016-07-30_15:55:31.jpg"><br><img src="http://oapfne1kf.bkt.clouddn.com/2016-07-30_15:59:36.jpg" alt="2016-07-30_15:59:36.jpg"></p>
<p>曾经用Google Map把不同的地点标在一张图上，然后推算出要找的位置。啊，那可是用手工计算的，开了好多个网页，切换来切换去。当时想，应该有这种可以帮忙标记地点的应用吧，可是没找到，其实也没好好找。<br>总之，最后自制了一张图，还觉得自己酷酷哒。<br>然而，今天看着.py文件运行，一串串代码刷刷刷上传，这才是真的cool啊！</p>
<p>独乐乐不如众乐乐，附上code和玩法。</p>
<ul>
<li>Download the code from <a href="http://www.pythonlearn.com/code/geodata.zip" target="_blank" rel="external">http://www.pythonlearn.com/code/geodata.zip</a><br>-Then unzip the file and edit where.data to add an address nearby where you live - don’t reveal your actual location.</li>
<li>Then run the geoload.py to lookup all of the entries in where.data (including the new one) and produce the geodata.sqlite.</li>
<li>Then run geodump.py to read the database and produce where.js.</li>
<li>Then open where.html to visualize the map.</li>
</ul>
<p>本章的slide链接：<a href="https://www.dr-chuck.net/pythonlearn/slides/EN_us/Py4Inf-15-Data-Viz.pdf" target="_blank" rel="external">https://www.dr-chuck.net/pythonlearn/slides/EN_us/Py4Inf-15-Data-Viz.pdf</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;听完最后这章，只想说，有些事实在是因缘际会，怎么这么巧！&lt;br&gt;假如事件A和事件B有一定的关联，而我先碰到了A，那大概就注定会碰到B吧。&lt;/p&gt;
&lt;p&gt;讲了三个例子&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Geocoding&lt;/li&gt;
&lt;li&gt;Page Rank and Web Searching&lt;/li&gt;
&lt;li&gt;Gmane - Mailing Lists&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;其实一个都没听懂，毕竟太复杂了。&lt;br&gt;最后的课程作业超级简单，把提供好的代码下载到本地，运行一下，截图上传，peer-grade。&lt;br&gt;
    
    </summary>
    
    
      <category term="coursera" scheme="http://yibeichen.me/tags/coursera/"/>
    
      <category term="Python" scheme="http://yibeichen.me/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>PY4E Chapter 14.3（Many-to-Many Relationships in SQL）</title>
    <link href="http://yibeichen.me/2016/07/30/PY4E-Chapter-14-3/"/>
    <id>http://yibeichen.me/2016/07/30/PY4E-Chapter-14-3/</id>
    <published>2016-07-30T05:44:17.000Z</published>
    <updated>2016-07-30T09:46:35.000Z</updated>
    
    <content type="html"><![CDATA[<p>前两小节讲的都是one-to-many型数据，这一节讲many-to-many类型的数据。<br>这周的题目也是醉了，只用从例子中改三行代码即可。<br>感觉智商派不上用场……<br><a id="more"></a></p>
<h1 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h1><h2 id="Many-to-Many"><a href="#Many-to-Many" class="headerlink" title="Many-to-Many"></a>Many-to-Many</h2><ul>
<li>We need to add a “connection” table with two foreign keys</li>
<li>There is usually no separate primary key</li>
</ul>
<p><strong>Why We Do This?</strong><br>All about speed.</p>
<h2 id="Complexity-Enables-Speed"><a href="#Complexity-Enables-Speed" class="headerlink" title="Complexity Enables Speed"></a>Complexity Enables Speed</h2><ul>
<li>Complexity makes speed possible and allows you to get very fast results as the data size grows</li>
<li>By <em>normalizing the data and linking it with integer keys, the overall amount of data</em> which the relational database must <em>scan</em> is far lower than if the data were simply flattened out</li>
<li>It might seem like a <strong>tradeoff</strong> - spend some time designing your database so it continues to be fast when your application is a success</li>
</ul>
<h2 id="Additional-SQL-Topics"><a href="#Additional-SQL-Topics" class="headerlink" title="Additional SQL Topics"></a>Additional SQL Topics</h2><ul>
<li>Indexes improve access performance for things like string fields</li>
<li>Constraints on data - (cannot be NULL, etc..)</li>
<li>Transactions - allow SQL operations to be grouped and done as a unit</li>
</ul>
<h1 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h1><p>This application will read roster data in JSON format, parse the file, and then produce an SQLite database that contains a User, Course, and Member table and populate the tables from the data file.</p>
<p>You can base your solution on this code: <a href="http://www.pythonlearn.com/code/roster.py" target="_blank" rel="external">http://www.pythonlearn.com/code/roster.py</a> - this code is incomplete as you need to modify the program to store the role column in the Member table to complete the assignment.</p>
<p>Each student gets their own file for the assignment. Download this file and save it as roster_data.json. Move the downloaded file into the same folder as your roster.py program.</p>
<p>Once you have made the necessary changes to the program and it has been run successfully reading the above JSON data, run the following SQL command:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> <span class="keyword">hex</span>(User.name || Course.title || Member.role ) <span class="keyword">AS</span> X <span class="keyword">FROM</span></div><div class="line">    <span class="keyword">User</span> <span class="keyword">JOIN</span> <span class="keyword">Member</span> <span class="keyword">JOIN</span> Course</div><div class="line">    <span class="keyword">ON</span> User.id = Member.user_id <span class="keyword">AND</span> Member.course_id = Course.id</div><div class="line">    <span class="keyword">ORDER</span> <span class="keyword">BY</span> X</div></pre></td></tr></table></figure></p>
<p>Find the <strong>first</strong> row in the resulting record set and enter the long string that looks like 53656C696E613333.</p>
<h1 id="答案"><a href="#答案" class="headerlink" title="答案"></a>答案</h1><p>Python：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> json</div><div class="line"><span class="keyword">import</span> sqlite3</div><div class="line"></div><div class="line">conn = sqlite3.connect(<span class="string">'rosterdb.sqlite'</span>)</div><div class="line">cur = conn.cursor()</div><div class="line"></div><div class="line"><span class="comment"># Do some setup</span></div><div class="line">cur.executescript(<span class="string">'''</span></div><div class="line">DROP TABLE IF EXISTS User;</div><div class="line">DROP TABLE IF EXISTS Member;</div><div class="line">DROP TABLE IF EXISTS Course;</div><div class="line"></div><div class="line">CREATE TABLE User (</div><div class="line">    id     INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT UNIQUE,</div><div class="line">    name   TEXT UNIQUE</div><div class="line">);</div><div class="line"></div><div class="line">CREATE TABLE Course (</div><div class="line">    id     INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT UNIQUE,</div><div class="line">    title  TEXT UNIQUE</div><div class="line">);</div><div class="line"></div><div class="line">CREATE TABLE Member (</div><div class="line">    user_id     INTEGER,</div><div class="line">    course_id   INTEGER,</div><div class="line">    role        INTEGER,</div><div class="line">    PRIMARY KEY (user_id, course_id)</div><div class="line">)</div><div class="line">''')</div><div class="line"></div><div class="line">fname = raw_input(<span class="string">'Enter file name: '</span>)</div><div class="line"><span class="keyword">if</span> ( len(fname) &lt; <span class="number">1</span> ) : fname = <span class="string">'roster_data.json'</span></div><div class="line"></div><div class="line"></div><div class="line">str_data = open(fname).read()</div><div class="line">json_data = json.loads(str_data)</div><div class="line"></div><div class="line"><span class="keyword">for</span> entry <span class="keyword">in</span> json_data:</div><div class="line"></div><div class="line">    name = entry[<span class="number">0</span>];</div><div class="line">    title = entry[<span class="number">1</span>];</div><div class="line">    role = entry[<span class="number">2</span>] <span class="comment"># 添加了role</span></div><div class="line"></div><div class="line">    <span class="keyword">print</span> name, title, role <span class="comment"># 添加了role</span></div><div class="line"></div><div class="line">    cur.execute(<span class="string">'''INSERT OR IGNORE INTO User (name)</span></div><div class="line">        VALUES ( ? )''', ( name, ) )</div><div class="line">    cur.execute(<span class="string">'SELECT id FROM User WHERE name = ? '</span>, (name, ))</div><div class="line">    user_id = cur.fetchone()[<span class="number">0</span>]</div><div class="line"></div><div class="line">    cur.execute(<span class="string">'''INSERT OR IGNORE INTO Course (title)</span></div><div class="line">        VALUES ( ? )''', ( title, ) )</div><div class="line">    cur.execute(<span class="string">'SELECT id FROM Course WHERE title = ? '</span>, (title, ))</div><div class="line">    course_id = cur.fetchone()[<span class="number">0</span>]</div><div class="line"></div><div class="line">    cur.execute(<span class="string">'''INSERT OR REPLACE INTO Member</span></div><div class="line">        (user_id, course_id, role) VALUES ( ?, ?, ? )''',</div><div class="line">        ( user_id, course_id, role ) ) <span class="comment"># 添加了role（3处）</span></div><div class="line"></div><div class="line">    conn.commit()</div></pre></td></tr></table></figure></p>
<p>SQL：<br>题目中给定的那些，原封不动。<br>不过，这段语句倒是第一次见：<code>hex(User.name || Course.title || Member.role ) AS X</code> 是把三个字段合并为一个吧，但是得到的结果长得好奇怪，不知道是怎么排列的。</p>
<h1 id="备注"><a href="#备注" class="headerlink" title="备注"></a>备注</h1><p>没有一点点惊喜，还以为到第三节了，会来个好玩的，比如教材上的，抓取Twitter朋友信息什么的，打算改一改去试试微博。<br>啊，不能怪老师，要怪就怪自己心思不正。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;前两小节讲的都是one-to-many型数据，这一节讲many-to-many类型的数据。&lt;br&gt;这周的题目也是醉了，只用从例子中改三行代码即可。&lt;br&gt;感觉智商派不上用场……&lt;br&gt;
    
    </summary>
    
    
      <category term="coursera" scheme="http://yibeichen.me/tags/coursera/"/>
    
      <category term="Python" scheme="http://yibeichen.me/tags/Python/"/>
    
  </entry>
  
</feed>
